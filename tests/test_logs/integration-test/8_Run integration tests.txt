2026-01-28T09:23:27.4903242Z ##[group]Run coactions/setup-xvfb@v1
2026-01-28T09:23:27.4903527Z with:
2026-01-28T09:23:27.4903777Z   run: uv run pytest tests/integration/ -v -m "not triton"
2026-01-28T09:23:27.4904060Z env:
2026-01-28T09:23:27.4904286Z   pythonLocation: /opt/hostedtoolcache/Python/3.12.12/x64
2026-01-28T09:23:27.4904679Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.12.12/x64/lib/pkgconfig
2026-01-28T09:23:27.4905085Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.12/x64
2026-01-28T09:23:27.4905643Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.12/x64
2026-01-28T09:23:27.4905986Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.12/x64
2026-01-28T09:23:27.4906345Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.12.12/x64/lib
2026-01-28T09:23:27.4906672Z   CI_SERVER_URL: http://localhost:9540
2026-01-28T09:23:27.4906907Z ##[endgroup]
2026-01-28T09:23:27.6215103Z [command]/usr/bin/sudo apt-get install -y xvfb x11-xserver-utils
2026-01-28T09:23:27.6462888Z Reading package lists...
2026-01-28T09:23:27.8237656Z Building dependency tree...
2026-01-28T09:23:27.8244315Z Reading state information...
2026-01-28T09:23:27.9908034Z xvfb is already the newest version (2:21.1.12-1ubuntu1.5).
2026-01-28T09:23:27.9908665Z Suggested packages:
2026-01-28T09:23:27.9908921Z   nickle cairo-5c xorg-docs-core
2026-01-28T09:23:28.0190231Z The following NEW packages will be installed:
2026-01-28T09:23:28.0191164Z   x11-xserver-utils
2026-01-28T09:23:28.0466637Z 0 upgraded, 1 newly installed, 0 to remove and 64 not upgraded.
2026-01-28T09:23:28.0467682Z Need to get 169 kB of archives.
2026-01-28T09:23:28.0468363Z After this operation, 573 kB of additional disk space will be used.
2026-01-28T09:23:28.0469703Z Get:1 file:/etc/apt/apt-mirrors.txt Mirrorlist [144 B]
2026-01-28T09:23:28.0878145Z Get:2 http://azure.archive.ubuntu.com/ubuntu noble/main amd64 x11-xserver-utils amd64 7.7+10build2 [169 kB]
2026-01-28T09:23:28.3897864Z Fetched 169 kB in 0s (2676 kB/s)
2026-01-28T09:23:28.4449961Z Selecting previously unselected package x11-xserver-utils.
2026-01-28T09:23:28.5185847Z (Reading database ... 
2026-01-28T09:23:28.5186283Z (Reading database ... 5%
2026-01-28T09:23:28.5186521Z (Reading database ... 10%
2026-01-28T09:23:28.5186741Z (Reading database ... 15%
2026-01-28T09:23:28.5187104Z (Reading database ... 20%
2026-01-28T09:23:28.5187474Z (Reading database ... 25%
2026-01-28T09:23:28.5188990Z (Reading database ... 30%
2026-01-28T09:23:28.5189393Z (Reading database ... 35%
2026-01-28T09:23:28.5189734Z (Reading database ... 40%
2026-01-28T09:23:28.5190019Z (Reading database ... 45%
2026-01-28T09:23:28.5190223Z (Reading database ... 50%
2026-01-28T09:23:28.5466627Z (Reading database ... 55%
2026-01-28T09:23:28.8032153Z (Reading database ... 60%
2026-01-28T09:23:28.9252184Z (Reading database ... 65%
2026-01-28T09:23:29.0064371Z (Reading database ... 70%
2026-01-28T09:23:29.1774343Z (Reading database ... 75%
2026-01-28T09:23:29.4926281Z (Reading database ... 80%
2026-01-28T09:23:29.8945501Z (Reading database ... 85%
2026-01-28T09:23:30.3462254Z (Reading database ... 90%
2026-01-28T09:23:30.7838881Z (Reading database ... 95%
2026-01-28T09:23:30.7839536Z (Reading database ... 100%
2026-01-28T09:23:30.7840329Z (Reading database ... 217173 files and directories currently installed.)
2026-01-28T09:23:30.7884205Z Preparing to unpack .../x11-xserver-utils_7.7+10build2_amd64.deb ...
2026-01-28T09:23:30.7906257Z Unpacking x11-xserver-utils (7.7+10build2) ...
2026-01-28T09:23:30.8591068Z Setting up x11-xserver-utils (7.7+10build2) ...
2026-01-28T09:23:30.8623122Z Processing triggers for man-db (2.12.0-4build2) ...
2026-01-28T09:23:30.8702869Z Not building database; man-db/auto-update is not 'true'.
2026-01-28T09:23:32.1286935Z 
2026-01-28T09:23:32.1287770Z Running kernel seems to be up-to-date.
2026-01-28T09:23:32.1288311Z 
2026-01-28T09:23:32.1288551Z No services need to be restarted.
2026-01-28T09:23:32.1288887Z 
2026-01-28T09:23:32.1289086Z No containers need to be restarted.
2026-01-28T09:23:32.1289404Z 
2026-01-28T09:23:32.1289608Z No user sessions are running outdated binaries.
2026-01-28T09:23:32.1290426Z 
2026-01-28T09:23:32.1290779Z No VM guests are running outdated hypervisor (qemu) binaries on this host.
2026-01-28T09:23:33.1698050Z Command: uv run pytest tests/integration/ -v -m "not triton"
2026-01-28T09:23:33.1720269Z [command]/usr/bin/xvfb-run --auto-servernum uv run pytest tests/integration/ -v -m not triton
2026-01-28T09:23:35.6880377Z ============================= test session starts ==============================
2026-01-28T09:23:35.6882003Z platform linux -- Python 3.12.12, pytest-8.3.1, pluggy-1.6.0 -- /home/runner/work/biocentral_server/biocentral_server/.venv/bin/python
2026-01-28T09:23:35.6883367Z cachedir: .pytest_cache
2026-01-28T09:23:35.6884595Z benchmark: 5.2.3 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
2026-01-28T09:23:35.6886503Z hypothesis profile 'ci' -> database=None, deadline=None, print_blob=True, derandomize=True, suppress_health_check=(HealthCheck.too_slow,)
2026-01-28T09:23:35.6887762Z rootdir: /home/runner/work/biocentral_server/biocentral_server
2026-01-28T09:23:35.6888370Z configfile: pyproject.toml
2026-01-28T09:23:35.6889106Z plugins: jaxtyping-0.3.5, benchmark-5.2.3, cov-7.0.0, hypothesis-6.150.2, asyncio-1.3.0, anyio-4.12.1
2026-01-28T09:23:35.6890493Z asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=function, asyncio_default_test_loop_scope=function
2026-01-28T09:24:32.0998338Z collecting ... collected 137 items
2026-01-28T09:24:32.0998818Z 
2026-01-28T09:24:32.2363762Z tests/integration/endpoints/test_embed_flow.py::TestCommonEmbeddersEndpoint::test_common_embedders_returns_list FAILED [  0%]
2026-01-28T09:24:32.2436923Z tests/integration/endpoints/test_embed_flow.py::TestCommonEmbeddersEndpoint::test_common_embedders_includes_baseline_models FAILED [  1%]
2026-01-28T09:24:32.2521111Z tests/integration/endpoints/test_embed_flow.py::TestCommonEmbeddersEndpoint::test_common_embedders_response_is_consistent FAILED [  2%]
2026-01-28T09:24:32.2595452Z tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_request_creates_task FAILED [  2%]
2026-01-28T09:24:32.2671845Z tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_task_completes_successfully FAILED [  3%]
2026-01-28T09:24:32.2744825Z tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_request_with_reduction FAILED [  4%]
2026-01-28T09:24:32.2828027Z tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_multiple_sequences FAILED [  5%]
2026-01-28T09:24:32.7188447Z tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_real_world_sequences[real_insulin_b] FAILED [  5%]
2026-01-28T09:24:32.7270991Z tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_real_world_sequences[real_ubiquitin] FAILED [  6%]
2026-01-28T09:24:32.7345799Z tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_real_world_sequences[real_gfp_core] FAILED [  7%]
2026-01-28T09:24:32.7419828Z tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_length_edge_case_sequences[length_min_1] FAILED [  8%]
2026-01-28T09:24:32.7493786Z tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_length_edge_case_sequences[length_min_2] FAILED [  8%]
2026-01-28T09:24:32.7567699Z tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_length_edge_case_sequences[length_short_5] FAILED [  9%]
2026-01-28T09:24:32.7644708Z tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_length_edge_case_sequences[length_short_10] FAILED [ 10%]
2026-01-28T09:24:32.7721729Z tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_length_edge_case_sequences[length_medium_50] FAILED [ 10%]
2026-01-28T09:24:32.7796611Z tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_length_edge_case_sequences[length_long_200] FAILED [ 11%]
2026-01-28T09:24:32.7870408Z tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_sequences_with_unknown_tokens[unknown_single] FAILED [ 12%]
2026-01-28T09:24:32.7943912Z tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_sequences_with_unknown_tokens[unknown_multiple] FAILED [ 13%]
2026-01-28T09:24:32.8018985Z tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_sequences_with_unknown_tokens[unknown_start] FAILED [ 13%]
2026-01-28T09:24:32.8098263Z tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_sequences_with_unknown_tokens[unknown_end] FAILED [ 14%]
2026-01-28T09:24:32.8174003Z tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_sequences_with_unknown_tokens[unknown_middle] FAILED [ 15%]
2026-01-28T09:24:32.8247476Z tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_sequences_with_unknown_tokens[unknown_scattered] FAILED [ 16%]
2026-01-28T09:24:32.8322874Z tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_sequences_with_unknown_tokens[unknown_high_ratio] FAILED [ 16%]
2026-01-28T09:24:32.8397637Z tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_sequences_with_ambiguous_codes[ambiguous_B] FAILED [ 17%]
2026-01-28T09:24:32.8474906Z tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_sequences_with_ambiguous_codes[ambiguous_Z] FAILED [ 18%]
2026-01-28T09:24:32.8549872Z tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_sequences_with_ambiguous_codes[ambiguous_J] FAILED [ 18%]
2026-01-28T09:24:32.8623696Z tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_sequences_with_ambiguous_codes[selenocysteine] FAILED [ 19%]
2026-01-28T09:24:32.8698993Z tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_sequences_with_ambiguous_codes[pyrrolysine] FAILED [ 20%]
2026-01-28T09:24:32.8774657Z tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_empty_sequences_rejected FAILED [ 21%]
2026-01-28T09:24:32.8847347Z tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_missing_embedder_name_rejected FAILED [ 21%]
2026-01-28T09:24:32.8926124Z tests/integration/endpoints/test_embed_flow.py::TestGetMissingEmbeddingsEndpoint::test_get_missing_embeddings_new_sequences FAILED [ 22%]
2026-01-28T09:24:32.9007072Z tests/integration/endpoints/test_embed_flow.py::TestEmbedTaskLifecycle::test_task_id_is_valid_uuid FAILED [ 23%]
2026-01-28T09:24:32.9081530Z tests/integration/endpoints/test_embed_flow.py::TestEmbedTaskLifecycle::test_multiple_tasks_get_unique_ids FAILED [ 24%]
2026-01-28T09:24:32.9155568Z tests/integration/endpoints/test_embed_flow.py::TestEmbedTaskLifecycle::test_task_status_endpoint FAILED [ 24%]
2026-01-28T09:24:32.9229531Z tests/integration/endpoints/test_embed_flow.py::TestEndToEndEmbedFlow::test_embed_and_wait_for_completion FAILED [ 25%]
2026-01-28T09:24:32.9303805Z tests/integration/endpoints/test_embed_flow.py::TestEndToEndEmbedFlow::test_embed_diverse_sequences FAILED [ 26%]
2026-01-28T09:24:32.9401070Z tests/integration/endpoints/test_embed_flow.py::TestEndToEndEmbedFlow::test_embed_with_different_embedders FAILED [ 27%]
2026-01-28T09:24:32.9491892Z tests/integration/endpoints/test_predict_flow.py::TestModelMetadataEndpoint::test_get_model_metadata FAILED [ 27%]
2026-01-28T09:24:32.9576770Z tests/integration/endpoints/test_predict_flow.py::TestModelMetadataEndpoint::test_model_metadata_structure FAILED [ 28%]
2026-01-28T09:24:32.9669784Z tests/integration/endpoints/test_predict_flow.py::TestModelMetadataEndpoint::test_model_metadata_consistent FAILED [ 29%]
2026-01-28T09:24:32.9799172Z tests/integration/endpoints/test_predict_flow.py::TestPredictEndpoint::test_predict_creates_task FAILED [ 29%]
2026-01-28T09:24:32.9882552Z tests/integration/endpoints/test_predict_flow.py::TestPredictEndpoint::test_predict_task_completes FAILED [ 30%]
2026-01-28T09:24:32.9962763Z tests/integration/endpoints/test_predict_flow.py::TestPredictEndpoint::test_predict_multiple_models FAILED [ 31%]
2026-01-28T09:24:33.0065623Z tests/integration/endpoints/test_predict_flow.py::TestPredictEndpoint::test_predict_real_world_sequences[real_insulin_b] FAILED [ 32%]
2026-01-28T09:24:33.0145611Z tests/integration/endpoints/test_predict_flow.py::TestPredictEndpoint::test_predict_real_world_sequences[real_ubiquitin] FAILED [ 32%]
2026-01-28T09:24:33.0225424Z tests/integration/endpoints/test_predict_flow.py::TestPredictEndpoint::test_predict_real_world_sequences[real_gfp_core] FAILED [ 33%]
2026-01-28T09:24:33.0302543Z tests/integration/endpoints/test_predict_flow.py::TestPredictEndpoint::test_predict_standard_sequences[standard_001] FAILED [ 34%]
2026-01-28T09:24:33.0379694Z tests/integration/endpoints/test_predict_flow.py::TestPredictEndpoint::test_predict_standard_sequences[standard_002] FAILED [ 35%]
2026-01-28T09:24:33.0457077Z tests/integration/endpoints/test_predict_flow.py::TestPredictEndpoint::test_predict_standard_sequences[standard_003] FAILED [ 35%]
2026-01-28T09:24:33.0534735Z tests/integration/endpoints/test_predict_flow.py::TestPredictEndpoint::test_predict_invalid_model_rejected FAILED [ 36%]
2026-01-28T09:24:33.0611906Z tests/integration/endpoints/test_predict_flow.py::TestPredictEndpoint::test_predict_empty_sequences_rejected FAILED [ 37%]
2026-01-28T09:24:33.0689098Z tests/integration/endpoints/test_predict_flow.py::TestPredictEndpoint::test_predict_short_sequence_rejected FAILED [ 37%]
2026-01-28T09:24:33.0767701Z tests/integration/endpoints/test_predict_flow.py::TestPredictEndpoint::test_predict_empty_model_names_rejected FAILED [ 38%]
2026-01-28T09:24:33.0846854Z tests/integration/endpoints/test_predict_flow.py::TestPredictionTaskLifecycle::test_prediction_task_id_uniqueness FAILED [ 39%]
2026-01-28T09:24:33.0925110Z tests/integration/endpoints/test_predict_flow.py::TestPredictionTaskLifecycle::test_task_status_endpoint FAILED [ 40%]
2026-01-28T09:24:33.1008721Z tests/integration/endpoints/test_predict_flow.py::TestEndToEndPredictionFlow::test_complete_prediction_flow FAILED [ 40%]
2026-01-28T09:24:33.1087412Z tests/integration/endpoints/test_predict_flow.py::TestEndToEndPredictionFlow::test_predict_diverse_sequences FAILED [ 41%]
2026-01-28T09:24:33.1168748Z tests/integration/endpoints/test_predict_flow.py::TestEndToEndPredictionFlow::test_prediction_with_valid_boundary_length FAILED [ 42%]
2026-01-28T09:24:33.1241336Z tests/integration/endpoints/test_project_flow.py::TestProjectionConfigEndpoint::test_get_projection_config FAILED [ 43%]
2026-01-28T09:24:33.1312641Z tests/integration/endpoints/test_project_flow.py::TestProjectionConfigEndpoint::test_projection_config_contains_common_methods FAILED [ 43%]
2026-01-28T09:24:33.1398880Z tests/integration/endpoints/test_project_flow.py::TestProjectionConfigEndpoint::test_projection_config_consistent FAILED [ 44%]
2026-01-28T09:24:33.1472907Z tests/integration/endpoints/test_project_flow.py::TestProjectEndpoint::test_project_creates_task FAILED [ 45%]
2026-01-28T09:24:33.1546732Z tests/integration/endpoints/test_project_flow.py::TestProjectEndpoint::test_project_task_completes FAILED [ 45%]
2026-01-28T09:24:33.1620066Z tests/integration/endpoints/test_project_flow.py::TestProjectEndpoint::test_project_with_pca FAILED [ 46%]
2026-01-28T09:24:33.1694142Z tests/integration/endpoints/test_project_flow.py::TestProjectEndpoint::test_project_with_umap FAILED [ 47%]
2026-01-28T09:24:33.1766778Z tests/integration/endpoints/test_project_flow.py::TestProjectEndpoint::test_project_with_tsne FAILED [ 48%]
2026-01-28T09:24:33.1841275Z tests/integration/endpoints/test_project_flow.py::TestProjectEndpoint::test_project_standard_sequences[standard_001] FAILED [ 48%]
2026-01-28T09:24:33.1921364Z tests/integration/endpoints/test_project_flow.py::TestProjectEndpoint::test_project_standard_sequences[standard_002] FAILED [ 49%]
2026-01-28T09:24:33.1997902Z tests/integration/endpoints/test_project_flow.py::TestProjectEndpoint::test_project_standard_sequences[standard_003] FAILED [ 50%]
2026-01-28T09:24:33.2072694Z tests/integration/endpoints/test_project_flow.py::TestProjectEndpoint::test_project_real_world_sequences[real_insulin_b] FAILED [ 51%]
2026-01-28T09:24:33.2147171Z tests/integration/endpoints/test_project_flow.py::TestProjectEndpoint::test_project_real_world_sequences[real_ubiquitin] FAILED [ 51%]
2026-01-28T09:24:33.2221926Z tests/integration/endpoints/test_project_flow.py::TestProjectEndpoint::test_project_real_world_sequences[real_gfp_core] FAILED [ 52%]
2026-01-28T09:24:33.2295033Z tests/integration/endpoints/test_project_flow.py::TestProjectEndpoint::test_project_diverse_sequences FAILED [ 53%]
2026-01-28T09:24:33.2367445Z tests/integration/endpoints/test_project_flow.py::TestProjectEndpoint::test_project_invalid_method_rejected FAILED [ 54%]
2026-01-28T09:24:33.2440015Z tests/integration/endpoints/test_project_flow.py::TestProjectEndpoint::test_project_empty_sequences_rejected FAILED [ 54%]
2026-01-28T09:24:33.2514070Z tests/integration/endpoints/test_project_flow.py::TestProjectionTaskLifecycle::test_projection_task_id_uniqueness FAILED [ 55%]
2026-01-28T09:24:33.2587630Z tests/integration/endpoints/test_project_flow.py::TestProjectionTaskLifecycle::test_task_status_endpoint FAILED [ 56%]
2026-01-28T09:24:33.2661985Z tests/integration/endpoints/test_project_flow.py::TestEndToEndProjectionFlow::test_complete_projection_flow FAILED [ 56%]
2026-01-28T09:24:33.2736529Z tests/integration/endpoints/test_project_flow.py::TestEndToEndProjectionFlow::test_umap_projection_flow FAILED [ 57%]
2026-01-28T09:24:33.2816238Z tests/integration/endpoints/test_project_flow.py::TestEndToEndProjectionFlow::test_projection_with_different_embedders FAILED [ 58%]
2026-01-28T09:24:33.2893687Z tests/integration/endpoints/test_project_flow.py::TestEndToEndProjectionFlow::test_projection_with_real_world_collection FAILED [ 59%]
2026-01-28T09:24:33.2982074Z tests/integration/endpoints/test_train_inference_flow.py::TestConfigOptionsEndpoint::test_get_config_options_for_classification FAILED [ 59%]
2026-01-28T09:24:33.3069250Z tests/integration/endpoints/test_train_inference_flow.py::TestConfigOptionsEndpoint::test_get_config_options_for_regression FAILED [ 60%]
2026-01-28T09:24:33.3157768Z tests/integration/endpoints/test_train_inference_flow.py::TestConfigOptionsEndpoint::test_get_config_options_invalid_protocol FAILED [ 61%]
2026-01-28T09:24:33.3247938Z tests/integration/endpoints/test_train_inference_flow.py::TestVerifyConfigEndpoint::test_verify_valid_classification_config FAILED [ 62%]
2026-01-28T09:24:33.3338244Z tests/integration/endpoints/test_train_inference_flow.py::TestVerifyConfigEndpoint::test_verify_valid_regression_config FAILED [ 62%]
2026-01-28T09:24:33.3426504Z tests/integration/endpoints/test_train_inference_flow.py::TestVerifyConfigEndpoint::test_verify_invalid_protocol_config FAILED [ 63%]
2026-01-28T09:24:33.3515734Z tests/integration/endpoints/test_train_inference_flow.py::TestStartTrainingEndpoint::test_start_training_creates_task FAILED [ 64%]
2026-01-28T09:24:33.3604956Z tests/integration/endpoints/test_train_inference_flow.py::TestStartTrainingEndpoint::test_start_training_with_real_proteins FAILED [ 64%]
2026-01-28T09:24:33.3693800Z tests/integration/endpoints/test_train_inference_flow.py::TestStartTrainingEndpoint::test_start_regression_training FAILED [ 65%]
2026-01-28T09:24:33.3785006Z tests/integration/endpoints/test_train_inference_flow.py::TestStartTrainingEndpoint::test_start_training_empty_data_rejected FAILED [ 66%]
2026-01-28T09:24:33.3883668Z tests/integration/endpoints/test_train_inference_flow.py::TestStartTrainingEndpoint::test_start_training_invalid_config FAILED [ 67%]
2026-01-28T09:24:33.3910432Z tests/integration/endpoints/test_train_inference_flow.py::TestStartInferenceEndpoint::test_start_inference_creates_task PASSED [ 67%]
2026-01-28T09:24:33.3998684Z tests/integration/endpoints/test_train_inference_flow.py::TestStartInferenceEndpoint::test_start_inference_empty_sequences_rejected FAILED [ 68%]
2026-01-28T09:24:33.4072081Z tests/integration/endpoints/test_train_inference_flow.py::TestStartInferenceEndpoint::test_start_inference_with_standard_sequences FAILED [ 69%]
2026-01-28T09:24:33.4096954Z tests/integration/endpoints/test_train_inference_flow.py::TestModelFilesEndpoint::test_get_model_files_nonexistent PASSED [ 70%]
2026-01-28T09:24:33.4148014Z tests/integration/endpoints/test_train_inference_flow.py::TestTrainingTaskLifecycle::test_training_task_ids_are_unique PASSED [ 70%]
2026-01-28T09:24:33.4239219Z tests/integration/endpoints/test_train_inference_flow.py::TestTrainingTaskLifecycle::test_training_task_completes FAILED [ 71%]
2026-01-28T09:24:33.4329729Z tests/integration/endpoints/test_train_inference_flow.py::TestEndToEndTrainInferenceFlow::test_train_then_inference_flow FAILED [ 72%]
2026-01-28T09:24:33.4419607Z tests/integration/endpoints/test_train_inference_flow.py::TestEndToEndTrainInferenceFlow::test_regression_train_inference_flow FAILED [ 72%]
2026-01-28T09:24:33.4509403Z tests/integration/endpoints/test_train_inference_flow.py::TestEndToEndTrainInferenceFlow::test_get_model_files_after_training FAILED [ 73%]
2026-01-28T09:24:33.4600370Z tests/integration/endpoints/test_train_inference_flow.py::TestTrainingDataValidation::test_training_with_train_val_split FAILED [ 74%]
2026-01-28T09:24:33.4692707Z tests/integration/endpoints/test_train_inference_flow.py::TestTrainingDataValidation::test_training_with_multiple_classes FAILED [ 75%]
2026-01-28T09:24:33.4785455Z tests/integration/endpoints/test_train_inference_flow.py::TestTrainingDataValidation::test_training_with_long_sequences FAILED [ 75%]
2026-01-28T09:24:33.4809934Z tests/integration/endpoints/test_train_inference_flow.py::TestInferenceValidation::test_inference_with_single_sequence PASSED [ 76%]
2026-01-28T09:24:33.4834138Z tests/integration/endpoints/test_train_inference_flow.py::TestInferenceValidation::test_inference_with_many_sequences PASSED [ 77%]
2026-01-28T09:24:33.4859247Z tests/integration/endpoints/test_train_inference_flow.py::TestInferenceValidation::test_inference_with_real_proteins PASSED [ 78%]
2026-01-28T09:24:33.5218581Z tests/integration/triton_standalone/test_all_models.py::TestEmbeddingModels::test_embedding_pooled[prot_t5_pipeline-sequences0-1] SKIPPED [ 78%]
2026-01-28T09:24:33.5251200Z tests/integration/triton_standalone/test_all_models.py::TestEmbeddingModels::test_embedding_pooled[prot_t5_pipeline-sequences1-5] SKIPPED [ 79%]
2026-01-28T09:24:33.5272318Z tests/integration/triton_standalone/test_all_models.py::TestEmbeddingModels::test_embedding_pooled[esm2_t33_pipeline-sequences2-1] SKIPPED [ 80%]
2026-01-28T09:24:33.5296793Z tests/integration/triton_standalone/test_all_models.py::TestEmbeddingModels::test_embedding_pooled[esm2_t33_pipeline-sequences3-5] SKIPPED [ 81%]
2026-01-28T09:24:33.5304614Z tests/integration/triton_standalone/test_all_models.py::TestEmbeddingModels::test_embedding_pooled[esm2_t36_pipeline-sequences4-1] SKIPPED [ 81%]
2026-01-28T09:24:33.5312013Z tests/integration/triton_standalone/test_all_models.py::TestEmbeddingModels::test_embedding_pooled[esm2_t36_pipeline-sequences5-5] SKIPPED [ 82%]
2026-01-28T09:24:33.5335794Z tests/integration/triton_standalone/test_all_models.py::TestEmbeddingModels::test_embedding_per_residue[prot_t5_pipeline-sequences0-1] SKIPPED [ 83%]
2026-01-28T09:24:33.5358521Z tests/integration/triton_standalone/test_all_models.py::TestEmbeddingModels::test_embedding_per_residue[prot_t5_pipeline-sequences1-5] SKIPPED [ 83%]
2026-01-28T09:24:33.5379751Z tests/integration/triton_standalone/test_all_models.py::TestEmbeddingModels::test_embedding_per_residue[esm2_t33_pipeline-sequences2-1] SKIPPED [ 84%]
2026-01-28T09:24:33.5403873Z tests/integration/triton_standalone/test_all_models.py::TestEmbeddingModels::test_embedding_per_residue[esm2_t33_pipeline-sequences3-5] SKIPPED [ 85%]
2026-01-28T09:24:33.5411359Z tests/integration/triton_standalone/test_all_models.py::TestEmbeddingModels::test_embedding_per_residue[esm2_t36_pipeline-sequences4-1] SKIPPED [ 86%]
2026-01-28T09:24:33.5419133Z tests/integration/triton_standalone/test_all_models.py::TestEmbeddingModels::test_embedding_per_residue[esm2_t36_pipeline-sequences5-5] SKIPPED [ 86%]
2026-01-28T09:24:33.5443181Z tests/integration/triton_standalone/test_all_models.py::TestPerResiduePredictionModels::test_per_residue_prediction_single[model_class0] SKIPPED [ 87%]
2026-01-28T09:24:33.5466806Z tests/integration/triton_standalone/test_all_models.py::TestPerResiduePredictionModels::test_per_residue_prediction_single[model_class1] SKIPPED [ 88%]
2026-01-28T09:24:33.5489665Z tests/integration/triton_standalone/test_all_models.py::TestPerResiduePredictionModels::test_bindembed_prediction_single SKIPPED [ 89%]
2026-01-28T09:24:33.5510971Z tests/integration/triton_standalone/test_all_models.py::TestPerResiduePredictionModels::test_per_residue_prediction_batch[model_class0] SKIPPED [ 89%]
2026-01-28T09:24:33.5534864Z tests/integration/triton_standalone/test_all_models.py::TestPerResiduePredictionModels::test_per_residue_prediction_batch[model_class1] SKIPPED [ 90%]
2026-01-28T09:24:33.5557564Z tests/integration/triton_standalone/test_all_models.py::TestPerResiduePredictionModels::test_bindembed_prediction_batch SKIPPED [ 91%]
2026-01-28T09:24:33.5580492Z tests/integration/triton_standalone/test_all_models.py::TestPerResiduePredictionModels::test_tmbed_prediction_single SKIPPED [ 91%]
2026-01-28T09:24:33.5601811Z tests/integration/triton_standalone/test_all_models.py::TestPerResiduePredictionModels::test_tmbed_prediction_batch SKIPPED [ 92%]
2026-01-28T09:24:33.5625207Z tests/integration/triton_standalone/test_all_models.py::TestSethPipeline::test_seth_pipeline_single SKIPPED [ 93%]
2026-01-28T09:24:33.5652027Z tests/integration/triton_standalone/test_all_models.py::TestSethPipeline::test_seth_pipeline_batch SKIPPED [ 94%]
2026-01-28T09:24:33.5676149Z tests/integration/triton_standalone/test_all_models.py::TestSequenceLevelPredictionModels::test_sequence_level_prediction_single[model_class0] SKIPPED [ 94%]
2026-01-28T09:24:33.5696652Z tests/integration/triton_standalone/test_all_models.py::TestSequenceLevelPredictionModels::test_sequence_level_prediction_single[model_class1] SKIPPED [ 95%]
2026-01-28T09:24:33.5720259Z tests/integration/triton_standalone/test_all_models.py::TestSequenceLevelPredictionModels::test_sequence_level_prediction_batch[model_class0] SKIPPED [ 96%]
2026-01-28T09:24:33.5743432Z tests/integration/triton_standalone/test_all_models.py::TestSequenceLevelPredictionModels::test_sequence_level_prediction_batch[model_class1] SKIPPED [ 97%]
2026-01-28T09:24:33.5764445Z tests/integration/triton_standalone/test_all_models.py::TestVariantEffectPredictionModels::test_vespag_prediction_single SKIPPED [ 97%]
2026-01-28T09:24:33.5787228Z tests/integration/triton_standalone/test_all_models.py::TestVariantEffectPredictionModels::test_vespag_prediction_batch SKIPPED [ 98%]
2026-01-28T09:24:33.5810211Z tests/integration/triton_standalone/test_all_models.py::TestModelAvailability::test_all_embedding_models_available SKIPPED [ 99%]
2026-01-28T09:24:33.5860719Z tests/integration/triton_standalone/test_all_models.py::TestModelAvailability::test_all_prediction_models_available SKIPPED [100%]
2026-01-28T09:24:33.5861808Z 
2026-01-28T09:24:33.5861969Z =================================== FAILURES ===================================
2026-01-28T09:24:33.5862716Z ________ TestCommonEmbeddersEndpoint.test_common_embedders_returns_list ________
2026-01-28T09:24:33.5863109Z 
2026-01-28T09:24:33.5863424Z self = <endpoints.test_embed_flow.TestCommonEmbeddersEndpoint object at 0x7f7cc36fee40>
2026-01-28T09:24:33.5863983Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.5864219Z 
2026-01-28T09:24:33.5864326Z     @pytest.mark.integration
2026-01-28T09:24:33.5864643Z     def test_common_embedders_returns_list(self, client):
2026-01-28T09:24:33.5865063Z         """Test that common_embedders endpoint returns a list."""
2026-01-28T09:24:33.5865520Z         response = client.get("/embeddings_service/common_embedders")
2026-01-28T09:24:33.5865891Z     
2026-01-28T09:24:33.5866096Z >       assert response.status_code == 200
2026-01-28T09:24:33.5866591Z E       assert 404 == 200
2026-01-28T09:24:33.5866889Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.5867146Z 
2026-01-28T09:24:33.5867348Z tests/integration/endpoints/test_embed_flow.py:38: AssertionError
2026-01-28T09:24:33.5867870Z ---------------------------- Captured stdout setup -----------------------------
2026-01-28T09:24:33.5868617Z 2026-01-28 09:24:32,227 INFO HTTP Request: GET http://localhost:9540/health "HTTP/1.1 200 OK"
2026-01-28T09:24:33.5869199Z ------------------------------ Captured log setup ------------------------------
2026-01-28T09:24:33.5869855Z INFO     httpx:_client.py:1025 HTTP Request: GET http://localhost:9540/health "HTTP/1.1 200 OK"
2026-01-28T09:24:33.5870948Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.5871986Z 2026-01-28 09:24:32,229 INFO HTTP Request: GET http://localhost:9540/embeddings_service/common_embedders "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.5872972Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.5873598Z INFO     httpx:_client.py:1025 HTTP Request: GET http://localhost:9540/embeddings_service/common_embedders "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.5874291Z __ TestCommonEmbeddersEndpoint.test_common_embedders_includes_baseline_models __
2026-01-28T09:24:33.5874616Z 
2026-01-28T09:24:33.5874853Z self = <endpoints.test_embed_flow.TestCommonEmbeddersEndpoint object at 0x7f7cb5ac3260>
2026-01-28T09:24:33.5875288Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.5875477Z 
2026-01-28T09:24:33.5875561Z     @pytest.mark.integration
2026-01-28T09:24:33.5875866Z     def test_common_embedders_includes_baseline_models(self, client):
2026-01-28T09:24:33.5876234Z         """Test that baseline embedders are available."""
2026-01-28T09:24:33.5876585Z         response = client.get("/embeddings_service/common_embedders")
2026-01-28T09:24:33.5876891Z     
2026-01-28T09:24:33.5877065Z >       assert response.status_code == 200
2026-01-28T09:24:33.5877307Z E       assert 404 == 200
2026-01-28T09:24:33.5877541Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.5877753Z 
2026-01-28T09:24:33.5877916Z tests/integration/endpoints/test_embed_flow.py:48: AssertionError
2026-01-28T09:24:33.5878325Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.5878922Z 2026-01-28 09:24:32,237 INFO HTTP Request: GET http://localhost:9540/embeddings_service/common_embedders "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.5879508Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.5880481Z INFO     httpx:_client.py:1025 HTTP Request: GET http://localhost:9540/embeddings_service/common_embedders "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.5881597Z ___ TestCommonEmbeddersEndpoint.test_common_embedders_response_is_consistent ___
2026-01-28T09:24:33.5881925Z 
2026-01-28T09:24:33.5882161Z self = <endpoints.test_embed_flow.TestCommonEmbeddersEndpoint object at 0x7f7cb5ad0b00>
2026-01-28T09:24:33.5882828Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.5883023Z 
2026-01-28T09:24:33.5883108Z     @pytest.mark.integration
2026-01-28T09:24:33.5883401Z     def test_common_embedders_response_is_consistent(self, client):
2026-01-28T09:24:33.5883766Z         """Test that multiple calls return the same list."""
2026-01-28T09:24:33.5884126Z         response1 = client.get("/embeddings_service/common_embedders")
2026-01-28T09:24:33.5884518Z         response2 = client.get("/embeddings_service/common_embedders")
2026-01-28T09:24:33.5884820Z     
2026-01-28T09:24:33.5884988Z >       assert response1.status_code == 200
2026-01-28T09:24:33.5885228Z E       assert 404 == 200
2026-01-28T09:24:33.5885460Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.5885667Z 
2026-01-28T09:24:33.5885832Z tests/integration/endpoints/test_embed_flow.py:61: AssertionError
2026-01-28T09:24:33.5886395Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.5886993Z 2026-01-28 09:24:32,245 INFO HTTP Request: GET http://localhost:9540/embeddings_service/common_embedders "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.5887756Z 2026-01-28 09:24:32,246 INFO HTTP Request: GET http://localhost:9540/embeddings_service/common_embedders "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.5888455Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.5889056Z INFO     httpx:_client.py:1025 HTTP Request: GET http://localhost:9540/embeddings_service/common_embedders "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.5889844Z INFO     httpx:_client.py:1025 HTTP Request: GET http://localhost:9540/embeddings_service/common_embedders "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.5890917Z ______________ TestEmbedEndpoint.test_embed_request_creates_task _______________
2026-01-28T09:24:33.5891431Z 
2026-01-28T09:24:33.5891762Z self = <endpoints.test_embed_flow.TestEmbedEndpoint object at 0x7f7cb5ad0620>
2026-01-28T09:24:33.5892153Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.5892669Z embedder_name = 'facebook/esm2_t6_8M_UR50D'
2026-01-28T09:24:33.5893191Z short_test_sequences = {'short_1': 'MKTAYIAKQR', 'short_2': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLS'}
2026-01-28T09:24:33.5893614Z 
2026-01-28T09:24:33.5893697Z     @pytest.mark.integration
2026-01-28T09:24:33.5893925Z     def test_embed_request_creates_task(
2026-01-28T09:24:33.5894154Z         self,
2026-01-28T09:24:33.5894312Z         client,
2026-01-28T09:24:33.5894474Z         embedder_name,
2026-01-28T09:24:33.5894665Z         short_test_sequences,
2026-01-28T09:24:33.5894856Z     ):
2026-01-28T09:24:33.5895109Z         """Test that embedding request creates a task and returns task ID."""
2026-01-28T09:24:33.5895443Z         request_data = {
2026-01-28T09:24:33.5895650Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.5895895Z             "reduce": False,
2026-01-28T09:24:33.5896116Z             "sequence_data": short_test_sequences,
2026-01-28T09:24:33.5896387Z             "use_half_precision": False,
2026-01-28T09:24:33.5896601Z         }
2026-01-28T09:24:33.5896742Z     
2026-01-28T09:24:33.5896998Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.5897337Z     
2026-01-28T09:24:33.5897501Z >       assert response.status_code == 200
2026-01-28T09:24:33.5897740Z E       assert 404 == 200
2026-01-28T09:24:33.5897985Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.5898194Z 
2026-01-28T09:24:33.5898360Z tests/integration/endpoints/test_embed_flow.py:90: AssertionError
2026-01-28T09:24:33.5898773Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.5899345Z 2026-01-28 09:24:32,253 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.5899943Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.5900780Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.5901894Z ___________ TestEmbedEndpoint.test_embed_task_completes_successfully ___________
2026-01-28T09:24:33.5902203Z 
2026-01-28T09:24:33.5902605Z self = <endpoints.test_embed_flow.TestEmbedEndpoint object at 0x7f7cb5ad3290>
2026-01-28T09:24:33.5903013Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.5903357Z poll_task = <function poll_task.<locals>._poll at 0x7f7b0b5d8d60>
2026-01-28T09:24:33.5903679Z embedder_name = 'facebook/esm2_t6_8M_UR50D'
2026-01-28T09:24:33.5904251Z single_test_sequence = {'test_seq': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLSGAEKAVQVKVKALPDAQFEVVHSLAKWKRQ'}
2026-01-28T09:24:33.5904741Z 
2026-01-28T09:24:33.5904831Z     @pytest.mark.integration
2026-01-28T09:24:33.5905243Z     def test_embed_task_completes_successfully(
2026-01-28T09:24:33.5905492Z         self,
2026-01-28T09:24:33.5905644Z         client,
2026-01-28T09:24:33.5905805Z         poll_task,
2026-01-28T09:24:33.5905972Z         embedder_name,
2026-01-28T09:24:33.5906172Z         single_test_sequence,
2026-01-28T09:24:33.5906368Z     ):
2026-01-28T09:24:33.5906573Z         """Test that embedding task completes successfully."""
2026-01-28T09:24:33.5906971Z         request_data = {
2026-01-28T09:24:33.5907170Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.5907412Z             "reduce": True,
2026-01-28T09:24:33.5907626Z             "sequence_data": single_test_sequence,
2026-01-28T09:24:33.5907887Z             "use_half_precision": False,
2026-01-28T09:24:33.5908102Z         }
2026-01-28T09:24:33.5908242Z     
2026-01-28T09:24:33.5908501Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.5908883Z >       assert response.status_code == 200
2026-01-28T09:24:33.5909120Z E       assert 404 == 200
2026-01-28T09:24:33.5909356Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.5909561Z 
2026-01-28T09:24:33.5909735Z tests/integration/endpoints/test_embed_flow.py:113: AssertionError
2026-01-28T09:24:33.5910144Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.5910960Z 2026-01-28 09:24:32,261 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.5911958Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.5912846Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.5913467Z _____________ TestEmbedEndpoint.test_embed_request_with_reduction ______________
2026-01-28T09:24:33.5913754Z 
2026-01-28T09:24:33.5913945Z self = <endpoints.test_embed_flow.TestEmbedEndpoint object at 0x7f7cb5ad2ff0>
2026-01-28T09:24:33.5914344Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.5914615Z embedder_name = 'facebook/esm2_t6_8M_UR50D'
2026-01-28T09:24:33.5915185Z single_test_sequence = {'test_seq': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLSGAEKAVQVKVKALPDAQFEVVHSLAKWKRQ'}
2026-01-28T09:24:33.5915678Z 
2026-01-28T09:24:33.5915767Z     @pytest.mark.integration
2026-01-28T09:24:33.5915991Z     def test_embed_request_with_reduction(
2026-01-28T09:24:33.5916217Z         self,
2026-01-28T09:24:33.5916372Z         client,
2026-01-28T09:24:33.5916534Z         embedder_name,
2026-01-28T09:24:33.5916715Z         single_test_sequence,
2026-01-28T09:24:33.5916909Z     ):
2026-01-28T09:24:33.5917176Z         """Test embedding request with reduce=True for per-sequence embeddings."""
2026-01-28T09:24:33.5917531Z         request_data = {
2026-01-28T09:24:33.5917733Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.5917960Z             "reduce": True,
2026-01-28T09:24:33.5918181Z             "sequence_data": single_test_sequence,
2026-01-28T09:24:33.5918433Z             "use_half_precision": False,
2026-01-28T09:24:33.5918651Z         }
2026-01-28T09:24:33.5918795Z     
2026-01-28T09:24:33.5919054Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.5919383Z     
2026-01-28T09:24:33.5919554Z >       assert response.status_code == 200
2026-01-28T09:24:33.5919791Z E       assert 404 == 200
2026-01-28T09:24:33.5920108Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.5920492Z 
2026-01-28T09:24:33.5920801Z tests/integration/endpoints/test_embed_flow.py:137: AssertionError
2026-01-28T09:24:33.5921716Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.5922295Z 2026-01-28 09:24:32,268 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.5922939Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.5923680Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.5924278Z _______________ TestEmbedEndpoint.test_embed_multiple_sequences ________________
2026-01-28T09:24:33.5924685Z 
2026-01-28T09:24:33.5925000Z self = <endpoints.test_embed_flow.TestEmbedEndpoint object at 0x7f7cb5ad3a70>
2026-01-28T09:24:33.5925547Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.5925817Z embedder_name = 'facebook/esm2_t6_8M_UR50D'
2026-01-28T09:24:33.5926935Z test_sequences = {'protein_1': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLSGAEKAVQVKVKALPDAQFEVVHSLAKWKRQ', 'protein_2': 'MKKLVLS...KISDNLKAKIYAMHYVDVFYNKS', 'protein_3': 'MVHLTPEEKSAVTALWGKVNVDEVGGEALGRLLVVYPWTQRFFESFGDLSTPDAVMGNPKVKAHGKKVLGAFSDGLA'}
2026-01-28T09:24:33.5928020Z 
2026-01-28T09:24:33.5928102Z     @pytest.mark.integration
2026-01-28T09:24:33.5928324Z     def test_embed_multiple_sequences(
2026-01-28T09:24:33.5928550Z         self,
2026-01-28T09:24:33.5928704Z         client,
2026-01-28T09:24:33.5928864Z         embedder_name,
2026-01-28T09:24:33.5929051Z         test_sequences,
2026-01-28T09:24:33.5929224Z     ):
2026-01-28T09:24:33.5929442Z         """Test embedding request with multiple sequences."""
2026-01-28T09:24:33.5929724Z         request_data = {
2026-01-28T09:24:33.5930014Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.5930446Z             "reduce": False,
2026-01-28T09:24:33.5930823Z             "sequence_data": test_sequences,
2026-01-28T09:24:33.5931247Z             "use_half_precision": False,
2026-01-28T09:24:33.5931610Z         }
2026-01-28T09:24:33.5931751Z     
2026-01-28T09:24:33.5932018Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.5932342Z     
2026-01-28T09:24:33.5932755Z >       assert response.status_code == 200
2026-01-28T09:24:33.5932997Z E       assert 404 == 200
2026-01-28T09:24:33.5933236Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.5933441Z 
2026-01-28T09:24:33.5933617Z tests/integration/endpoints/test_embed_flow.py:157: AssertionError
2026-01-28T09:24:33.5934022Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.5934584Z 2026-01-28 09:24:32,276 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.5935139Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.5935700Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.5936304Z ______ TestEmbedEndpoint.test_embed_real_world_sequences[real_insulin_b] _______
2026-01-28T09:24:33.5936596Z 
2026-01-28T09:24:33.5936787Z self = <endpoints.test_embed_flow.TestEmbedEndpoint object at 0x7f7cb5ad1640>
2026-01-28T09:24:33.5937173Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.5937513Z embedder_name = 'facebook/esm2_t6_8M_UR50D', seq_id = 'real_insulin_b'
2026-01-28T09:24:33.5937767Z 
2026-01-28T09:24:33.5937849Z     @pytest.mark.integration
2026-01-28T09:24:33.5938183Z     @pytest.mark.parametrize("seq_id", CANONICAL_REAL_WORLD_IDS, ids=lambda x: x)
2026-01-28T09:24:33.5938550Z     def test_embed_real_world_sequences(
2026-01-28T09:24:33.5938772Z         self,
2026-01-28T09:24:33.5938924Z         client,
2026-01-28T09:24:33.5939088Z         embedder_name,
2026-01-28T09:24:33.5939254Z         seq_id,
2026-01-28T09:24:33.5939405Z     ):
2026-01-28T09:24:33.5939665Z         """Test embedding real-world protein sequences from canonical dataset."""
2026-01-28T09:24:33.5940170Z         sequence = get_sequence_by_id(seq_id)
2026-01-28T09:24:33.5940608Z         request_data = {
2026-01-28T09:24:33.5940950Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.5941353Z             "reduce": True,
2026-01-28T09:24:33.5941663Z             "sequence_data": {seq_id: sequence},
2026-01-28T09:24:33.5942087Z             "use_half_precision": False,
2026-01-28T09:24:33.5942302Z         }
2026-01-28T09:24:33.5942592Z     
2026-01-28T09:24:33.5942955Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.5943353Z     
2026-01-28T09:24:33.5943522Z >       assert response.status_code == 200
2026-01-28T09:24:33.5943754Z E       assert 404 == 200
2026-01-28T09:24:33.5944185Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.5944394Z 
2026-01-28T09:24:33.5944557Z tests/integration/endpoints/test_embed_flow.py:179: AssertionError
2026-01-28T09:24:33.5944967Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.5945520Z 2026-01-28 09:24:32,284 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.5946069Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.5946641Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.5947243Z ______ TestEmbedEndpoint.test_embed_real_world_sequences[real_ubiquitin] _______
2026-01-28T09:24:33.5947538Z 
2026-01-28T09:24:33.5947727Z self = <endpoints.test_embed_flow.TestEmbedEndpoint object at 0x7f7cb5ad16d0>
2026-01-28T09:24:33.5948114Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.5948564Z embedder_name = 'facebook/esm2_t6_8M_UR50D', seq_id = 'real_ubiquitin'
2026-01-28T09:24:33.5948816Z 
2026-01-28T09:24:33.5948906Z     @pytest.mark.integration
2026-01-28T09:24:33.5949232Z     @pytest.mark.parametrize("seq_id", CANONICAL_REAL_WORLD_IDS, ids=lambda x: x)
2026-01-28T09:24:33.5949602Z     def test_embed_real_world_sequences(
2026-01-28T09:24:33.5949896Z         self,
2026-01-28T09:24:33.5950175Z         client,
2026-01-28T09:24:33.5950461Z         embedder_name,
2026-01-28T09:24:33.5950759Z         seq_id,
2026-01-28T09:24:33.5951022Z     ):
2026-01-28T09:24:33.5951473Z         """Test embedding real-world protein sequences from canonical dataset."""
2026-01-28T09:24:33.5951843Z         sequence = get_sequence_by_id(seq_id)
2026-01-28T09:24:33.5952080Z         request_data = {
2026-01-28T09:24:33.5952286Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.5952624Z             "reduce": True,
2026-01-28T09:24:33.5952844Z             "sequence_data": {seq_id: sequence},
2026-01-28T09:24:33.5953089Z             "use_half_precision": False,
2026-01-28T09:24:33.5953305Z         }
2026-01-28T09:24:33.5953447Z     
2026-01-28T09:24:33.5953698Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.5954028Z     
2026-01-28T09:24:33.5954187Z >       assert response.status_code == 200
2026-01-28T09:24:33.5954420Z E       assert 404 == 200
2026-01-28T09:24:33.5954651Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.5954861Z 
2026-01-28T09:24:33.5955028Z tests/integration/endpoints/test_embed_flow.py:179: AssertionError
2026-01-28T09:24:33.5955431Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.5955990Z 2026-01-28 09:24:32,720 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.5956544Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.5957110Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.5957717Z _______ TestEmbedEndpoint.test_embed_real_world_sequences[real_gfp_core] _______
2026-01-28T09:24:33.5958007Z 
2026-01-28T09:24:33.5958199Z self = <endpoints.test_embed_flow.TestEmbedEndpoint object at 0x7f7cb5ad3fb0>
2026-01-28T09:24:33.5958590Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.5958930Z embedder_name = 'facebook/esm2_t6_8M_UR50D', seq_id = 'real_gfp_core'
2026-01-28T09:24:33.5959320Z 
2026-01-28T09:24:33.5959404Z     @pytest.mark.integration
2026-01-28T09:24:33.5959794Z     @pytest.mark.parametrize("seq_id", CANONICAL_REAL_WORLD_IDS, ids=lambda x: x)
2026-01-28T09:24:33.5960486Z     def test_embed_real_world_sequences(
2026-01-28T09:24:33.5960880Z         self,
2026-01-28T09:24:33.5961131Z         client,
2026-01-28T09:24:33.5961407Z         embedder_name,
2026-01-28T09:24:33.5961723Z         seq_id,
2026-01-28T09:24:33.5961871Z     ):
2026-01-28T09:24:33.5962139Z         """Test embedding real-world protein sequences from canonical dataset."""
2026-01-28T09:24:33.5962612Z         sequence = get_sequence_by_id(seq_id)
2026-01-28T09:24:33.5962861Z         request_data = {
2026-01-28T09:24:33.5963061Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.5963296Z             "reduce": True,
2026-01-28T09:24:33.5963505Z             "sequence_data": {seq_id: sequence},
2026-01-28T09:24:33.5963758Z             "use_half_precision": False,
2026-01-28T09:24:33.5963979Z         }
2026-01-28T09:24:33.5964116Z     
2026-01-28T09:24:33.5964371Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.5964694Z     
2026-01-28T09:24:33.5964861Z >       assert response.status_code == 200
2026-01-28T09:24:33.5965092Z E       assert 404 == 200
2026-01-28T09:24:33.5965330Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.5965540Z 
2026-01-28T09:24:33.5965705Z tests/integration/endpoints/test_embed_flow.py:179: AssertionError
2026-01-28T09:24:33.5966113Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.5966680Z 2026-01-28 09:24:32,728 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.5967224Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.5967793Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.5968416Z ____ TestEmbedEndpoint.test_embed_length_edge_case_sequences[length_min_1] _____
2026-01-28T09:24:33.5969060Z 
2026-01-28T09:24:33.5969417Z self = <endpoints.test_embed_flow.TestEmbedEndpoint object at 0x7f7cb5ad1880>
2026-01-28T09:24:33.5970106Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.5970557Z embedder_name = 'facebook/esm2_t6_8M_UR50D', seq_id = 'length_min_1'
2026-01-28T09:24:33.5970816Z 
2026-01-28T09:24:33.5970899Z     @pytest.mark.integration
2026-01-28T09:24:33.5971234Z     @pytest.mark.parametrize("seq_id", CANONICAL_LENGTH_EDGE_IDS, ids=lambda x: x)
2026-01-28T09:24:33.5971629Z     def test_embed_length_edge_case_sequences(
2026-01-28T09:24:33.5971870Z         self,
2026-01-28T09:24:33.5972017Z         client,
2026-01-28T09:24:33.5972177Z         embedder_name,
2026-01-28T09:24:33.5972345Z         seq_id,
2026-01-28T09:24:33.5972596Z     ):
2026-01-28T09:24:33.5972864Z         """Test embedding sequences at length boundaries from canonical dataset."""
2026-01-28T09:24:33.5973242Z         sequence = get_sequence_by_id(seq_id)
2026-01-28T09:24:33.5973474Z         request_data = {
2026-01-28T09:24:33.5973678Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.5973905Z             "reduce": True,
2026-01-28T09:24:33.5974120Z             "sequence_data": {seq_id: sequence},
2026-01-28T09:24:33.5974378Z             "use_half_precision": False,
2026-01-28T09:24:33.5974589Z         }
2026-01-28T09:24:33.5974732Z     
2026-01-28T09:24:33.5974983Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.5975310Z     
2026-01-28T09:24:33.5975473Z >       assert response.status_code == 200
2026-01-28T09:24:33.5975709Z E       assert 404 == 200
2026-01-28T09:24:33.5975941Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.5976153Z 
2026-01-28T09:24:33.5976316Z tests/integration/endpoints/test_embed_flow.py:201: AssertionError
2026-01-28T09:24:33.5976866Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.5977419Z 2026-01-28 09:24:32,736 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.5978041Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.5979083Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.5980063Z ____ TestEmbedEndpoint.test_embed_length_edge_case_sequences[length_min_2] _____
2026-01-28T09:24:33.5980395Z 
2026-01-28T09:24:33.5980595Z self = <endpoints.test_embed_flow.TestEmbedEndpoint object at 0x7f7cb5ad1df0>
2026-01-28T09:24:33.5980976Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.5981313Z embedder_name = 'facebook/esm2_t6_8M_UR50D', seq_id = 'length_min_2'
2026-01-28T09:24:33.5981558Z 
2026-01-28T09:24:33.5981641Z     @pytest.mark.integration
2026-01-28T09:24:33.5982006Z     @pytest.mark.parametrize("seq_id", CANONICAL_LENGTH_EDGE_IDS, ids=lambda x: x)
2026-01-28T09:24:33.5982533Z     def test_embed_length_edge_case_sequences(
2026-01-28T09:24:33.5982771Z         self,
2026-01-28T09:24:33.5982924Z         client,
2026-01-28T09:24:33.5983081Z         embedder_name,
2026-01-28T09:24:33.5983257Z         seq_id,
2026-01-28T09:24:33.5983401Z     ):
2026-01-28T09:24:33.5983679Z         """Test embedding sequences at length boundaries from canonical dataset."""
2026-01-28T09:24:33.5984045Z         sequence = get_sequence_by_id(seq_id)
2026-01-28T09:24:33.5984285Z         request_data = {
2026-01-28T09:24:33.5984484Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.5984719Z             "reduce": True,
2026-01-28T09:24:33.5984935Z             "sequence_data": {seq_id: sequence},
2026-01-28T09:24:33.5985184Z             "use_half_precision": False,
2026-01-28T09:24:33.5985404Z         }
2026-01-28T09:24:33.5985541Z     
2026-01-28T09:24:33.5985802Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.5986124Z     
2026-01-28T09:24:33.5986289Z >       assert response.status_code == 200
2026-01-28T09:24:33.5986519Z E       assert 404 == 200
2026-01-28T09:24:33.5986754Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.5986959Z 
2026-01-28T09:24:33.5987128Z tests/integration/endpoints/test_embed_flow.py:201: AssertionError
2026-01-28T09:24:33.5987699Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.5988716Z 2026-01-28 09:24:32,743 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.5989495Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.5990064Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.5990686Z ___ TestEmbedEndpoint.test_embed_length_edge_case_sequences[length_short_5] ____
2026-01-28T09:24:33.5990983Z 
2026-01-28T09:24:33.5991175Z self = <endpoints.test_embed_flow.TestEmbedEndpoint object at 0x7f7cb5ad2090>
2026-01-28T09:24:33.5991562Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.5991900Z embedder_name = 'facebook/esm2_t6_8M_UR50D', seq_id = 'length_short_5'
2026-01-28T09:24:33.5992157Z 
2026-01-28T09:24:33.5992239Z     @pytest.mark.integration
2026-01-28T09:24:33.5992673Z     @pytest.mark.parametrize("seq_id", CANONICAL_LENGTH_EDGE_IDS, ids=lambda x: x)
2026-01-28T09:24:33.5993063Z     def test_embed_length_edge_case_sequences(
2026-01-28T09:24:33.5993299Z         self,
2026-01-28T09:24:33.5993445Z         client,
2026-01-28T09:24:33.5993606Z         embedder_name,
2026-01-28T09:24:33.5993774Z         seq_id,
2026-01-28T09:24:33.5993928Z     ):
2026-01-28T09:24:33.5994193Z         """Test embedding sequences at length boundaries from canonical dataset."""
2026-01-28T09:24:33.5994717Z         sequence = get_sequence_by_id(seq_id)
2026-01-28T09:24:33.5994954Z         request_data = {
2026-01-28T09:24:33.5995157Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.5995391Z             "reduce": True,
2026-01-28T09:24:33.5995598Z             "sequence_data": {seq_id: sequence},
2026-01-28T09:24:33.5995850Z             "use_half_precision": False,
2026-01-28T09:24:33.5996169Z         }
2026-01-28T09:24:33.5996313Z     
2026-01-28T09:24:33.5996564Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.5997062Z     
2026-01-28T09:24:33.5997353Z >       assert response.status_code == 200
2026-01-28T09:24:33.5997769Z E       assert 404 == 200
2026-01-28T09:24:33.5998174Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.5998477Z 
2026-01-28T09:24:33.5998648Z tests/integration/endpoints/test_embed_flow.py:201: AssertionError
2026-01-28T09:24:33.5999076Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.5999634Z 2026-01-28 09:24:32,750 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6000185Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6000755Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6001366Z ___ TestEmbedEndpoint.test_embed_length_edge_case_sequences[length_short_10] ___
2026-01-28T09:24:33.6001659Z 
2026-01-28T09:24:33.6001855Z self = <endpoints.test_embed_flow.TestEmbedEndpoint object at 0x7f7cb5ad2150>
2026-01-28T09:24:33.6002245Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6002697Z embedder_name = 'facebook/esm2_t6_8M_UR50D', seq_id = 'length_short_10'
2026-01-28T09:24:33.6002951Z 
2026-01-28T09:24:33.6003036Z     @pytest.mark.integration
2026-01-28T09:24:33.6003367Z     @pytest.mark.parametrize("seq_id", CANONICAL_LENGTH_EDGE_IDS, ids=lambda x: x)
2026-01-28T09:24:33.6003765Z     def test_embed_length_edge_case_sequences(
2026-01-28T09:24:33.6003998Z         self,
2026-01-28T09:24:33.6004148Z         client,
2026-01-28T09:24:33.6004303Z         embedder_name,
2026-01-28T09:24:33.6004473Z         seq_id,
2026-01-28T09:24:33.6004617Z     ):
2026-01-28T09:24:33.6004886Z         """Test embedding sequences at length boundaries from canonical dataset."""
2026-01-28T09:24:33.6005253Z         sequence = get_sequence_by_id(seq_id)
2026-01-28T09:24:33.6005490Z         request_data = {
2026-01-28T09:24:33.6005769Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6006192Z             "reduce": True,
2026-01-28T09:24:33.6006562Z             "sequence_data": {seq_id: sequence},
2026-01-28T09:24:33.6006996Z             "use_half_precision": False,
2026-01-28T09:24:33.6007320Z         }
2026-01-28T09:24:33.6007460Z     
2026-01-28T09:24:33.6007718Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.6008049Z     
2026-01-28T09:24:33.6008215Z >       assert response.status_code == 200
2026-01-28T09:24:33.6008452Z E       assert 404 == 200
2026-01-28T09:24:33.6008679Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6008886Z 
2026-01-28T09:24:33.6009057Z tests/integration/endpoints/test_embed_flow.py:201: AssertionError
2026-01-28T09:24:33.6009462Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6010019Z 2026-01-28 09:24:32,758 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6010563Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6011126Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6011740Z __ TestEmbedEndpoint.test_embed_length_edge_case_sequences[length_medium_50] ___
2026-01-28T09:24:33.6012190Z 
2026-01-28T09:24:33.6012487Z self = <endpoints.test_embed_flow.TestEmbedEndpoint object at 0x7f7cb5ad2270>
2026-01-28T09:24:33.6012881Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6013226Z embedder_name = 'facebook/esm2_t6_8M_UR50D', seq_id = 'length_medium_50'
2026-01-28T09:24:33.6013489Z 
2026-01-28T09:24:33.6013570Z     @pytest.mark.integration
2026-01-28T09:24:33.6014020Z     @pytest.mark.parametrize("seq_id", CANONICAL_LENGTH_EDGE_IDS, ids=lambda x: x)
2026-01-28T09:24:33.6014406Z     def test_embed_length_edge_case_sequences(
2026-01-28T09:24:33.6014639Z         self,
2026-01-28T09:24:33.6014787Z         client,
2026-01-28T09:24:33.6014948Z         embedder_name,
2026-01-28T09:24:33.6015190Z         seq_id,
2026-01-28T09:24:33.6015470Z     ):
2026-01-28T09:24:33.6015953Z         """Test embedding sequences at length boundaries from canonical dataset."""
2026-01-28T09:24:33.6016616Z         sequence = get_sequence_by_id(seq_id)
2026-01-28T09:24:33.6016938Z         request_data = {
2026-01-28T09:24:33.6017136Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6017372Z             "reduce": True,
2026-01-28T09:24:33.6017580Z             "sequence_data": {seq_id: sequence},
2026-01-28T09:24:33.6017832Z             "use_half_precision": False,
2026-01-28T09:24:33.6018046Z         }
2026-01-28T09:24:33.6018188Z     
2026-01-28T09:24:33.6018444Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.6018773Z     
2026-01-28T09:24:33.6018941Z >       assert response.status_code == 200
2026-01-28T09:24:33.6019172Z E       assert 404 == 200
2026-01-28T09:24:33.6019407Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6019612Z 
2026-01-28T09:24:33.6019777Z tests/integration/endpoints/test_embed_flow.py:201: AssertionError
2026-01-28T09:24:33.6020182Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6020744Z 2026-01-28 09:24:32,765 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6021294Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6021859Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6022698Z ___ TestEmbedEndpoint.test_embed_length_edge_case_sequences[length_long_200] ___
2026-01-28T09:24:33.6023061Z 
2026-01-28T09:24:33.6023420Z self = <endpoints.test_embed_flow.TestEmbedEndpoint object at 0x7f7cb5ad23c0>
2026-01-28T09:24:33.6024110Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6024674Z embedder_name = 'facebook/esm2_t6_8M_UR50D', seq_id = 'length_long_200'
2026-01-28T09:24:33.6024938Z 
2026-01-28T09:24:33.6025026Z     @pytest.mark.integration
2026-01-28T09:24:33.6025359Z     @pytest.mark.parametrize("seq_id", CANONICAL_LENGTH_EDGE_IDS, ids=lambda x: x)
2026-01-28T09:24:33.6025754Z     def test_embed_length_edge_case_sequences(
2026-01-28T09:24:33.6025986Z         self,
2026-01-28T09:24:33.6026137Z         client,
2026-01-28T09:24:33.6026294Z         embedder_name,
2026-01-28T09:24:33.6026470Z         seq_id,
2026-01-28T09:24:33.6026620Z     ):
2026-01-28T09:24:33.6026886Z         """Test embedding sequences at length boundaries from canonical dataset."""
2026-01-28T09:24:33.6027257Z         sequence = get_sequence_by_id(seq_id)
2026-01-28T09:24:33.6027496Z         request_data = {
2026-01-28T09:24:33.6027698Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6027927Z             "reduce": True,
2026-01-28T09:24:33.6028142Z             "sequence_data": {seq_id: sequence},
2026-01-28T09:24:33.6028394Z             "use_half_precision": False,
2026-01-28T09:24:33.6028612Z         }
2026-01-28T09:24:33.6028757Z     
2026-01-28T09:24:33.6029009Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.6029340Z     
2026-01-28T09:24:33.6029646Z >       assert response.status_code == 200
2026-01-28T09:24:33.6029882Z E       assert 404 == 200
2026-01-28T09:24:33.6030113Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6030324Z 
2026-01-28T09:24:33.6030489Z tests/integration/endpoints/test_embed_flow.py:201: AssertionError
2026-01-28T09:24:33.6030890Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6031550Z 2026-01-28 09:24:32,773 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6032096Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6032795Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6033412Z __ TestEmbedEndpoint.test_embed_sequences_with_unknown_tokens[unknown_single] __
2026-01-28T09:24:33.6033711Z 
2026-01-28T09:24:33.6033899Z self = <endpoints.test_embed_flow.TestEmbedEndpoint object at 0x7f7cb5ad2930>
2026-01-28T09:24:33.6034292Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6034634Z embedder_name = 'facebook/esm2_t6_8M_UR50D', seq_id = 'unknown_single'
2026-01-28T09:24:33.6034883Z 
2026-01-28T09:24:33.6034963Z     @pytest.mark.integration
2026-01-28T09:24:33.6035305Z     @pytest.mark.parametrize("seq_id", CANONICAL_UNKNOWN_TOKEN_IDS, ids=lambda x: x)
2026-01-28T09:24:33.6035899Z     def test_embed_sequences_with_unknown_tokens(
2026-01-28T09:24:33.6036151Z         self,
2026-01-28T09:24:33.6036299Z         client,
2026-01-28T09:24:33.6036459Z         embedder_name,
2026-01-28T09:24:33.6036631Z         seq_id,
2026-01-28T09:24:33.6036778Z     ):
2026-01-28T09:24:33.6037052Z         """Test embedding sequences containing X residues from canonical dataset."""
2026-01-28T09:24:33.6037421Z         sequence = get_sequence_by_id(seq_id)
2026-01-28T09:24:33.6037661Z         request_data = {
2026-01-28T09:24:33.6037863Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6038097Z             "reduce": True,
2026-01-28T09:24:33.6038304Z             "sequence_data": {seq_id: sequence},
2026-01-28T09:24:33.6038554Z             "use_half_precision": False,
2026-01-28T09:24:33.6038770Z         }
2026-01-28T09:24:33.6038905Z     
2026-01-28T09:24:33.6039160Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.6039486Z     
2026-01-28T09:24:33.6039650Z >       assert response.status_code == 200
2026-01-28T09:24:33.6039880Z E       assert 404 == 200
2026-01-28T09:24:33.6040116Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6040321Z 
2026-01-28T09:24:33.6040484Z tests/integration/endpoints/test_embed_flow.py:223: AssertionError
2026-01-28T09:24:33.6040887Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6041440Z 2026-01-28 09:24:32,781 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6041985Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6042678Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6043296Z _ TestEmbedEndpoint.test_embed_sequences_with_unknown_tokens[unknown_multiple] _
2026-01-28T09:24:33.6043613Z 
2026-01-28T09:24:33.6043804Z self = <endpoints.test_embed_flow.TestEmbedEndpoint object at 0x7f7cb5ad3680>
2026-01-28T09:24:33.6044198Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6044546Z embedder_name = 'facebook/esm2_t6_8M_UR50D', seq_id = 'unknown_multiple'
2026-01-28T09:24:33.6044811Z 
2026-01-28T09:24:33.6044893Z     @pytest.mark.integration
2026-01-28T09:24:33.6045232Z     @pytest.mark.parametrize("seq_id", CANONICAL_UNKNOWN_TOKEN_IDS, ids=lambda x: x)
2026-01-28T09:24:33.6045639Z     def test_embed_sequences_with_unknown_tokens(
2026-01-28T09:24:33.6046019Z         self,
2026-01-28T09:24:33.6046171Z         client,
2026-01-28T09:24:33.6046338Z         embedder_name,
2026-01-28T09:24:33.6046506Z         seq_id,
2026-01-28T09:24:33.6046657Z     ):
2026-01-28T09:24:33.6046926Z         """Test embedding sequences containing X residues from canonical dataset."""
2026-01-28T09:24:33.6047302Z         sequence = get_sequence_by_id(seq_id)
2026-01-28T09:24:33.6047647Z         request_data = {
2026-01-28T09:24:33.6047852Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6048080Z             "reduce": True,
2026-01-28T09:24:33.6048293Z             "sequence_data": {seq_id: sequence},
2026-01-28T09:24:33.6048546Z             "use_half_precision": False,
2026-01-28T09:24:33.6048758Z         }
2026-01-28T09:24:33.6048900Z     
2026-01-28T09:24:33.6049153Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.6049484Z     
2026-01-28T09:24:33.6049645Z >       assert response.status_code == 200
2026-01-28T09:24:33.6049887Z E       assert 404 == 200
2026-01-28T09:24:33.6050124Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6050335Z 
2026-01-28T09:24:33.6050502Z tests/integration/endpoints/test_embed_flow.py:223: AssertionError
2026-01-28T09:24:33.6050909Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6051472Z 2026-01-28 09:24:32,788 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6052051Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6052733Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6053359Z __ TestEmbedEndpoint.test_embed_sequences_with_unknown_tokens[unknown_start] ___
2026-01-28T09:24:33.6053661Z 
2026-01-28T09:24:33.6053859Z self = <endpoints.test_embed_flow.TestEmbedEndpoint object at 0x7f7cb5ad3980>
2026-01-28T09:24:33.6054251Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6054599Z embedder_name = 'facebook/esm2_t6_8M_UR50D', seq_id = 'unknown_start'
2026-01-28T09:24:33.6054847Z 
2026-01-28T09:24:33.6054928Z     @pytest.mark.integration
2026-01-28T09:24:33.6055273Z     @pytest.mark.parametrize("seq_id", CANONICAL_UNKNOWN_TOKEN_IDS, ids=lambda x: x)
2026-01-28T09:24:33.6055680Z     def test_embed_sequences_with_unknown_tokens(
2026-01-28T09:24:33.6055926Z         self,
2026-01-28T09:24:33.6056083Z         client,
2026-01-28T09:24:33.6056243Z         embedder_name,
2026-01-28T09:24:33.6056418Z         seq_id,
2026-01-28T09:24:33.6056562Z     ):
2026-01-28T09:24:33.6056836Z         """Test embedding sequences containing X residues from canonical dataset."""
2026-01-28T09:24:33.6057210Z         sequence = get_sequence_by_id(seq_id)
2026-01-28T09:24:33.6057453Z         request_data = {
2026-01-28T09:24:33.6057653Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6057895Z             "reduce": True,
2026-01-28T09:24:33.6058110Z             "sequence_data": {seq_id: sequence},
2026-01-28T09:24:33.6058356Z             "use_half_precision": False,
2026-01-28T09:24:33.6058573Z         }
2026-01-28T09:24:33.6058718Z     
2026-01-28T09:24:33.6070286Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.6070661Z     
2026-01-28T09:24:33.6070862Z >       assert response.status_code == 200
2026-01-28T09:24:33.6071116Z E       assert 404 == 200
2026-01-28T09:24:33.6071367Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6071580Z 
2026-01-28T09:24:33.6071757Z tests/integration/endpoints/test_embed_flow.py:223: AssertionError
2026-01-28T09:24:33.6072193Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6072898Z 2026-01-28 09:24:32,795 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6074180Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6075051Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6075795Z ___ TestEmbedEndpoint.test_embed_sequences_with_unknown_tokens[unknown_end] ____
2026-01-28T09:24:33.6076326Z 
2026-01-28T09:24:33.6076702Z self = <endpoints.test_embed_flow.TestEmbedEndpoint object at 0x7f7cb5ad3ad0>
2026-01-28T09:24:33.6077638Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6078240Z embedder_name = 'facebook/esm2_t6_8M_UR50D', seq_id = 'unknown_end'
2026-01-28T09:24:33.6078691Z 
2026-01-28T09:24:33.6078782Z     @pytest.mark.integration
2026-01-28T09:24:33.6079138Z     @pytest.mark.parametrize("seq_id", CANONICAL_UNKNOWN_TOKEN_IDS, ids=lambda x: x)
2026-01-28T09:24:33.6079549Z     def test_embed_sequences_with_unknown_tokens(
2026-01-28T09:24:33.6079801Z         self,
2026-01-28T09:24:33.6079951Z         client,
2026-01-28T09:24:33.6080123Z         embedder_name,
2026-01-28T09:24:33.6080331Z         seq_id,
2026-01-28T09:24:33.6080487Z     ):
2026-01-28T09:24:33.6080762Z         """Test embedding sequences containing X residues from canonical dataset."""
2026-01-28T09:24:33.6081141Z         sequence = get_sequence_by_id(seq_id)
2026-01-28T09:24:33.6081381Z         request_data = {
2026-01-28T09:24:33.6081742Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6082161Z             "reduce": True,
2026-01-28T09:24:33.6082697Z             "sequence_data": {seq_id: sequence},
2026-01-28T09:24:33.6083061Z             "use_half_precision": False,
2026-01-28T09:24:33.6083283Z         }
2026-01-28T09:24:33.6083428Z     
2026-01-28T09:24:33.6083685Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.6084017Z     
2026-01-28T09:24:33.6084180Z >       assert response.status_code == 200
2026-01-28T09:24:33.6084424Z E       assert 404 == 200
2026-01-28T09:24:33.6084670Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6084884Z 
2026-01-28T09:24:33.6085054Z tests/integration/endpoints/test_embed_flow.py:223: AssertionError
2026-01-28T09:24:33.6085463Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6086024Z 2026-01-28 09:24:32,803 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6086580Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6087142Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6087757Z __ TestEmbedEndpoint.test_embed_sequences_with_unknown_tokens[unknown_middle] __
2026-01-28T09:24:33.6088055Z 
2026-01-28T09:24:33.6088251Z self = <endpoints.test_embed_flow.TestEmbedEndpoint object at 0x7f7cb5ad3c20>
2026-01-28T09:24:33.6088631Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6088979Z embedder_name = 'facebook/esm2_t6_8M_UR50D', seq_id = 'unknown_middle'
2026-01-28T09:24:33.6089231Z 
2026-01-28T09:24:33.6089315Z     @pytest.mark.integration
2026-01-28T09:24:33.6089663Z     @pytest.mark.parametrize("seq_id", CANONICAL_UNKNOWN_TOKEN_IDS, ids=lambda x: x)
2026-01-28T09:24:33.6090068Z     def test_embed_sequences_with_unknown_tokens(
2026-01-28T09:24:33.6090314Z         self,
2026-01-28T09:24:33.6090467Z         client,
2026-01-28T09:24:33.6090620Z         embedder_name,
2026-01-28T09:24:33.6090792Z         seq_id,
2026-01-28T09:24:33.6090937Z     ):
2026-01-28T09:24:33.6091211Z         """Test embedding sequences containing X residues from canonical dataset."""
2026-01-28T09:24:33.6091578Z         sequence = get_sequence_by_id(seq_id)
2026-01-28T09:24:33.6091822Z         request_data = {
2026-01-28T09:24:33.6092027Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6092264Z             "reduce": True,
2026-01-28T09:24:33.6092863Z             "sequence_data": {seq_id: sequence},
2026-01-28T09:24:33.6093115Z             "use_half_precision": False,
2026-01-28T09:24:33.6093336Z         }
2026-01-28T09:24:33.6093473Z     
2026-01-28T09:24:33.6093732Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.6094053Z     
2026-01-28T09:24:33.6094219Z >       assert response.status_code == 200
2026-01-28T09:24:33.6094571Z E       assert 404 == 200
2026-01-28T09:24:33.6094814Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6095021Z 
2026-01-28T09:24:33.6095192Z tests/integration/endpoints/test_embed_flow.py:223: AssertionError
2026-01-28T09:24:33.6095590Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6096158Z 2026-01-28 09:24:32,811 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6096699Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6097265Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6097890Z _ TestEmbedEndpoint.test_embed_sequences_with_unknown_tokens[unknown_scattered] _
2026-01-28T09:24:33.6098194Z 
2026-01-28T09:24:33.6098382Z self = <endpoints.test_embed_flow.TestEmbedEndpoint object at 0x7f7cb5ad3d10>
2026-01-28T09:24:33.6098773Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6099121Z embedder_name = 'facebook/esm2_t6_8M_UR50D', seq_id = 'unknown_scattered'
2026-01-28T09:24:33.6099386Z 
2026-01-28T09:24:33.6099467Z     @pytest.mark.integration
2026-01-28T09:24:33.6099814Z     @pytest.mark.parametrize("seq_id", CANONICAL_UNKNOWN_TOKEN_IDS, ids=lambda x: x)
2026-01-28T09:24:33.6100215Z     def test_embed_sequences_with_unknown_tokens(
2026-01-28T09:24:33.6100460Z         self,
2026-01-28T09:24:33.6100606Z         client,
2026-01-28T09:24:33.6100768Z         embedder_name,
2026-01-28T09:24:33.6100941Z         seq_id,
2026-01-28T09:24:33.6101094Z     ):
2026-01-28T09:24:33.6101360Z         """Test embedding sequences containing X residues from canonical dataset."""
2026-01-28T09:24:33.6101732Z         sequence = get_sequence_by_id(seq_id)
2026-01-28T09:24:33.6101968Z         request_data = {
2026-01-28T09:24:33.6102184Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6102662Z             "reduce": True,
2026-01-28T09:24:33.6102958Z             "sequence_data": {seq_id: sequence},
2026-01-28T09:24:33.6103220Z             "use_half_precision": False,
2026-01-28T09:24:33.6103437Z         }
2026-01-28T09:24:33.6103579Z     
2026-01-28T09:24:33.6103832Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.6104167Z     
2026-01-28T09:24:33.6104330Z >       assert response.status_code == 200
2026-01-28T09:24:33.6104573Z E       assert 404 == 200
2026-01-28T09:24:33.6104814Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6105027Z 
2026-01-28T09:24:33.6105195Z tests/integration/endpoints/test_embed_flow.py:223: AssertionError
2026-01-28T09:24:33.6105605Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6106162Z 2026-01-28 09:24:32,818 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6106717Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6107284Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6107911Z _ TestEmbedEndpoint.test_embed_sequences_with_unknown_tokens[unknown_high_ratio] _
2026-01-28T09:24:33.6108222Z 
2026-01-28T09:24:33.6108417Z self = <endpoints.test_embed_flow.TestEmbedEndpoint object at 0x7f7cb5ad3dd0>
2026-01-28T09:24:33.6108801Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6109156Z embedder_name = 'facebook/esm2_t6_8M_UR50D', seq_id = 'unknown_high_ratio'
2026-01-28T09:24:33.6109563Z 
2026-01-28T09:24:33.6109651Z     @pytest.mark.integration
2026-01-28T09:24:33.6109991Z     @pytest.mark.parametrize("seq_id", CANONICAL_UNKNOWN_TOKEN_IDS, ids=lambda x: x)
2026-01-28T09:24:33.6110394Z     def test_embed_sequences_with_unknown_tokens(
2026-01-28T09:24:33.6110638Z         self,
2026-01-28T09:24:33.6110897Z         client,
2026-01-28T09:24:33.6111057Z         embedder_name,
2026-01-28T09:24:33.6111230Z         seq_id,
2026-01-28T09:24:33.6111377Z     ):
2026-01-28T09:24:33.6111654Z         """Test embedding sequences containing X residues from canonical dataset."""
2026-01-28T09:24:33.6112033Z         sequence = get_sequence_by_id(seq_id)
2026-01-28T09:24:33.6112272Z         request_data = {
2026-01-28T09:24:33.6112693Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6112935Z             "reduce": True,
2026-01-28T09:24:33.6113158Z             "sequence_data": {seq_id: sequence},
2026-01-28T09:24:33.6113418Z             "use_half_precision": False,
2026-01-28T09:24:33.6113637Z         }
2026-01-28T09:24:33.6113777Z     
2026-01-28T09:24:33.6114035Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.6114361Z     
2026-01-28T09:24:33.6114529Z >       assert response.status_code == 200
2026-01-28T09:24:33.6114765Z E       assert 404 == 200
2026-01-28T09:24:33.6115005Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6115213Z 
2026-01-28T09:24:33.6115475Z tests/integration/endpoints/test_embed_flow.py:223: AssertionError
2026-01-28T09:24:33.6115939Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6116515Z 2026-01-28 09:24:32,826 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6117081Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6117658Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6118280Z ___ TestEmbedEndpoint.test_embed_sequences_with_ambiguous_codes[ambiguous_B] ___
2026-01-28T09:24:33.6118581Z 
2026-01-28T09:24:33.6118847Z self = <endpoints.test_embed_flow.TestEmbedEndpoint object at 0x7f7cb5ab00e0>
2026-01-28T09:24:33.6119548Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6120165Z embedder_name = 'facebook/esm2_t6_8M_UR50D', seq_id = 'ambiguous_B'
2026-01-28T09:24:33.6120622Z 
2026-01-28T09:24:33.6120762Z     @pytest.mark.integration
2026-01-28T09:24:33.6121331Z     @pytest.mark.parametrize("seq_id", CANONICAL_AMBIGUOUS_CODE_IDS, ids=lambda x: x)
2026-01-28T09:24:33.6121753Z     def test_embed_sequences_with_ambiguous_codes(
2026-01-28T09:24:33.6122006Z         self,
2026-01-28T09:24:33.6122160Z         client,
2026-01-28T09:24:33.6122321Z         embedder_name,
2026-01-28T09:24:33.6122692Z         seq_id,
2026-01-28T09:24:33.6122850Z     ):
2026-01-28T09:24:33.6123164Z         """Test embedding sequences with ambiguous amino acid codes from canonical dataset."""
2026-01-28T09:24:33.6123573Z         sequence = get_sequence_by_id(seq_id)
2026-01-28T09:24:33.6123814Z         request_data = {
2026-01-28T09:24:33.6124148Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6124581Z             "reduce": True,
2026-01-28T09:24:33.6124906Z             "sequence_data": {seq_id: sequence},
2026-01-28T09:24:33.6125163Z             "use_half_precision": False,
2026-01-28T09:24:33.6125386Z         }
2026-01-28T09:24:33.6125524Z     
2026-01-28T09:24:33.6125782Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.6126108Z     
2026-01-28T09:24:33.6126273Z >       assert response.status_code == 200
2026-01-28T09:24:33.6126504Z E       assert 404 == 200
2026-01-28T09:24:33.6126744Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6126949Z 
2026-01-28T09:24:33.6127270Z tests/integration/endpoints/test_embed_flow.py:245: AssertionError
2026-01-28T09:24:33.6127967Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6128683Z 2026-01-28 09:24:32,833 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6129237Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6129971Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6130596Z ___ TestEmbedEndpoint.test_embed_sequences_with_ambiguous_codes[ambiguous_Z] ___
2026-01-28T09:24:33.6130907Z 
2026-01-28T09:24:33.6131264Z self = <endpoints.test_embed_flow.TestEmbedEndpoint object at 0x7f7cb5ab1f70>
2026-01-28T09:24:33.6131988Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6132343Z embedder_name = 'facebook/esm2_t6_8M_UR50D', seq_id = 'ambiguous_Z'
2026-01-28T09:24:33.6132824Z 
2026-01-28T09:24:33.6132913Z     @pytest.mark.integration
2026-01-28T09:24:33.6133263Z     @pytest.mark.parametrize("seq_id", CANONICAL_AMBIGUOUS_CODE_IDS, ids=lambda x: x)
2026-01-28T09:24:33.6133679Z     def test_embed_sequences_with_ambiguous_codes(
2026-01-28T09:24:33.6133931Z         self,
2026-01-28T09:24:33.6134080Z         client,
2026-01-28T09:24:33.6134245Z         embedder_name,
2026-01-28T09:24:33.6134421Z         seq_id,
2026-01-28T09:24:33.6134574Z     ):
2026-01-28T09:24:33.6135098Z         """Test embedding sequences with ambiguous amino acid codes from canonical dataset."""
2026-01-28T09:24:33.6135807Z         sequence = get_sequence_by_id(seq_id)
2026-01-28T09:24:33.6136052Z         request_data = {
2026-01-28T09:24:33.6136259Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6136499Z             "reduce": True,
2026-01-28T09:24:33.6136710Z             "sequence_data": {seq_id: sequence},
2026-01-28T09:24:33.6136962Z             "use_half_precision": False,
2026-01-28T09:24:33.6137247Z         }
2026-01-28T09:24:33.6137390Z     
2026-01-28T09:24:33.6137644Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.6137975Z     
2026-01-28T09:24:33.6138134Z >       assert response.status_code == 200
2026-01-28T09:24:33.6138519Z E       assert 404 == 200
2026-01-28T09:24:33.6138937Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6139344Z 
2026-01-28T09:24:33.6139648Z tests/integration/endpoints/test_embed_flow.py:245: AssertionError
2026-01-28T09:24:33.6140330Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6140901Z 2026-01-28 09:24:32,841 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6141473Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6142049Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6143016Z ___ TestEmbedEndpoint.test_embed_sequences_with_ambiguous_codes[ambiguous_J] ___
2026-01-28T09:24:33.6143393Z 
2026-01-28T09:24:33.6143739Z self = <endpoints.test_embed_flow.TestEmbedEndpoint object at 0x7f7cb5ab2210>
2026-01-28T09:24:33.6144461Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6144844Z embedder_name = 'facebook/esm2_t6_8M_UR50D', seq_id = 'ambiguous_J'
2026-01-28T09:24:33.6145090Z 
2026-01-28T09:24:33.6145174Z     @pytest.mark.integration
2026-01-28T09:24:33.6145529Z     @pytest.mark.parametrize("seq_id", CANONICAL_AMBIGUOUS_CODE_IDS, ids=lambda x: x)
2026-01-28T09:24:33.6145946Z     def test_embed_sequences_with_ambiguous_codes(
2026-01-28T09:24:33.6146195Z         self,
2026-01-28T09:24:33.6146354Z         client,
2026-01-28T09:24:33.6146514Z         embedder_name,
2026-01-28T09:24:33.6146688Z         seq_id,
2026-01-28T09:24:33.6146833Z     ):
2026-01-28T09:24:33.6147306Z         """Test embedding sequences with ambiguous amino acid codes from canonical dataset."""
2026-01-28T09:24:33.6147712Z         sequence = get_sequence_by_id(seq_id)
2026-01-28T09:24:33.6147956Z         request_data = {
2026-01-28T09:24:33.6148225Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6148651Z             "reduce": True,
2026-01-28T09:24:33.6149044Z             "sequence_data": {seq_id: sequence},
2026-01-28T09:24:33.6149542Z             "use_half_precision": False,
2026-01-28T09:24:33.6149768Z         }
2026-01-28T09:24:33.6149906Z     
2026-01-28T09:24:33.6150166Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.6150492Z     
2026-01-28T09:24:33.6150663Z >       assert response.status_code == 200
2026-01-28T09:24:33.6150901Z E       assert 404 == 200
2026-01-28T09:24:33.6151138Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6151346Z 
2026-01-28T09:24:33.6151520Z tests/integration/endpoints/test_embed_flow.py:245: AssertionError
2026-01-28T09:24:33.6151943Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6152973Z 2026-01-28 09:24:32,848 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6153682Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6154280Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6154912Z _ TestEmbedEndpoint.test_embed_sequences_with_ambiguous_codes[selenocysteine] __
2026-01-28T09:24:33.6155218Z 
2026-01-28T09:24:33.6155411Z self = <endpoints.test_embed_flow.TestEmbedEndpoint object at 0x7f7cb5ab28d0>
2026-01-28T09:24:33.6155806Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6156357Z embedder_name = 'facebook/esm2_t6_8M_UR50D', seq_id = 'selenocysteine'
2026-01-28T09:24:33.6156823Z 
2026-01-28T09:24:33.6156922Z     @pytest.mark.integration
2026-01-28T09:24:33.6157282Z     @pytest.mark.parametrize("seq_id", CANONICAL_AMBIGUOUS_CODE_IDS, ids=lambda x: x)
2026-01-28T09:24:33.6157694Z     def test_embed_sequences_with_ambiguous_codes(
2026-01-28T09:24:33.6157945Z         self,
2026-01-28T09:24:33.6158096Z         client,
2026-01-28T09:24:33.6158263Z         embedder_name,
2026-01-28T09:24:33.6158431Z         seq_id,
2026-01-28T09:24:33.6158587Z     ):
2026-01-28T09:24:33.6158895Z         """Test embedding sequences with ambiguous amino acid codes from canonical dataset."""
2026-01-28T09:24:33.6159536Z         sequence = get_sequence_by_id(seq_id)
2026-01-28T09:24:33.6159988Z         request_data = {
2026-01-28T09:24:33.6160361Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6160719Z             "reduce": True,
2026-01-28T09:24:33.6160938Z             "sequence_data": {seq_id: sequence},
2026-01-28T09:24:33.6161200Z             "use_half_precision": False,
2026-01-28T09:24:33.6161426Z         }
2026-01-28T09:24:33.6161572Z     
2026-01-28T09:24:33.6161830Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.6162162Z     
2026-01-28T09:24:33.6162334Z >       assert response.status_code == 200
2026-01-28T09:24:33.6162689Z E       assert 404 == 200
2026-01-28T09:24:33.6162986Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6163370Z 
2026-01-28T09:24:33.6163676Z tests/integration/endpoints/test_embed_flow.py:245: AssertionError
2026-01-28T09:24:33.6164440Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6165228Z 2026-01-28 09:24:32,856 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6166157Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6166756Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6167583Z ___ TestEmbedEndpoint.test_embed_sequences_with_ambiguous_codes[pyrrolysine] ___
2026-01-28T09:24:33.6167989Z 
2026-01-28T09:24:33.6168346Z self = <endpoints.test_embed_flow.TestEmbedEndpoint object at 0x7f7cb5ab2ab0>
2026-01-28T09:24:33.6169085Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6169530Z embedder_name = 'facebook/esm2_t6_8M_UR50D', seq_id = 'pyrrolysine'
2026-01-28T09:24:33.6169937Z 
2026-01-28T09:24:33.6170032Z     @pytest.mark.integration
2026-01-28T09:24:33.6170388Z     @pytest.mark.parametrize("seq_id", CANONICAL_AMBIGUOUS_CODE_IDS, ids=lambda x: x)
2026-01-28T09:24:33.6170808Z     def test_embed_sequences_with_ambiguous_codes(
2026-01-28T09:24:33.6171062Z         self,
2026-01-28T09:24:33.6171220Z         client,
2026-01-28T09:24:33.6171386Z         embedder_name,
2026-01-28T09:24:33.6171562Z         seq_id,
2026-01-28T09:24:33.6171712Z     ):
2026-01-28T09:24:33.6172241Z         """Test embedding sequences with ambiguous amino acid codes from canonical dataset."""
2026-01-28T09:24:33.6173234Z         sequence = get_sequence_by_id(seq_id)
2026-01-28T09:24:33.6173691Z         request_data = {
2026-01-28T09:24:33.6174068Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6174493Z             "reduce": True,
2026-01-28T09:24:33.6174888Z             "sequence_data": {seq_id: sequence},
2026-01-28T09:24:33.6175248Z             "use_half_precision": False,
2026-01-28T09:24:33.6175477Z         }
2026-01-28T09:24:33.6175617Z     
2026-01-28T09:24:33.6175888Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.6176241Z     
2026-01-28T09:24:33.6176408Z >       assert response.status_code == 200
2026-01-28T09:24:33.6176652Z E       assert 404 == 200
2026-01-28T09:24:33.6176894Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6177110Z 
2026-01-28T09:24:33.6177281Z tests/integration/endpoints/test_embed_flow.py:245: AssertionError
2026-01-28T09:24:33.6177700Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6178758Z 2026-01-28 09:24:32,863 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6179574Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6180152Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6180810Z ____________ TestEmbedEndpoint.test_embed_empty_sequences_rejected _____________
2026-01-28T09:24:33.6181097Z 
2026-01-28T09:24:33.6181291Z self = <endpoints.test_embed_flow.TestEmbedEndpoint object at 0x7f7cb5ab2e70>
2026-01-28T09:24:33.6181684Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6181962Z embedder_name = 'facebook/esm2_t6_8M_UR50D'
2026-01-28T09:24:33.6182292Z 
2026-01-28T09:24:33.6182603Z     @pytest.mark.integration
2026-01-28T09:24:33.6182966Z     def test_embed_empty_sequences_rejected(
2026-01-28T09:24:33.6183206Z         self,
2026-01-28T09:24:33.6183362Z         client,
2026-01-28T09:24:33.6183526Z         embedder_name,
2026-01-28T09:24:33.6183706Z     ):
2026-01-28T09:24:33.6183950Z         """Test that empty sequence data is rejected with proper error."""
2026-01-28T09:24:33.6184300Z         request_data = {
2026-01-28T09:24:33.6184512Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6184743Z             "reduce": False,
2026-01-28T09:24:33.6185007Z             "sequence_data": {},  # Empty - should fail validation
2026-01-28T09:24:33.6185459Z             "use_half_precision": False,
2026-01-28T09:24:33.6185838Z         }
2026-01-28T09:24:33.6186078Z     
2026-01-28T09:24:33.6186541Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.6187159Z     
2026-01-28T09:24:33.6187457Z >       assert response.status_code == 422
2026-01-28T09:24:33.6187888Z E       assert 404 == 422
2026-01-28T09:24:33.6188372Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6188587Z 
2026-01-28T09:24:33.6188763Z tests/integration/endpoints/test_embed_flow.py:264: AssertionError
2026-01-28T09:24:33.6189180Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6189763Z 2026-01-28 09:24:32,871 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6190476Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6191555Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6192882Z _________ TestEmbedEndpoint.test_embed_missing_embedder_name_rejected __________
2026-01-28T09:24:33.6193428Z 
2026-01-28T09:24:33.6193776Z self = <endpoints.test_embed_flow.TestEmbedEndpoint object at 0x7f7cb5ab3260>
2026-01-28T09:24:33.6194491Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6195137Z short_test_sequences = {'short_1': 'MKTAYIAKQR', 'short_2': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLS'}
2026-01-28T09:24:33.6195559Z 
2026-01-28T09:24:33.6195645Z     @pytest.mark.integration
2026-01-28T09:24:33.6195893Z     def test_embed_missing_embedder_name_rejected(
2026-01-28T09:24:33.6196143Z         self,
2026-01-28T09:24:33.6196306Z         client,
2026-01-28T09:24:33.6196472Z         short_test_sequences,
2026-01-28T09:24:33.6196667Z     ):
2026-01-28T09:24:33.6196913Z         """Test that missing embedder name is rejected with proper error."""
2026-01-28T09:24:33.6197242Z         request_data = {
2026-01-28T09:24:33.6197514Z             # Missing embedder_name
2026-01-28T09:24:33.6197930Z             "reduce": False,
2026-01-28T09:24:33.6198329Z             "sequence_data": short_test_sequences,
2026-01-28T09:24:33.6198598Z             "use_half_precision": False,
2026-01-28T09:24:33.6198819Z         }
2026-01-28T09:24:33.6198963Z     
2026-01-28T09:24:33.6199223Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.6199550Z     
2026-01-28T09:24:33.6199715Z >       assert response.status_code == 422
2026-01-28T09:24:33.6199954Z E       assert 404 == 422
2026-01-28T09:24:33.6200189Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6200399Z 
2026-01-28T09:24:33.6200575Z tests/integration/endpoints/test_embed_flow.py:283: AssertionError
2026-01-28T09:24:33.6201245Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6201926Z 2026-01-28 09:24:32,878 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6202679Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6203259Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6204082Z __ TestGetMissingEmbeddingsEndpoint.test_get_missing_embeddings_new_sequences __
2026-01-28T09:24:33.6204660Z 
2026-01-28T09:24:33.6205120Z self = <endpoints.test_embed_flow.TestGetMissingEmbeddingsEndpoint object at 0x7f7cb5ab3890>
2026-01-28T09:24:33.6205729Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6206082Z embedder_name = 'facebook/esm2_t6_8M_UR50D', test_run_id = '8124d9cb'
2026-01-28T09:24:33.6206402Z 
2026-01-28T09:24:33.6206546Z     @pytest.mark.integration
2026-01-28T09:24:33.6206980Z     def test_get_missing_embeddings_new_sequences(
2026-01-28T09:24:33.6207429Z         self,
2026-01-28T09:24:33.6207701Z         client,
2026-01-28T09:24:33.6207983Z         embedder_name,
2026-01-28T09:24:33.6208298Z         test_run_id,
2026-01-28T09:24:33.6208582Z     ):
2026-01-28T09:24:33.6208988Z         """Test identifying missing embeddings for new sequences."""
2026-01-28T09:24:33.6209533Z         import json
2026-01-28T09:24:33.6209800Z     
2026-01-28T09:24:33.6210244Z         # Use unique sequence IDs that won't exist in the database (canonical dataset)
2026-01-28T09:24:33.6210639Z         unique_sequences = {
2026-01-28T09:24:33.6210989Z             f"test_{test_run_id}_1": CANONICAL_TEST_DATASET.get_by_id("standard_001").sequence,
2026-01-28T09:24:33.6211487Z             f"test_{test_run_id}_2": CANONICAL_TEST_DATASET.get_by_id("standard_002").sequence,
2026-01-28T09:24:33.6211958Z         }
2026-01-28T09:24:33.6212101Z     
2026-01-28T09:24:33.6212254Z         request_data = {
2026-01-28T09:24:33.6212783Z             "sequences": json.dumps(unique_sequences),
2026-01-28T09:24:33.6213286Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6213600Z             "reduced": False,
2026-01-28T09:24:33.6213791Z         }
2026-01-28T09:24:33.6213933Z     
2026-01-28T09:24:33.6214086Z         response = client.post(
2026-01-28T09:24:33.6214403Z             "/embeddings_service/get_missing_embeddings", json=request_data
2026-01-28T09:24:33.6214731Z         )
2026-01-28T09:24:33.6214871Z     
2026-01-28T09:24:33.6215086Z >       assert response.status_code == 200
2026-01-28T09:24:33.6215555Z E       assert 404 == 200
2026-01-28T09:24:33.6215978Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6216348Z 
2026-01-28T09:24:33.6216642Z tests/integration/endpoints/test_embed_flow.py:319: AssertionError
2026-01-28T09:24:33.6217402Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6218328Z 2026-01-28 09:24:32,886 INFO HTTP Request: POST http://localhost:9540/embeddings_service/get_missing_embeddings "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6218981Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6219608Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/get_missing_embeddings "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6220280Z ______________ TestEmbedTaskLifecycle.test_task_id_is_valid_uuid _______________
2026-01-28T09:24:33.6220578Z 
2026-01-28T09:24:33.6220804Z self = <endpoints.test_embed_flow.TestEmbedTaskLifecycle object at 0x7f7cb5ab34a0>
2026-01-28T09:24:33.6221219Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6221495Z embedder_name = 'facebook/esm2_t6_8M_UR50D'
2026-01-28T09:24:33.6221976Z short_test_sequences = {'short_1': 'MKTAYIAKQR', 'short_2': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLS'}
2026-01-28T09:24:33.6222621Z 
2026-01-28T09:24:33.6222716Z     @pytest.mark.integration
2026-01-28T09:24:33.6223156Z     def test_task_id_is_valid_uuid(
2026-01-28T09:24:33.6223549Z         self,
2026-01-28T09:24:33.6223842Z         client,
2026-01-28T09:24:33.6224132Z         embedder_name,
2026-01-28T09:24:33.6224465Z         short_test_sequences,
2026-01-28T09:24:33.6224798Z     ):
2026-01-28T09:24:33.6225101Z         """Test that task IDs are valid."""
2026-01-28T09:24:33.6225520Z         request_data = {
2026-01-28T09:24:33.6225892Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6226315Z             "reduce": True,
2026-01-28T09:24:33.6226707Z             "sequence_data": short_test_sequences,
2026-01-28T09:24:33.6227172Z             "use_half_precision": False,
2026-01-28T09:24:33.6227585Z         }
2026-01-28T09:24:33.6227851Z     
2026-01-28T09:24:33.6228220Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.6228573Z     
2026-01-28T09:24:33.6228746Z >       assert response.status_code == 200
2026-01-28T09:24:33.6228989Z E       assert 404 == 200
2026-01-28T09:24:33.6229227Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6229445Z 
2026-01-28T09:24:33.6229613Z tests/integration/endpoints/test_embed_flow.py:348: AssertionError
2026-01-28T09:24:33.6230026Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6230602Z 2026-01-28 09:24:32,894 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6231701Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6232294Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6233072Z __________ TestEmbedTaskLifecycle.test_multiple_tasks_get_unique_ids ___________
2026-01-28T09:24:33.6233522Z 
2026-01-28T09:24:33.6233842Z self = <endpoints.test_embed_flow.TestEmbedTaskLifecycle object at 0x7f7cb5ab2c30>
2026-01-28T09:24:33.6234573Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6235089Z embedder_name = 'facebook/esm2_t6_8M_UR50D'
2026-01-28T09:24:33.6235986Z short_test_sequences = {'short_1': 'MKTAYIAKQR', 'short_2': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLS'}
2026-01-28T09:24:33.6236436Z 
2026-01-28T09:24:33.6236522Z     @pytest.mark.integration
2026-01-28T09:24:33.6236751Z     def test_multiple_tasks_get_unique_ids(
2026-01-28T09:24:33.6236996Z         self,
2026-01-28T09:24:33.6237152Z         client,
2026-01-28T09:24:33.6237314Z         embedder_name,
2026-01-28T09:24:33.6237502Z         short_test_sequences,
2026-01-28T09:24:33.6237689Z     ):
2026-01-28T09:24:33.6237909Z         """Test that multiple task submissions get unique IDs."""
2026-01-28T09:24:33.6238201Z         task_ids = set()
2026-01-28T09:24:33.6238381Z     
2026-01-28T09:24:33.6238535Z         for i in range(3):
2026-01-28T09:24:33.6238802Z             request_data = {
2026-01-28T09:24:33.6239179Z                 "embedder_name": embedder_name,
2026-01-28T09:24:33.6239616Z                 "reduce": True,
2026-01-28T09:24:33.6240020Z                 "sequence_data": short_test_sequences,
2026-01-28T09:24:33.6240493Z                 "use_half_precision": False,
2026-01-28T09:24:33.6240902Z             }
2026-01-28T09:24:33.6241158Z     
2026-01-28T09:24:33.6241631Z             response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.6242325Z >           assert response.status_code == 200
2026-01-28T09:24:33.6242924Z E           assert 404 == 200
2026-01-28T09:24:33.6243380Z E            +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6243392Z 
2026-01-28T09:24:33.6243633Z tests/integration/endpoints/test_embed_flow.py:374: AssertionError
2026-01-28T09:24:33.6243801Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6244134Z 2026-01-28 09:24:32,902 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6244299Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6244627Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6244816Z _______________ TestEmbedTaskLifecycle.test_task_status_endpoint _______________
2026-01-28T09:24:33.6244822Z 
2026-01-28T09:24:33.6245041Z self = <endpoints.test_embed_flow.TestEmbedTaskLifecycle object at 0x7f7cb59c02f0>
2026-01-28T09:24:33.6245154Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6245244Z embedder_name = 'facebook/esm2_t6_8M_UR50D'
2026-01-28T09:24:33.6245647Z single_test_sequence = {'test_seq': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLSGAEKAVQVKVKALPDAQFEVVHSLAKWKRQ'}
2026-01-28T09:24:33.6245653Z 
2026-01-28T09:24:33.6245845Z     @pytest.mark.integration
2026-01-28T09:24:33.6245989Z     def test_task_status_endpoint(
2026-01-28T09:24:33.6246102Z         self,
2026-01-28T09:24:33.6246208Z         client,
2026-01-28T09:24:33.6246328Z         embedder_name,
2026-01-28T09:24:33.6246457Z         single_test_sequence,
2026-01-28T09:24:33.6246576Z     ):
2026-01-28T09:24:33.6246767Z         """Test that task status can be retrieved."""
2026-01-28T09:24:33.6246902Z         request_data = {
2026-01-28T09:24:33.6247017Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6247089Z             "reduce": True,
2026-01-28T09:24:33.6247354Z             "sequence_data": single_test_sequence,
2026-01-28T09:24:33.6247438Z             "use_half_precision": False,
2026-01-28T09:24:33.6247504Z         }
2026-01-28T09:24:33.6247561Z     
2026-01-28T09:24:33.6247626Z         # Create task
2026-01-28T09:24:33.6247820Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.6247909Z >       assert response.status_code == 200
2026-01-28T09:24:33.6248085Z E       assert 404 == 200
2026-01-28T09:24:33.6248216Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6248222Z 
2026-01-28T09:24:33.6248396Z tests/integration/endpoints/test_embed_flow.py:399: AssertionError
2026-01-28T09:24:33.6248556Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6248877Z 2026-01-28 09:24:32,909 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6249030Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6249356Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6249549Z ___________ TestEndToEndEmbedFlow.test_embed_and_wait_for_completion ___________
2026-01-28T09:24:33.6249560Z 
2026-01-28T09:24:33.6249765Z self = <endpoints.test_embed_flow.TestEndToEndEmbedFlow object at 0x7f7cb59c00b0>
2026-01-28T09:24:33.6249930Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6250190Z poll_task = <function poll_task.<locals>._poll at 0x7f7b0b5d8d60>
2026-01-28T09:24:33.6250357Z embedder_name = 'facebook/esm2_t6_8M_UR50D'
2026-01-28T09:24:33.6251569Z test_sequences = {'protein_1': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLSGAEKAVQVKVKALPDAQFEVVHSLAKWKRQ', 'protein_2': 'MKKLVLS...KISDNLKAKIYAMHYVDVFYNKS', 'protein_3': 'MVHLTPEEKSAVTALWGKVNVDEVGGEALGRLLVVYPWTQRFFESFGDLSTPDAVMGNPKVKAHGKKVLGAFSDGLA'}
2026-01-28T09:24:33.6251587Z 
2026-01-28T09:24:33.6251682Z     @pytest.mark.integration
2026-01-28T09:24:33.6251772Z     def test_embed_and_wait_for_completion(
2026-01-28T09:24:33.6251833Z         self,
2026-01-28T09:24:33.6251893Z         client,
2026-01-28T09:24:33.6251963Z         poll_task,
2026-01-28T09:24:33.6252030Z         embedder_name,
2026-01-28T09:24:33.6252097Z         test_sequences,
2026-01-28T09:24:33.6252166Z     ):
2026-01-28T09:24:33.6252329Z         """Test complete embedding flow from request to completion."""
2026-01-28T09:24:33.6252533Z         request_data = {
2026-01-28T09:24:33.6252618Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6252692Z             "reduce": True,
2026-01-28T09:24:33.6252778Z             "sequence_data": test_sequences,
2026-01-28T09:24:33.6252857Z             "use_half_precision": False,
2026-01-28T09:24:33.6252927Z         }
2026-01-28T09:24:33.6252984Z     
2026-01-28T09:24:33.6253058Z         # Submit embedding task
2026-01-28T09:24:33.6253240Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.6253336Z >       assert response.status_code == 200
2026-01-28T09:24:33.6253406Z E       assert 404 == 200
2026-01-28T09:24:33.6253527Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6253532Z 
2026-01-28T09:24:33.6253703Z tests/integration/endpoints/test_embed_flow.py:433: AssertionError
2026-01-28T09:24:33.6253862Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6254169Z 2026-01-28 09:24:32,916 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6254321Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6254638Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6254824Z ______________ TestEndToEndEmbedFlow.test_embed_diverse_sequences ______________
2026-01-28T09:24:33.6254970Z 
2026-01-28T09:24:33.6255313Z self = <endpoints.test_embed_flow.TestEndToEndEmbedFlow object at 0x7f7cb59c05f0>
2026-01-28T09:24:33.6255496Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6255756Z poll_task = <function poll_task.<locals>._poll at 0x7f7b0b5d8d60>
2026-01-28T09:24:33.6255923Z embedder_name = 'facebook/esm2_t6_8M_UR50D'
2026-01-28T09:24:33.6257210Z diverse_test_sequences = {'all_standard_aa': 'ACDEFGHIKLMNPQRSTVWY', 'alpha_helix': 'AEEAAKAAEEAAKAAEEAAKAAEEAAK', 'gfp_core': 'SKGEELFTGVVPILVELDGDVNGHKFSVSGEGEGDATYGKLTLKFICTTGKLPVPWPTLVTTFSYGVQCFSRYPDHMK', 'insulin_b': 'FVNQHLCGSHLVEALYLVCGERGFFYTPKT', ...}
2026-01-28T09:24:33.6257224Z 
2026-01-28T09:24:33.6257313Z     @pytest.mark.integration
2026-01-28T09:24:33.6257392Z     @pytest.mark.slow
2026-01-28T09:24:33.6257484Z     def test_embed_diverse_sequences(
2026-01-28T09:24:33.6257545Z         self,
2026-01-28T09:24:33.6257609Z         client,
2026-01-28T09:24:33.6257685Z         poll_task,
2026-01-28T09:24:33.6257755Z         embedder_name,
2026-01-28T09:24:33.6257831Z         diverse_test_sequences,
2026-01-28T09:24:33.6257896Z     ):
2026-01-28T09:24:33.6258056Z         """Test embedding diverse sequences from canonical dataset."""
2026-01-28T09:24:33.6258127Z         request_data = {
2026-01-28T09:24:33.6258211Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6258293Z             "reduce": True,
2026-01-28T09:24:33.6258395Z             "sequence_data": diverse_test_sequences,
2026-01-28T09:24:33.6258479Z             "use_half_precision": False,
2026-01-28T09:24:33.6258544Z         }
2026-01-28T09:24:33.6258602Z     
2026-01-28T09:24:33.6258792Z         response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.6258886Z >       assert response.status_code == 200
2026-01-28T09:24:33.6258956Z E       assert 404 == 200
2026-01-28T09:24:33.6259079Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6259090Z 
2026-01-28T09:24:33.6259259Z tests/integration/endpoints/test_embed_flow.py:461: AssertionError
2026-01-28T09:24:33.6259427Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6259752Z 2026-01-28 09:24:32,924 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6259905Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6260237Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6260433Z __________ TestEndToEndEmbedFlow.test_embed_with_different_embedders ___________
2026-01-28T09:24:33.6260438Z 
2026-01-28T09:24:33.6260644Z self = <endpoints.test_embed_flow.TestEndToEndEmbedFlow object at 0x7f7cb59c09b0>
2026-01-28T09:24:33.6260754Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6261153Z single_test_sequence = {'test_seq': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLSGAEKAVQVKVKALPDAQFEVVHSLAKWKRQ'}
2026-01-28T09:24:33.6261163Z 
2026-01-28T09:24:33.6261245Z     @pytest.mark.integration
2026-01-28T09:24:33.6261344Z     def test_embed_with_different_embedders(
2026-01-28T09:24:33.6261403Z         self,
2026-01-28T09:24:33.6261465Z         client,
2026-01-28T09:24:33.6261546Z         single_test_sequence,
2026-01-28T09:24:33.6261604Z     ):
2026-01-28T09:24:33.6261721Z         """Test that different embedders can be used."""
2026-01-28T09:24:33.6261825Z         embedders = ["one_hot_encoding", "blosum62"]
2026-01-28T09:24:33.6261888Z     
2026-01-28T09:24:33.6261969Z         for embedder in embedders:
2026-01-28T09:24:33.6262039Z             request_data = {
2026-01-28T09:24:33.6262125Z                 "embedder_name": embedder,
2026-01-28T09:24:33.6262205Z                 "reduce": True,
2026-01-28T09:24:33.6262308Z                 "sequence_data": single_test_sequence,
2026-01-28T09:24:33.6262537Z                 "use_half_precision": False,
2026-01-28T09:24:33.6262745Z             }
2026-01-28T09:24:33.6262804Z     
2026-01-28T09:24:33.6262994Z             response = client.post("/embeddings_service/embed", json=request_data)
2026-01-28T09:24:33.6263174Z >           assert response.status_code == 200, f"Failed for embedder: {embedder}"
2026-01-28T09:24:33.6263311Z E           AssertionError: Failed for embedder: one_hot_encoding
2026-01-28T09:24:33.6263487Z E           assert 404 == 200
2026-01-28T09:24:33.6263611Z E            +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6263617Z 
2026-01-28T09:24:33.6263778Z tests/integration/endpoints/test_embed_flow.py:486: AssertionError
2026-01-28T09:24:33.6263937Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6264254Z 2026-01-28 09:24:32,931 INFO HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6264404Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6264743Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/embeddings_service/embed "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6264944Z ______________ TestModelMetadataEndpoint.test_get_model_metadata _______________
2026-01-28T09:24:33.6264950Z 
2026-01-28T09:24:33.6265183Z self = <endpoints.test_predict_flow.TestModelMetadataEndpoint object at 0x7f7cb59c21b0>
2026-01-28T09:24:33.6265297Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6265302Z 
2026-01-28T09:24:33.6265387Z     @pytest.mark.integration
2026-01-28T09:24:33.6265485Z     def test_get_model_metadata(self, client):
2026-01-28T09:24:33.6265594Z         """Test retrieving available model metadata."""
2026-01-28T09:24:33.6265750Z         response = client.get("/prediction_service/model_metadata")
2026-01-28T09:24:33.6265814Z     
2026-01-28T09:24:33.6265902Z >       assert response.status_code == 200
2026-01-28T09:24:33.6265972Z E       assert 404 == 200
2026-01-28T09:24:33.6266102Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6266108Z 
2026-01-28T09:24:33.6266276Z tests/integration/endpoints/test_predict_flow.py:63: AssertionError
2026-01-28T09:24:33.6266429Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6267047Z 2026-01-28 09:24:32,942 INFO HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6267207Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6267557Z INFO     httpx:_client.py:1025 HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6267758Z ___________ TestModelMetadataEndpoint.test_model_metadata_structure ____________
2026-01-28T09:24:33.6267764Z 
2026-01-28T09:24:33.6267993Z self = <endpoints.test_predict_flow.TestModelMetadataEndpoint object at 0x7f7cb59c22d0>
2026-01-28T09:24:33.6268100Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6268105Z 
2026-01-28T09:24:33.6268191Z     @pytest.mark.integration
2026-01-28T09:24:33.6268302Z     def test_model_metadata_structure(self, client):
2026-01-28T09:24:33.6268424Z         """Test that model metadata has expected structure."""
2026-01-28T09:24:33.6268573Z         response = client.get("/prediction_service/model_metadata")
2026-01-28T09:24:33.6268669Z >       metadata = response.json()["metadata"]
2026-01-28T09:24:33.6268742Z E       KeyError: 'metadata'
2026-01-28T09:24:33.6268747Z 
2026-01-28T09:24:33.6268900Z tests/integration/endpoints/test_predict_flow.py:73: KeyError
2026-01-28T09:24:33.6269053Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6269389Z 2026-01-28 09:24:32,950 INFO HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6269539Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6269977Z INFO     httpx:_client.py:1025 HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6270175Z ___________ TestModelMetadataEndpoint.test_model_metadata_consistent ___________
2026-01-28T09:24:33.6270180Z 
2026-01-28T09:24:33.6270404Z self = <endpoints.test_predict_flow.TestModelMetadataEndpoint object at 0x7f7cb59c1fa0>
2026-01-28T09:24:33.6270585Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6270591Z 
2026-01-28T09:24:33.6270667Z     @pytest.mark.integration
2026-01-28T09:24:33.6270780Z     def test_model_metadata_consistent(self, client):
2026-01-28T09:24:33.6270906Z         """Test that metadata is consistent across calls."""
2026-01-28T09:24:33.6271056Z         response1 = client.get("/prediction_service/model_metadata")
2026-01-28T09:24:33.6271201Z         response2 = client.get("/prediction_service/model_metadata")
2026-01-28T09:24:33.6271264Z     
2026-01-28T09:24:33.6271360Z >       assert response1.status_code == 200
2026-01-28T09:24:33.6271432Z E       assert 404 == 200
2026-01-28T09:24:33.6271552Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6271557Z 
2026-01-28T09:24:33.6271722Z tests/integration/endpoints/test_predict_flow.py:86: AssertionError
2026-01-28T09:24:33.6271883Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6272245Z 2026-01-28 09:24:32,959 INFO HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6272687Z 2026-01-28 09:24:32,960 INFO HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6272843Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6273190Z INFO     httpx:_client.py:1025 HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6273539Z INFO     httpx:_client.py:1025 HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6273723Z ________________ TestPredictEndpoint.test_predict_creates_task _________________
2026-01-28T09:24:33.6273728Z 
2026-01-28T09:24:33.6273939Z self = <endpoints.test_predict_flow.TestPredictEndpoint object at 0x7f7cb59c1880>
2026-01-28T09:24:33.6274049Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6274836Z prediction_sequences = {'pred_1': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLSGAEKAVQVKVKALPDAQFEVVHSLAKWKRQ', 'pred_2': 'MKKLVLSLSLVLAFSSATAAFAAIPQNIRAQYPAVVKEQRQVVRSQNGDLADNIKKISDNLKAKIYAMHYVDVFYNKS'}
2026-01-28T09:24:33.6274842Z 
2026-01-28T09:24:33.6274928Z     @pytest.mark.integration
2026-01-28T09:24:33.6275011Z     def test_predict_creates_task(
2026-01-28T09:24:33.6275071Z         self,
2026-01-28T09:24:33.6275131Z         client,
2026-01-28T09:24:33.6275213Z         prediction_sequences,
2026-01-28T09:24:33.6275275Z     ):
2026-01-28T09:24:33.6275391Z         """Test that prediction request creates a task."""
2026-01-28T09:24:33.6275477Z         # Get available models first
2026-01-28T09:24:33.6275647Z         meta_response = client.get("/prediction_service/model_metadata")
2026-01-28T09:24:33.6275804Z >       available_models = list(meta_response.json()["metadata"].keys())
2026-01-28T09:24:33.6275886Z E       KeyError: 'metadata'
2026-01-28T09:24:33.6275891Z 
2026-01-28T09:24:33.6276041Z tests/integration/endpoints/test_predict_flow.py:105: KeyError
2026-01-28T09:24:33.6276193Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6276525Z 2026-01-28 09:24:32,968 INFO HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6276680Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6277025Z INFO     httpx:_client.py:1025 HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6277329Z _______________ TestPredictEndpoint.test_predict_task_completes ________________
2026-01-28T09:24:33.6277340Z 
2026-01-28T09:24:33.6277547Z self = <endpoints.test_predict_flow.TestPredictEndpoint object at 0x7f7cb59c13a0>
2026-01-28T09:24:33.6277651Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6277901Z poll_task = <function poll_task.<locals>._poll at 0x7f7b0b5d8d60>
2026-01-28T09:24:33.6278687Z prediction_sequences = {'pred_1': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLSGAEKAVQVKVKALPDAQFEVVHSLAKWKRQ', 'pred_2': 'MKKLVLSLSLVLAFSSATAAFAAIPQNIRAQYPAVVKEQRQVVRSQNGDLADNIKKISDNLKAKIYAMHYVDVFYNKS'}
2026-01-28T09:24:33.6278693Z 
2026-01-28T09:24:33.6278771Z     @pytest.mark.integration
2026-01-28T09:24:33.6278852Z     def test_predict_task_completes(
2026-01-28T09:24:33.6278916Z         self,
2026-01-28T09:24:33.6278976Z         client,
2026-01-28T09:24:33.6279044Z         poll_task,
2026-01-28T09:24:33.6279127Z         prediction_sequences,
2026-01-28T09:24:33.6279185Z     ):
2026-01-28T09:24:33.6279315Z         """Test that prediction task completes successfully."""
2026-01-28T09:24:33.6279480Z         meta_response = client.get("/prediction_service/model_metadata")
2026-01-28T09:24:33.6279639Z >       available_models = list(meta_response.json()["metadata"].keys())
2026-01-28T09:24:33.6279719Z E       KeyError: 'metadata'
2026-01-28T09:24:33.6279724Z 
2026-01-28T09:24:33.6279872Z tests/integration/endpoints/test_predict_flow.py:130: KeyError
2026-01-28T09:24:33.6280029Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6280395Z 2026-01-28 09:24:32,981 INFO HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6280545Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6280892Z INFO     httpx:_client.py:1025 HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6281080Z _______________ TestPredictEndpoint.test_predict_multiple_models _______________
2026-01-28T09:24:33.6281085Z 
2026-01-28T09:24:33.6281287Z self = <endpoints.test_predict_flow.TestPredictEndpoint object at 0x7f7cb59c0d40>
2026-01-28T09:24:33.6281394Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6282171Z prediction_sequences = {'pred_1': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLSGAEKAVQVKVKALPDAQFEVVHSLAKWKRQ', 'pred_2': 'MKKLVLSLSLVLAFSSATAAFAAIPQNIRAQYPAVVKEQRQVVRSQNGDLADNIKKISDNLKAKIYAMHYVDVFYNKS'}
2026-01-28T09:24:33.6282177Z 
2026-01-28T09:24:33.6282261Z     @pytest.mark.integration
2026-01-28T09:24:33.6282481Z     def test_predict_multiple_models(
2026-01-28T09:24:33.6282545Z         self,
2026-01-28T09:24:33.6282605Z         client,
2026-01-28T09:24:33.6282686Z         prediction_sequences,
2026-01-28T09:24:33.6282744Z     ):
2026-01-28T09:24:33.6282849Z         """Test prediction with multiple models."""
2026-01-28T09:24:33.6283008Z         meta_response = client.get("/prediction_service/model_metadata")
2026-01-28T09:24:33.6283168Z >       available_models = list(meta_response.json()["metadata"].keys())
2026-01-28T09:24:33.6283240Z E       KeyError: 'metadata'
2026-01-28T09:24:33.6283245Z 
2026-01-28T09:24:33.6283393Z tests/integration/endpoints/test_predict_flow.py:156: KeyError
2026-01-28T09:24:33.6283551Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6283882Z 2026-01-28 09:24:32,989 INFO HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6284030Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6284377Z INFO     httpx:_client.py:1025 HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6284734Z ____ TestPredictEndpoint.test_predict_real_world_sequences[real_insulin_b] _____
2026-01-28T09:24:33.6284740Z 
2026-01-28T09:24:33.6284939Z self = <endpoints.test_predict_flow.TestPredictEndpoint object at 0x7f7cb59c0da0>
2026-01-28T09:24:33.6285121Z client = <httpx.Client object at 0x7f7b0ccd2060>, seq_id = 'real_insulin_b'
2026-01-28T09:24:33.6285127Z 
2026-01-28T09:24:33.6285203Z     @pytest.mark.integration
2026-01-28T09:24:33.6285497Z     @pytest.mark.parametrize("seq_id", CANONICAL_REAL_WORLD_IDS, ids=lambda x: x)
2026-01-28T09:24:33.6285593Z     def test_predict_real_world_sequences(
2026-01-28T09:24:33.6285652Z         self,
2026-01-28T09:24:33.6285714Z         client,
2026-01-28T09:24:33.6285779Z         seq_id,
2026-01-28T09:24:33.6285837Z     ):
2026-01-28T09:24:33.6286037Z         """Test prediction with real-world protein sequences from canonical dataset."""
2026-01-28T09:24:33.6286196Z         meta_response = client.get("/prediction_service/model_metadata")
2026-01-28T09:24:33.6286354Z >       available_models = list(meta_response.json()["metadata"].keys())
2026-01-28T09:24:33.6286430Z E       KeyError: 'metadata'
2026-01-28T09:24:33.6286436Z 
2026-01-28T09:24:33.6286584Z tests/integration/endpoints/test_predict_flow.py:180: KeyError
2026-01-28T09:24:33.6286739Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6287065Z 2026-01-28 09:24:32,997 INFO HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6287221Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6287566Z INFO     httpx:_client.py:1025 HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6287764Z ____ TestPredictEndpoint.test_predict_real_world_sequences[real_ubiquitin] _____
2026-01-28T09:24:33.6287770Z 
2026-01-28T09:24:33.6287968Z self = <endpoints.test_predict_flow.TestPredictEndpoint object at 0x7f7cb59c0cb0>
2026-01-28T09:24:33.6288151Z client = <httpx.Client object at 0x7f7b0ccd2060>, seq_id = 'real_ubiquitin'
2026-01-28T09:24:33.6288157Z 
2026-01-28T09:24:33.6288233Z     @pytest.mark.integration
2026-01-28T09:24:33.6288427Z     @pytest.mark.parametrize("seq_id", CANONICAL_REAL_WORLD_IDS, ids=lambda x: x)
2026-01-28T09:24:33.6288519Z     def test_predict_real_world_sequences(
2026-01-28T09:24:33.6288579Z         self,
2026-01-28T09:24:33.6288642Z         client,
2026-01-28T09:24:33.6288701Z         seq_id,
2026-01-28T09:24:33.6288764Z     ):
2026-01-28T09:24:33.6288961Z         """Test prediction with real-world protein sequences from canonical dataset."""
2026-01-28T09:24:33.6289117Z         meta_response = client.get("/prediction_service/model_metadata")
2026-01-28T09:24:33.6289273Z >       available_models = list(meta_response.json()["metadata"].keys())
2026-01-28T09:24:33.6289346Z E       KeyError: 'metadata'
2026-01-28T09:24:33.6289351Z 
2026-01-28T09:24:33.6289494Z tests/integration/endpoints/test_predict_flow.py:180: KeyError
2026-01-28T09:24:33.6289650Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6289977Z 2026-01-28 09:24:33,008 INFO HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6290124Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6290473Z INFO     httpx:_client.py:1025 HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6290672Z _____ TestPredictEndpoint.test_predict_real_world_sequences[real_gfp_core] _____
2026-01-28T09:24:33.6290677Z 
2026-01-28T09:24:33.6290875Z self = <endpoints.test_predict_flow.TestPredictEndpoint object at 0x7f7cb59c3860>
2026-01-28T09:24:33.6291051Z client = <httpx.Client object at 0x7f7b0ccd2060>, seq_id = 'real_gfp_core'
2026-01-28T09:24:33.6291056Z 
2026-01-28T09:24:33.6291132Z     @pytest.mark.integration
2026-01-28T09:24:33.6291404Z     @pytest.mark.parametrize("seq_id", CANONICAL_REAL_WORLD_IDS, ids=lambda x: x)
2026-01-28T09:24:33.6291494Z     def test_predict_real_world_sequences(
2026-01-28T09:24:33.6291555Z         self,
2026-01-28T09:24:33.6291614Z         client,
2026-01-28T09:24:33.6291673Z         seq_id,
2026-01-28T09:24:33.6291734Z     ):
2026-01-28T09:24:33.6291930Z         """Test prediction with real-world protein sequences from canonical dataset."""
2026-01-28T09:24:33.6292157Z         meta_response = client.get("/prediction_service/model_metadata")
2026-01-28T09:24:33.6292324Z >       available_models = list(meta_response.json()["metadata"].keys())
2026-01-28T09:24:33.6292495Z E       KeyError: 'metadata'
2026-01-28T09:24:33.6292501Z 
2026-01-28T09:24:33.6292646Z tests/integration/endpoints/test_predict_flow.py:180: KeyError
2026-01-28T09:24:33.6292802Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6293131Z 2026-01-28 09:24:33,016 INFO HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6293283Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6293626Z INFO     httpx:_client.py:1025 HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6293822Z ______ TestPredictEndpoint.test_predict_standard_sequences[standard_001] _______
2026-01-28T09:24:33.6293832Z 
2026-01-28T09:24:33.6294031Z self = <endpoints.test_predict_flow.TestPredictEndpoint object at 0x7f7cb59c3a70>
2026-01-28T09:24:33.6294204Z client = <httpx.Client object at 0x7f7b0ccd2060>, seq_id = 'standard_001'
2026-01-28T09:24:33.6294210Z 
2026-01-28T09:24:33.6294287Z     @pytest.mark.integration
2026-01-28T09:24:33.6294476Z     @pytest.mark.parametrize("seq_id", CANONICAL_STANDARD_IDS, ids=lambda x: x)
2026-01-28T09:24:33.6294565Z     def test_predict_standard_sequences(
2026-01-28T09:24:33.6294624Z         self,
2026-01-28T09:24:33.6294687Z         client,
2026-01-28T09:24:33.6294745Z         seq_id,
2026-01-28T09:24:33.6294807Z     ):
2026-01-28T09:24:33.6294973Z         """Test prediction with standard sequences from canonical dataset."""
2026-01-28T09:24:33.6295126Z         meta_response = client.get("/prediction_service/model_metadata")
2026-01-28T09:24:33.6295283Z >       available_models = list(meta_response.json()["metadata"].keys())
2026-01-28T09:24:33.6295356Z E       KeyError: 'metadata'
2026-01-28T09:24:33.6295361Z 
2026-01-28T09:24:33.6295505Z tests/integration/endpoints/test_predict_flow.py:206: KeyError
2026-01-28T09:24:33.6295658Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6295993Z 2026-01-28 09:24:33,023 INFO HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6296143Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6296485Z INFO     httpx:_client.py:1025 HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6296692Z ______ TestPredictEndpoint.test_predict_standard_sequences[standard_002] _______
2026-01-28T09:24:33.6296697Z 
2026-01-28T09:24:33.6296897Z self = <endpoints.test_predict_flow.TestPredictEndpoint object at 0x7f7cb59c3d70>
2026-01-28T09:24:33.6297067Z client = <httpx.Client object at 0x7f7b0ccd2060>, seq_id = 'standard_002'
2026-01-28T09:24:33.6297080Z 
2026-01-28T09:24:33.6297156Z     @pytest.mark.integration
2026-01-28T09:24:33.6297346Z     @pytest.mark.parametrize("seq_id", CANONICAL_STANDARD_IDS, ids=lambda x: x)
2026-01-28T09:24:33.6297432Z     def test_predict_standard_sequences(
2026-01-28T09:24:33.6297499Z         self,
2026-01-28T09:24:33.6297558Z         client,
2026-01-28T09:24:33.6297617Z         seq_id,
2026-01-28T09:24:33.6297680Z     ):
2026-01-28T09:24:33.6297846Z         """Test prediction with standard sequences from canonical dataset."""
2026-01-28T09:24:33.6298120Z         meta_response = client.get("/prediction_service/model_metadata")
2026-01-28T09:24:33.6298271Z >       available_models = list(meta_response.json()["metadata"].keys())
2026-01-28T09:24:33.6298348Z E       KeyError: 'metadata'
2026-01-28T09:24:33.6298353Z 
2026-01-28T09:24:33.6298498Z tests/integration/endpoints/test_predict_flow.py:206: KeyError
2026-01-28T09:24:33.6298648Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6299081Z 2026-01-28 09:24:33,031 INFO HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6299232Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6299572Z INFO     httpx:_client.py:1025 HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6299772Z ______ TestPredictEndpoint.test_predict_standard_sequences[standard_003] _______
2026-01-28T09:24:33.6299782Z 
2026-01-28T09:24:33.6299982Z self = <endpoints.test_predict_flow.TestPredictEndpoint object at 0x7f7cb59cccb0>
2026-01-28T09:24:33.6300147Z client = <httpx.Client object at 0x7f7b0ccd2060>, seq_id = 'standard_003'
2026-01-28T09:24:33.6300158Z 
2026-01-28T09:24:33.6300235Z     @pytest.mark.integration
2026-01-28T09:24:33.6300420Z     @pytest.mark.parametrize("seq_id", CANONICAL_STANDARD_IDS, ids=lambda x: x)
2026-01-28T09:24:33.6300507Z     def test_predict_standard_sequences(
2026-01-28T09:24:33.6300570Z         self,
2026-01-28T09:24:33.6300632Z         client,
2026-01-28T09:24:33.6300690Z         seq_id,
2026-01-28T09:24:33.6300752Z     ):
2026-01-28T09:24:33.6300916Z         """Test prediction with standard sequences from canonical dataset."""
2026-01-28T09:24:33.6301070Z         meta_response = client.get("/prediction_service/model_metadata")
2026-01-28T09:24:33.6301222Z >       available_models = list(meta_response.json()["metadata"].keys())
2026-01-28T09:24:33.6301297Z E       KeyError: 'metadata'
2026-01-28T09:24:33.6301306Z 
2026-01-28T09:24:33.6301451Z tests/integration/endpoints/test_predict_flow.py:206: KeyError
2026-01-28T09:24:33.6301600Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6301934Z 2026-01-28 09:24:33,039 INFO HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6302086Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6302553Z INFO     httpx:_client.py:1025 HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6302752Z ___________ TestPredictEndpoint.test_predict_invalid_model_rejected ____________
2026-01-28T09:24:33.6302757Z 
2026-01-28T09:24:33.6302958Z self = <endpoints.test_predict_flow.TestPredictEndpoint object at 0x7f7cb59ce1b0>
2026-01-28T09:24:33.6303062Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6303848Z prediction_sequences = {'pred_1': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLSGAEKAVQVKVKALPDAQFEVVHSLAKWKRQ', 'pred_2': 'MKKLVLSLSLVLAFSSATAAFAAIPQNIRAQYPAVVKEQRQVVRSQNGDLADNIKKISDNLKAKIYAMHYVDVFYNKS'}
2026-01-28T09:24:33.6303854Z 
2026-01-28T09:24:33.6303929Z     @pytest.mark.integration
2026-01-28T09:24:33.6304022Z     def test_predict_invalid_model_rejected(
2026-01-28T09:24:33.6304087Z         self,
2026-01-28T09:24:33.6304151Z         client,
2026-01-28T09:24:33.6304225Z         prediction_sequences,
2026-01-28T09:24:33.6304291Z     ):
2026-01-28T09:24:33.6304406Z         """Test that invalid model name returns error."""
2026-01-28T09:24:33.6304475Z         request_data = {
2026-01-28T09:24:33.6304575Z             "model_names": ["invalid_model_xyz_123"],
2026-01-28T09:24:33.6304682Z             "sequence_input": prediction_sequences,
2026-01-28T09:24:33.6304742Z         }
2026-01-28T09:24:33.6304800Z     
2026-01-28T09:24:33.6304987Z         response = client.post("/prediction_service/predict", json=request_data)
2026-01-28T09:24:33.6305164Z     
2026-01-28T09:24:33.6305333Z         # Should return 200 with error in response (NotFoundErrorResponse)
2026-01-28T09:24:33.6305422Z >       assert response.status_code == 200
2026-01-28T09:24:33.6305496Z E       assert 404 == 200
2026-01-28T09:24:33.6305613Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6305720Z 
2026-01-28T09:24:33.6305896Z tests/integration/endpoints/test_predict_flow.py:238: AssertionError
2026-01-28T09:24:33.6306052Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6306366Z 2026-01-28 09:24:33,047 INFO HTTP Request: POST http://localhost:9540/prediction_service/predict "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6306517Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6306850Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/prediction_service/predict "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6307048Z __________ TestPredictEndpoint.test_predict_empty_sequences_rejected ___________
2026-01-28T09:24:33.6307053Z 
2026-01-28T09:24:33.6307255Z self = <endpoints.test_predict_flow.TestPredictEndpoint object at 0x7f7cb59cf830>
2026-01-28T09:24:33.6307362Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6307367Z 
2026-01-28T09:24:33.6307445Z     @pytest.mark.integration
2026-01-28T09:24:33.6307582Z     def test_predict_empty_sequences_rejected(self, client):
2026-01-28T09:24:33.6307748Z         """Test that empty sequence input is rejected with proper error."""
2026-01-28T09:24:33.6307818Z         request_data = {
2026-01-28T09:24:33.6307899Z             "model_names": ["BindEmbed"],
2026-01-28T09:24:33.6307984Z             "sequence_input": {},  # Empty
2026-01-28T09:24:33.6308042Z         }
2026-01-28T09:24:33.6308099Z     
2026-01-28T09:24:33.6308282Z         response = client.post("/prediction_service/predict", json=request_data)
2026-01-28T09:24:33.6308347Z     
2026-01-28T09:24:33.6308432Z >       assert response.status_code == 422
2026-01-28T09:24:33.6308502Z E       assert 404 == 422
2026-01-28T09:24:33.6308621Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6308626Z 
2026-01-28T09:24:33.6308795Z tests/integration/endpoints/test_predict_flow.py:252: AssertionError
2026-01-28T09:24:33.6308947Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6309265Z 2026-01-28 09:24:33,054 INFO HTTP Request: POST http://localhost:9540/prediction_service/predict "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6309411Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6309736Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/prediction_service/predict "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6309930Z ___________ TestPredictEndpoint.test_predict_short_sequence_rejected ___________
2026-01-28T09:24:33.6309939Z 
2026-01-28T09:24:33.6310140Z self = <endpoints.test_predict_flow.TestPredictEndpoint object at 0x7f7cb59cd760>
2026-01-28T09:24:33.6310240Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6310415Z boundary_length_sequences = {'short_10': 'MKTAYIAKQR', 'short_5': 'MKTAY'}
2026-01-28T09:24:33.6310426Z 
2026-01-28T09:24:33.6310503Z     @pytest.mark.integration
2026-01-28T09:24:33.6310599Z     def test_predict_short_sequence_rejected(
2026-01-28T09:24:33.6310663Z         self,
2026-01-28T09:24:33.6310727Z         client,
2026-01-28T09:24:33.6310806Z         boundary_length_sequences,
2026-01-28T09:24:33.6310864Z     ):
2026-01-28T09:24:33.6311091Z         """Test that sequences shorter than minimum length are rejected with proper error."""
2026-01-28T09:24:33.6311206Z         short_seq = boundary_length_sequences["short_5"]
2026-01-28T09:24:33.6311276Z         request_data = {
2026-01-28T09:24:33.6311355Z             "model_names": ["BindEmbed"],
2026-01-28T09:24:33.6311453Z             "sequence_input": {"short": short_seq},
2026-01-28T09:24:33.6311597Z         }
2026-01-28T09:24:33.6311655Z     
2026-01-28T09:24:33.6311838Z         response = client.post("/prediction_service/predict", json=request_data)
2026-01-28T09:24:33.6311894Z     
2026-01-28T09:24:33.6311979Z >       assert response.status_code == 422
2026-01-28T09:24:33.6312051Z E       assert 404 == 422
2026-01-28T09:24:33.6312164Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6312245Z 
2026-01-28T09:24:33.6312515Z tests/integration/endpoints/test_predict_flow.py:270: AssertionError
2026-01-28T09:24:33.6312666Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6312981Z 2026-01-28 09:24:33,062 INFO HTTP Request: POST http://localhost:9540/prediction_service/predict "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6313128Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6313451Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/prediction_service/predict "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6313654Z _________ TestPredictEndpoint.test_predict_empty_model_names_rejected __________
2026-01-28T09:24:33.6313659Z 
2026-01-28T09:24:33.6313859Z self = <endpoints.test_predict_flow.TestPredictEndpoint object at 0x7f7cb59cc320>
2026-01-28T09:24:33.6313959Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6314749Z prediction_sequences = {'pred_1': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLSGAEKAVQVKVKALPDAQFEVVHSLAKWKRQ', 'pred_2': 'MKKLVLSLSLVLAFSSATAAFAAIPQNIRAQYPAVVKEQRQVVRSQNGDLADNIKKISDNLKAKIYAMHYVDVFYNKS'}
2026-01-28T09:24:33.6314755Z 
2026-01-28T09:24:33.6314831Z     @pytest.mark.integration
2026-01-28T09:24:33.6314928Z     def test_predict_empty_model_names_rejected(
2026-01-28T09:24:33.6314994Z         self,
2026-01-28T09:24:33.6315055Z         client,
2026-01-28T09:24:33.6315129Z         prediction_sequences,
2026-01-28T09:24:33.6315192Z     ):
2026-01-28T09:24:33.6315359Z         """Test that empty model names list is rejected with proper error."""
2026-01-28T09:24:33.6315431Z         request_data = {
2026-01-28T09:24:33.6315524Z             "model_names": [],  # Empty model list
2026-01-28T09:24:33.6315624Z             "sequence_input": prediction_sequences,
2026-01-28T09:24:33.6315682Z         }
2026-01-28T09:24:33.6315739Z     
2026-01-28T09:24:33.6315926Z         response = client.post("/prediction_service/predict", json=request_data)
2026-01-28T09:24:33.6315983Z     
2026-01-28T09:24:33.6316068Z >       assert response.status_code == 422
2026-01-28T09:24:33.6316140Z E       assert 404 == 422
2026-01-28T09:24:33.6316252Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6316257Z 
2026-01-28T09:24:33.6316423Z tests/integration/endpoints/test_predict_flow.py:287: AssertionError
2026-01-28T09:24:33.6316573Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6316892Z 2026-01-28 09:24:33,070 INFO HTTP Request: POST http://localhost:9540/prediction_service/predict "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6317039Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6317363Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/prediction_service/predict "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6317572Z ________ TestPredictionTaskLifecycle.test_prediction_task_id_uniqueness ________
2026-01-28T09:24:33.6317582Z 
2026-01-28T09:24:33.6317824Z self = <endpoints.test_predict_flow.TestPredictionTaskLifecycle object at 0x7f7cb59cc710>
2026-01-28T09:24:33.6317923Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6318704Z prediction_sequences = {'pred_1': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLSGAEKAVQVKVKALPDAQFEVVHSLAKWKRQ', 'pred_2': 'MKKLVLSLSLVLAFSSATAAFAAIPQNIRAQYPAVVKEQRQVVRSQNGDLADNIKKISDNLKAKIYAMHYVDVFYNKS'}
2026-01-28T09:24:33.6318710Z 
2026-01-28T09:24:33.6318790Z     @pytest.mark.integration
2026-01-28T09:24:33.6318998Z     def test_prediction_task_id_uniqueness(
2026-01-28T09:24:33.6319062Z         self,
2026-01-28T09:24:33.6319122Z         client,
2026-01-28T09:24:33.6319195Z         prediction_sequences,
2026-01-28T09:24:33.6319257Z     ):
2026-01-28T09:24:33.6319420Z         """Test that multiple prediction submissions get unique task IDs."""
2026-01-28T09:24:33.6319580Z         meta_response = client.get("/prediction_service/model_metadata")
2026-01-28T09:24:33.6319852Z >       available_models = list(meta_response.json()["metadata"].keys())
2026-01-28T09:24:33.6319924Z E       KeyError: 'metadata'
2026-01-28T09:24:33.6319929Z 
2026-01-28T09:24:33.6320077Z tests/integration/endpoints/test_predict_flow.py:304: KeyError
2026-01-28T09:24:33.6320228Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6320567Z 2026-01-28 09:24:33,078 INFO HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6320717Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6321065Z INFO     httpx:_client.py:1025 HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6321266Z ____________ TestPredictionTaskLifecycle.test_task_status_endpoint _____________
2026-01-28T09:24:33.6321277Z 
2026-01-28T09:24:33.6321511Z self = <endpoints.test_predict_flow.TestPredictionTaskLifecycle object at 0x7f7cb59cc9e0>
2026-01-28T09:24:33.6321614Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6322493Z prediction_sequences = {'pred_1': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLSGAEKAVQVKVKALPDAQFEVVHSLAKWKRQ', 'pred_2': 'MKKLVLSLSLVLAFSSATAAFAAIPQNIRAQYPAVVKEQRQVVRSQNGDLADNIKKISDNLKAKIYAMHYVDVFYNKS'}
2026-01-28T09:24:33.6322501Z 
2026-01-28T09:24:33.6322579Z     @pytest.mark.integration
2026-01-28T09:24:33.6322662Z     def test_task_status_endpoint(
2026-01-28T09:24:33.6322731Z         self,
2026-01-28T09:24:33.6322790Z         client,
2026-01-28T09:24:33.6322866Z         prediction_sequences,
2026-01-28T09:24:33.6322929Z     ):
2026-01-28T09:24:33.6323035Z         """Test that task status can be retrieved."""
2026-01-28T09:24:33.6323197Z         meta_response = client.get("/prediction_service/model_metadata")
2026-01-28T09:24:33.6323355Z >       available_models = list(meta_response.json()["metadata"].keys())
2026-01-28T09:24:33.6323433Z E       KeyError: 'metadata'
2026-01-28T09:24:33.6323438Z 
2026-01-28T09:24:33.6323590Z tests/integration/endpoints/test_predict_flow.py:334: KeyError
2026-01-28T09:24:33.6323741Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6324080Z 2026-01-28 09:24:33,086 INFO HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6324228Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6324578Z INFO     httpx:_client.py:1025 HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6324783Z ___________ TestEndToEndPredictionFlow.test_complete_prediction_flow ___________
2026-01-28T09:24:33.6324788Z 
2026-01-28T09:24:33.6325023Z self = <endpoints.test_predict_flow.TestEndToEndPredictionFlow object at 0x7f7cb59c0fb0>
2026-01-28T09:24:33.6325130Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6325283Z poll_task = <function poll_task.<locals>._poll at 0x7f7b0b5d8d60>
2026-01-28T09:24:33.6326274Z real_world_prediction_sequences = {'gfp_core': 'SKGEELFTGVVPILVELDGDVNGHKFSVSGEGEGDATYGKLTLKFICTTGKLPVPWPTLVTTFSYGVQCFSRYPDHMK', 'insulin_b': 'FVNQHLCGSHLVEALYLVCGERGFFYTPKT', 'ubiquitin': 'MQIFVKTLTGKTITLEVEPSDTIENVKAKIQDKEGIPPDQQRLIFAGKQLEDGRTLSDYNIQKESTLHLVLRLRGG'}
2026-01-28T09:24:33.6326281Z 
2026-01-28T09:24:33.6326363Z     @pytest.mark.integration
2026-01-28T09:24:33.6326450Z     def test_complete_prediction_flow(
2026-01-28T09:24:33.6326632Z         self,
2026-01-28T09:24:33.6326691Z         client,
2026-01-28T09:24:33.6326759Z         poll_task,
2026-01-28T09:24:33.6326846Z         real_world_prediction_sequences,
2026-01-28T09:24:33.6326904Z     ):
2026-01-28T09:24:33.6327064Z         """Test complete prediction flow from request to completion."""
2026-01-28T09:24:33.6327225Z         meta_response = client.get("/prediction_service/model_metadata")
2026-01-28T09:24:33.6327480Z >       available_models = list(meta_response.json()["metadata"].keys())
2026-01-28T09:24:33.6327556Z E       KeyError: 'metadata'
2026-01-28T09:24:33.6327566Z 
2026-01-28T09:24:33.6327715Z tests/integration/endpoints/test_predict_flow.py:371: KeyError
2026-01-28T09:24:33.6327864Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6328195Z 2026-01-28 09:24:33,093 INFO HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6328358Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6328699Z INFO     httpx:_client.py:1025 HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6328898Z __________ TestEndToEndPredictionFlow.test_predict_diverse_sequences ___________
2026-01-28T09:24:33.6328903Z 
2026-01-28T09:24:33.6329138Z self = <endpoints.test_predict_flow.TestEndToEndPredictionFlow object at 0x7f7cb59c2ba0>
2026-01-28T09:24:33.6329244Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6329389Z poll_task = <function poll_task.<locals>._poll at 0x7f7b0b5d8d60>
2026-01-28T09:24:33.6329395Z 
2026-01-28T09:24:33.6329478Z     @pytest.mark.integration
2026-01-28T09:24:33.6329549Z     @pytest.mark.slow
2026-01-28T09:24:33.6329635Z     def test_predict_diverse_sequences(
2026-01-28T09:24:33.6329700Z         self,
2026-01-28T09:24:33.6329759Z         client,
2026-01-28T09:24:33.6329820Z         poll_task,
2026-01-28T09:24:33.6329881Z     ):
2026-01-28T09:24:33.6330052Z         """Test prediction with diverse sequences from canonical dataset."""
2026-01-28T09:24:33.6330183Z         # Build diverse prediction set from canonical sequences
2026-01-28T09:24:33.6330258Z         diverse_sequences = {}
2026-01-28T09:24:33.6330409Z         for seq_id in CANONICAL_STANDARD_IDS + CANONICAL_REAL_WORLD_IDS:
2026-01-28T09:24:33.6330510Z             sequence = get_sequence_by_id(seq_id)
2026-01-28T09:24:33.6330648Z             if len(sequence) >= 7:  # Meet minimum length requirement
2026-01-28T09:24:33.6330750Z                 diverse_sequences[seq_id] = sequence
2026-01-28T09:24:33.6330808Z     
2026-01-28T09:24:33.6330964Z         meta_response = client.get("/prediction_service/model_metadata")
2026-01-28T09:24:33.6331117Z >       available_models = list(meta_response.json()["metadata"].keys())
2026-01-28T09:24:33.6331193Z E       KeyError: 'metadata'
2026-01-28T09:24:33.6331199Z 
2026-01-28T09:24:33.6331347Z tests/integration/endpoints/test_predict_flow.py:409: KeyError
2026-01-28T09:24:33.6331501Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6331838Z 2026-01-28 09:24:33,102 INFO HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6331985Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6332334Z INFO     httpx:_client.py:1025 HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6332646Z ____ TestEndToEndPredictionFlow.test_prediction_with_valid_boundary_length _____
2026-01-28T09:24:33.6332652Z 
2026-01-28T09:24:33.6332884Z self = <endpoints.test_predict_flow.TestEndToEndPredictionFlow object at 0x7f7cb59cd820>
2026-01-28T09:24:33.6332987Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6333166Z boundary_length_sequences = {'short_10': 'MKTAYIAKQR', 'short_5': 'MKTAY'}
2026-01-28T09:24:33.6333285Z 
2026-01-28T09:24:33.6333364Z     @pytest.mark.integration
2026-01-28T09:24:33.6333474Z     def test_prediction_with_valid_boundary_length(
2026-01-28T09:24:33.6333543Z         self,
2026-01-28T09:24:33.6333601Z         client,
2026-01-28T09:24:33.6333681Z         boundary_length_sequences,
2026-01-28T09:24:33.6333739Z     ):
2026-01-28T09:24:33.6333889Z         """Test prediction with sequence at minimum valid length."""
2026-01-28T09:24:33.6334148Z         meta_response = client.get("/prediction_service/model_metadata")
2026-01-28T09:24:33.6334301Z >       available_models = list(meta_response.json()["metadata"].keys())
2026-01-28T09:24:33.6334379Z E       KeyError: 'metadata'
2026-01-28T09:24:33.6334384Z 
2026-01-28T09:24:33.6334531Z tests/integration/endpoints/test_predict_flow.py:435: KeyError
2026-01-28T09:24:33.6334680Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6335014Z 2026-01-28 09:24:33,110 INFO HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6335166Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6335509Z INFO     httpx:_client.py:1025 HTTP Request: GET http://localhost:9540/prediction_service/model_metadata "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6335711Z ___________ TestProjectionConfigEndpoint.test_get_projection_config ____________
2026-01-28T09:24:33.6335721Z 
2026-01-28T09:24:33.6335961Z self = <endpoints.test_project_flow.TestProjectionConfigEndpoint object at 0x7f7cb59cf500>
2026-01-28T09:24:33.6336061Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6336066Z 
2026-01-28T09:24:33.6336147Z     @pytest.mark.integration
2026-01-28T09:24:33.6336248Z     def test_get_projection_config(self, client):
2026-01-28T09:24:33.6336421Z         """Test retrieving available projection methods and configurations."""
2026-01-28T09:24:33.6336580Z         response = client.get("/projection_service/projection_config")
2026-01-28T09:24:33.6336642Z     
2026-01-28T09:24:33.6336730Z >       assert response.status_code == 200
2026-01-28T09:24:33.6336799Z E       assert 404 == 200
2026-01-28T09:24:33.6336918Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6336923Z 
2026-01-28T09:24:33.6337091Z tests/integration/endpoints/test_project_flow.py:35: AssertionError
2026-01-28T09:24:33.6337248Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6337595Z 2026-01-28 09:24:33,118 INFO HTTP Request: GET http://localhost:9540/projection_service/projection_config "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6337742Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6338098Z INFO     httpx:_client.py:1025 HTTP Request: GET http://localhost:9540/projection_service/projection_config "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6338322Z _ TestProjectionConfigEndpoint.test_projection_config_contains_common_methods __
2026-01-28T09:24:33.6338331Z 
2026-01-28T09:24:33.6338569Z self = <endpoints.test_project_flow.TestProjectionConfigEndpoint object at 0x7f7cb59cebd0>
2026-01-28T09:24:33.6338672Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6338677Z 
2026-01-28T09:24:33.6338759Z     @pytest.mark.integration
2026-01-28T09:24:33.6338915Z     def test_projection_config_contains_common_methods(self, client):
2026-01-28T09:24:33.6339048Z         """Test that common projection methods are available."""
2026-01-28T09:24:33.6339204Z         response = client.get("/projection_service/projection_config")
2026-01-28T09:24:33.6339260Z     
2026-01-28T09:24:33.6339347Z >       assert response.status_code == 200
2026-01-28T09:24:33.6339421Z E       assert 404 == 200
2026-01-28T09:24:33.6339534Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6339539Z 
2026-01-28T09:24:33.6339703Z tests/integration/endpoints/test_project_flow.py:49: AssertionError
2026-01-28T09:24:33.6339971Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6340315Z 2026-01-28 09:24:33,125 INFO HTTP Request: GET http://localhost:9540/projection_service/projection_config "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6340461Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6340889Z INFO     httpx:_client.py:1025 HTTP Request: GET http://localhost:9540/projection_service/projection_config "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6341100Z ________ TestProjectionConfigEndpoint.test_projection_config_consistent ________
2026-01-28T09:24:33.6341106Z 
2026-01-28T09:24:33.6341343Z self = <endpoints.test_project_flow.TestProjectionConfigEndpoint object at 0x7f7cb59ceea0>
2026-01-28T09:24:33.6341442Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6341452Z 
2026-01-28T09:24:33.6341528Z     @pytest.mark.integration
2026-01-28T09:24:33.6341647Z     def test_projection_config_consistent(self, client):
2026-01-28T09:24:33.6341763Z         """Test that config is consistent across calls."""
2026-01-28T09:24:33.6341925Z         response1 = client.get("/projection_service/projection_config")
2026-01-28T09:24:33.6342075Z         response2 = client.get("/projection_service/projection_config")
2026-01-28T09:24:33.6342132Z     
2026-01-28T09:24:33.6342226Z >       assert response1.status_code == 200
2026-01-28T09:24:33.6342299Z E       assert 404 == 200
2026-01-28T09:24:33.6342505Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6342511Z 
2026-01-28T09:24:33.6342690Z tests/integration/endpoints/test_project_flow.py:62: AssertionError
2026-01-28T09:24:33.6342841Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6343178Z 2026-01-28 09:24:33,132 INFO HTTP Request: GET http://localhost:9540/projection_service/projection_config "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6343509Z 2026-01-28 09:24:33,134 INFO HTTP Request: GET http://localhost:9540/projection_service/projection_config "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6343668Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6344023Z INFO     httpx:_client.py:1025 HTTP Request: GET http://localhost:9540/projection_service/projection_config "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6344379Z INFO     httpx:_client.py:1025 HTTP Request: GET http://localhost:9540/projection_service/projection_config "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6344562Z ________________ TestProjectEndpoint.test_project_creates_task _________________
2026-01-28T09:24:33.6344567Z 
2026-01-28T09:24:33.6344769Z self = <endpoints.test_project_flow.TestProjectEndpoint object at 0x7f7cb59ce990>
2026-01-28T09:24:33.6344869Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6344962Z embedder_name = 'facebook/esm2_t6_8M_UR50D'
2026-01-28T09:24:33.6345279Z short_test_sequences = {'short_1': 'MKTAYIAKQR', 'short_2': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLS'}
2026-01-28T09:24:33.6345289Z 
2026-01-28T09:24:33.6345366Z     @pytest.mark.integration
2026-01-28T09:24:33.6345451Z     def test_project_creates_task(
2026-01-28T09:24:33.6345511Z         self,
2026-01-28T09:24:33.6345570Z         client,
2026-01-28T09:24:33.6345642Z         embedder_name,
2026-01-28T09:24:33.6345716Z         short_test_sequences,
2026-01-28T09:24:33.6345778Z     ):
2026-01-28T09:24:33.6345893Z         """Test that projection request creates a task."""
2026-01-28T09:24:33.6345967Z         request_data = {
2026-01-28T09:24:33.6346045Z             "method": "pca",
2026-01-28T09:24:33.6346144Z             "sequence_data": short_test_sequences,
2026-01-28T09:24:33.6346232Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6346297Z             "config": {
2026-01-28T09:24:33.6346374Z                 "n_components": 2,
2026-01-28T09:24:33.6346438Z             },
2026-01-28T09:24:33.6346496Z         }
2026-01-28T09:24:33.6346672Z     
2026-01-28T09:24:33.6346856Z         response = client.post("/projection_service/project", json=request_data)
2026-01-28T09:24:33.6346918Z     
2026-01-28T09:24:33.6347005Z >       assert response.status_code == 200
2026-01-28T09:24:33.6347071Z E       assert 404 == 200
2026-01-28T09:24:33.6347191Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6347195Z 
2026-01-28T09:24:33.6347467Z tests/integration/endpoints/test_project_flow.py:91: AssertionError
2026-01-28T09:24:33.6347620Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6347941Z 2026-01-28 09:24:33,141 INFO HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6348088Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6348415Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6348607Z _______________ TestProjectEndpoint.test_project_task_completes ________________
2026-01-28T09:24:33.6348612Z 
2026-01-28T09:24:33.6348815Z self = <endpoints.test_project_flow.TestProjectEndpoint object at 0x7f7cb59ce510>
2026-01-28T09:24:33.6348917Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6349063Z poll_task = <function poll_task.<locals>._poll at 0x7f7b0b5d8d60>
2026-01-28T09:24:33.6349165Z embedder_name = 'facebook/esm2_t6_8M_UR50D'
2026-01-28T09:24:33.6350113Z test_sequences = {'protein_1': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLSGAEKAVQVKVKALPDAQFEVVHSLAKWKRQ', 'protein_2': 'MKKLVLS...KISDNLKAKIYAMHYVDVFYNKS', 'protein_3': 'MVHLTPEEKSAVTALWGKVNVDEVGGEALGRLLVVYPWTQRFFESFGDLSTPDAVMGNPKVKAHGKKVLGAFSDGLA'}
2026-01-28T09:24:33.6350120Z 
2026-01-28T09:24:33.6350207Z     @pytest.mark.integration
2026-01-28T09:24:33.6350293Z     def test_project_task_completes(
2026-01-28T09:24:33.6350352Z         self,
2026-01-28T09:24:33.6350418Z         client,
2026-01-28T09:24:33.6350486Z         poll_task,
2026-01-28T09:24:33.6350556Z         embedder_name,
2026-01-28T09:24:33.6350624Z         test_sequences,
2026-01-28T09:24:33.6350690Z     ):
2026-01-28T09:24:33.6350821Z         """Test that projection task completes successfully."""
2026-01-28T09:24:33.6350893Z         request_data = {
2026-01-28T09:24:33.6350965Z             "method": "pca",
2026-01-28T09:24:33.6351064Z             "sequence_data": test_sequences,
2026-01-28T09:24:33.6351145Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6351210Z             "config": {
2026-01-28T09:24:33.6351289Z                 "n_components": 2,
2026-01-28T09:24:33.6351350Z             },
2026-01-28T09:24:33.6351408Z         }
2026-01-28T09:24:33.6351466Z     
2026-01-28T09:24:33.6351653Z         response = client.post("/projection_service/project", json=request_data)
2026-01-28T09:24:33.6351739Z >       assert response.status_code == 200
2026-01-28T09:24:33.6351808Z E       assert 404 == 200
2026-01-28T09:24:33.6351930Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6351935Z 
2026-01-28T09:24:33.6352106Z tests/integration/endpoints/test_project_flow.py:114: AssertionError
2026-01-28T09:24:33.6352255Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6352668Z 2026-01-28 09:24:33,148 INFO HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6352826Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6353148Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6353328Z __________________ TestProjectEndpoint.test_project_with_pca ___________________
2026-01-28T09:24:33.6353333Z 
2026-01-28T09:24:33.6353537Z self = <endpoints.test_project_flow.TestProjectEndpoint object at 0x7f7cb59ce150>
2026-01-28T09:24:33.6353757Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6353856Z embedder_name = 'facebook/esm2_t6_8M_UR50D'
2026-01-28T09:24:33.6363409Z test_sequences = {'protein_1': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLSGAEKAVQVKVKALPDAQFEVVHSLAKWKRQ', 'protein_2': 'MKKLVLS...KISDNLKAKIYAMHYVDVFYNKS', 'protein_3': 'MVHLTPEEKSAVTALWGKVNVDEVGGEALGRLLVVYPWTQRFFESFGDLSTPDAVMGNPKVKAHGKKVLGAFSDGLA'}
2026-01-28T09:24:33.6363605Z 
2026-01-28T09:24:33.6363707Z     @pytest.mark.integration
2026-01-28T09:24:33.6363802Z     def test_project_with_pca(
2026-01-28T09:24:33.6363866Z         self,
2026-01-28T09:24:33.6363928Z         client,
2026-01-28T09:24:33.6363999Z         embedder_name,
2026-01-28T09:24:33.6364074Z         test_sequences,
2026-01-28T09:24:33.6364133Z     ):
2026-01-28T09:24:33.6364241Z         """Test projection with PCA method."""
2026-01-28T09:24:33.6364320Z         request_data = {
2026-01-28T09:24:33.6364395Z             "method": "pca",
2026-01-28T09:24:33.6364492Z             "sequence_data": test_sequences,
2026-01-28T09:24:33.6364584Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6364657Z             "config": {
2026-01-28T09:24:33.6364732Z                 "n_components": 3,
2026-01-28T09:24:33.6364791Z             },
2026-01-28T09:24:33.6364851Z         }
2026-01-28T09:24:33.6364905Z     
2026-01-28T09:24:33.6365100Z         response = client.post("/projection_service/project", json=request_data)
2026-01-28T09:24:33.6365174Z     
2026-01-28T09:24:33.6365272Z >       assert response.status_code == 200
2026-01-28T09:24:33.6365346Z E       assert 404 == 200
2026-01-28T09:24:33.6365472Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6365479Z 
2026-01-28T09:24:33.6365672Z tests/integration/endpoints/test_project_flow.py:140: AssertionError
2026-01-28T09:24:33.6365841Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6366178Z 2026-01-28 09:24:33,156 INFO HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6366347Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6366697Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6366879Z __________________ TestProjectEndpoint.test_project_with_umap __________________
2026-01-28T09:24:33.6366889Z 
2026-01-28T09:24:33.6367104Z self = <endpoints.test_project_flow.TestProjectEndpoint object at 0x7f7cb59cdc70>
2026-01-28T09:24:33.6367210Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6367309Z embedder_name = 'facebook/esm2_t6_8M_UR50D'
2026-01-28T09:24:33.6368224Z diverse_test_sequences = {'all_standard_aa': 'ACDEFGHIKLMNPQRSTVWY', 'alpha_helix': 'AEEAAKAAEEAAKAAEEAAKAAEEAAK', 'gfp_core': 'SKGEELFTGVVPILVELDGDVNGHKFSVSGEGEGDATYGKLTLKFICTTGKLPVPWPTLVTTFSYGVQCFSRYPDHMK', 'insulin_b': 'FVNQHLCGSHLVEALYLVCGERGFFYTPKT', ...}
2026-01-28T09:24:33.6368234Z 
2026-01-28T09:24:33.6368317Z     @pytest.mark.integration
2026-01-28T09:24:33.6368396Z     def test_project_with_umap(
2026-01-28T09:24:33.6368463Z         self,
2026-01-28T09:24:33.6368528Z         client,
2026-01-28T09:24:33.6368596Z         embedder_name,
2026-01-28T09:24:33.6368672Z         diverse_test_sequences,
2026-01-28T09:24:33.6368738Z     ):
2026-01-28T09:24:33.6368835Z         """Test projection with UMAP method."""
2026-01-28T09:24:33.6368910Z         request_data = {
2026-01-28T09:24:33.6368988Z             "method": "umap",
2026-01-28T09:24:33.6369093Z             "sequence_data": diverse_test_sequences,
2026-01-28T09:24:33.6369183Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6369249Z             "config": {
2026-01-28T09:24:33.6369420Z                 "n_neighbors": min(5, len(diverse_test_sequences) - 1),
2026-01-28T09:24:33.6369494Z                 "min_dist": 0.1,
2026-01-28T09:24:33.6369570Z                 "n_components": 2,
2026-01-28T09:24:33.6369756Z             },
2026-01-28T09:24:33.6369817Z         }
2026-01-28T09:24:33.6369875Z     
2026-01-28T09:24:33.6370070Z         response = client.post("/projection_service/project", json=request_data)
2026-01-28T09:24:33.6370133Z     
2026-01-28T09:24:33.6370222Z >       assert response.status_code == 200
2026-01-28T09:24:33.6370293Z E       assert 404 == 200
2026-01-28T09:24:33.6370422Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6370504Z 
2026-01-28T09:24:33.6370682Z tests/integration/endpoints/test_project_flow.py:164: AssertionError
2026-01-28T09:24:33.6370839Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6371174Z 2026-01-28 09:24:33,163 INFO HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6371325Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6371655Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6371847Z __________________ TestProjectEndpoint.test_project_with_tsne __________________
2026-01-28T09:24:33.6371853Z 
2026-01-28T09:24:33.6372060Z self = <endpoints.test_project_flow.TestProjectEndpoint object at 0x7f7cb59cd8e0>
2026-01-28T09:24:33.6372167Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6372268Z embedder_name = 'facebook/esm2_t6_8M_UR50D'
2026-01-28T09:24:33.6373355Z test_sequences = {'protein_1': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLSGAEKAVQVKVKALPDAQFEVVHSLAKWKRQ', 'protein_2': 'MKKLVLS...KISDNLKAKIYAMHYVDVFYNKS', 'protein_3': 'MVHLTPEEKSAVTALWGKVNVDEVGGEALGRLLVVYPWTQRFFESFGDLSTPDAVMGNPKVKAHGKKVLGAFSDGLA'}
2026-01-28T09:24:33.6373363Z 
2026-01-28T09:24:33.6373446Z     @pytest.mark.integration
2026-01-28T09:24:33.6373531Z     def test_project_with_tsne(
2026-01-28T09:24:33.6373592Z         self,
2026-01-28T09:24:33.6373653Z         client,
2026-01-28T09:24:33.6373725Z         embedder_name,
2026-01-28T09:24:33.6373800Z         test_sequences,
2026-01-28T09:24:33.6373859Z     ):
2026-01-28T09:24:33.6373958Z         """Test projection with t-SNE method."""
2026-01-28T09:24:33.6374137Z         request_data = {
2026-01-28T09:24:33.6374253Z             "method": "tsne",
2026-01-28T09:24:33.6374405Z             "sequence_data": test_sequences,
2026-01-28T09:24:33.6374537Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6374606Z             "config": {
2026-01-28T09:24:33.6374684Z                 "n_components": 2,
2026-01-28T09:24:33.6374808Z                 "perplexity": min(2, len(test_sequences) - 1),
2026-01-28T09:24:33.6374873Z             },
2026-01-28T09:24:33.6374934Z         }
2026-01-28T09:24:33.6374993Z     
2026-01-28T09:24:33.6375182Z         response = client.post("/projection_service/project", json=request_data)
2026-01-28T09:24:33.6375240Z     
2026-01-28T09:24:33.6375328Z >       assert response.status_code == 200
2026-01-28T09:24:33.6375404Z E       assert 404 == 200
2026-01-28T09:24:33.6375528Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6375534Z 
2026-01-28T09:24:33.6375709Z tests/integration/endpoints/test_project_flow.py:187: AssertionError
2026-01-28T09:24:33.6375863Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6376186Z 2026-01-28 09:24:33,170 INFO HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6376341Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6376669Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6376873Z ______ TestProjectEndpoint.test_project_standard_sequences[standard_001] _______
2026-01-28T09:24:33.6376878Z 
2026-01-28T09:24:33.6377083Z self = <endpoints.test_project_flow.TestProjectEndpoint object at 0x7f7cb59f4380>
2026-01-28T09:24:33.6377322Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6377481Z embedder_name = 'facebook/esm2_t6_8M_UR50D', seq_id = 'standard_001'
2026-01-28T09:24:33.6377487Z 
2026-01-28T09:24:33.6377568Z     @pytest.mark.integration
2026-01-28T09:24:33.6377760Z     @pytest.mark.parametrize("seq_id", CANONICAL_STANDARD_IDS, ids=lambda x: x)
2026-01-28T09:24:33.6377855Z     def test_project_standard_sequences(
2026-01-28T09:24:33.6378022Z         self,
2026-01-28T09:24:33.6378083Z         client,
2026-01-28T09:24:33.6378159Z         embedder_name,
2026-01-28T09:24:33.6378249Z         seq_id,
2026-01-28T09:24:33.6378306Z     ):
2026-01-28T09:24:33.6378477Z         """Test projection with standard sequences from canonical dataset."""
2026-01-28T09:24:33.6378582Z         # Need at least 2 sequences for projection
2026-01-28T09:24:33.6378672Z         sequence = get_sequence_by_id(seq_id)
2026-01-28T09:24:33.6378922Z         sequence_2 = get_sequence_by_id("standard_001" if seq_id != "standard_001" else "standard_002")
2026-01-28T09:24:33.6378991Z     
2026-01-28T09:24:33.6379061Z         request_data = {
2026-01-28T09:24:33.6379133Z             "method": "pca",
2026-01-28T09:24:33.6379274Z             "sequence_data": {seq_id: sequence, "other": sequence_2},
2026-01-28T09:24:33.6379363Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6379446Z             "config": {"n_components": 2},
2026-01-28T09:24:33.6379510Z         }
2026-01-28T09:24:33.6379574Z     
2026-01-28T09:24:33.6379760Z         response = client.post("/projection_service/project", json=request_data)
2026-01-28T09:24:33.6379817Z     
2026-01-28T09:24:33.6379903Z >       assert response.status_code == 200
2026-01-28T09:24:33.6379976Z E       assert 404 == 200
2026-01-28T09:24:33.6380094Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6380099Z 
2026-01-28T09:24:33.6380272Z tests/integration/endpoints/test_project_flow.py:212: AssertionError
2026-01-28T09:24:33.6380475Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6380795Z 2026-01-28 09:24:33,178 INFO HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6380946Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6381285Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6381491Z ______ TestProjectEndpoint.test_project_standard_sequences[standard_002] _______
2026-01-28T09:24:33.6381496Z 
2026-01-28T09:24:33.6381701Z self = <endpoints.test_project_flow.TestProjectEndpoint object at 0x7f7cb59f6900>
2026-01-28T09:24:33.6381810Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6381962Z embedder_name = 'facebook/esm2_t6_8M_UR50D', seq_id = 'standard_002'
2026-01-28T09:24:33.6381968Z 
2026-01-28T09:24:33.6382047Z     @pytest.mark.integration
2026-01-28T09:24:33.6382247Z     @pytest.mark.parametrize("seq_id", CANONICAL_STANDARD_IDS, ids=lambda x: x)
2026-01-28T09:24:33.6382334Z     def test_project_standard_sequences(
2026-01-28T09:24:33.6382527Z         self,
2026-01-28T09:24:33.6382598Z         client,
2026-01-28T09:24:33.6382665Z         embedder_name,
2026-01-28T09:24:33.6382726Z         seq_id,
2026-01-28T09:24:33.6382783Z     ):
2026-01-28T09:24:33.6382964Z         """Test projection with standard sequences from canonical dataset."""
2026-01-28T09:24:33.6383062Z         # Need at least 2 sequences for projection
2026-01-28T09:24:33.6383155Z         sequence = get_sequence_by_id(seq_id)
2026-01-28T09:24:33.6383403Z         sequence_2 = get_sequence_by_id("standard_001" if seq_id != "standard_001" else "standard_002")
2026-01-28T09:24:33.6383461Z     
2026-01-28T09:24:33.6383531Z         request_data = {
2026-01-28T09:24:33.6383602Z             "method": "pca",
2026-01-28T09:24:33.6383743Z             "sequence_data": {seq_id: sequence, "other": sequence_2},
2026-01-28T09:24:33.6383946Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6384029Z             "config": {"n_components": 2},
2026-01-28T09:24:33.6384092Z         }
2026-01-28T09:24:33.6384149Z     
2026-01-28T09:24:33.6384332Z         response = client.post("/projection_service/project", json=request_data)
2026-01-28T09:24:33.6384390Z     
2026-01-28T09:24:33.6384482Z >       assert response.status_code == 200
2026-01-28T09:24:33.6384653Z E       assert 404 == 200
2026-01-28T09:24:33.6384770Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6384776Z 
2026-01-28T09:24:33.6384953Z tests/integration/endpoints/test_project_flow.py:212: AssertionError
2026-01-28T09:24:33.6385105Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6385420Z 2026-01-28 09:24:33,185 INFO HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6385575Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6385905Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6386104Z ______ TestProjectEndpoint.test_project_standard_sequences[standard_003] _______
2026-01-28T09:24:33.6386109Z 
2026-01-28T09:24:33.6386320Z self = <endpoints.test_project_flow.TestProjectEndpoint object at 0x7f7cb59f78f0>
2026-01-28T09:24:33.6386427Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6386575Z embedder_name = 'facebook/esm2_t6_8M_UR50D', seq_id = 'standard_003'
2026-01-28T09:24:33.6386580Z 
2026-01-28T09:24:33.6386664Z     @pytest.mark.integration
2026-01-28T09:24:33.6386851Z     @pytest.mark.parametrize("seq_id", CANONICAL_STANDARD_IDS, ids=lambda x: x)
2026-01-28T09:24:33.6386935Z     def test_project_standard_sequences(
2026-01-28T09:24:33.6387000Z         self,
2026-01-28T09:24:33.6387061Z         client,
2026-01-28T09:24:33.6387131Z         embedder_name,
2026-01-28T09:24:33.6387191Z         seq_id,
2026-01-28T09:24:33.6387254Z     ):
2026-01-28T09:24:33.6387421Z         """Test projection with standard sequences from canonical dataset."""
2026-01-28T09:24:33.6387519Z         # Need at least 2 sequences for projection
2026-01-28T09:24:33.6387616Z         sequence = get_sequence_by_id(seq_id)
2026-01-28T09:24:33.6387857Z         sequence_2 = get_sequence_by_id("standard_001" if seq_id != "standard_001" else "standard_002")
2026-01-28T09:24:33.6387921Z     
2026-01-28T09:24:33.6387991Z         request_data = {
2026-01-28T09:24:33.6388069Z             "method": "pca",
2026-01-28T09:24:33.6388203Z             "sequence_data": {seq_id: sequence, "other": sequence_2},
2026-01-28T09:24:33.6388285Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6388370Z             "config": {"n_components": 2},
2026-01-28T09:24:33.6388429Z         }
2026-01-28T09:24:33.6388488Z     
2026-01-28T09:24:33.6388672Z         response = client.post("/projection_service/project", json=request_data)
2026-01-28T09:24:33.6388734Z     
2026-01-28T09:24:33.6388818Z >       assert response.status_code == 200
2026-01-28T09:24:33.6388887Z E       assert 404 == 200
2026-01-28T09:24:33.6389006Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6389012Z 
2026-01-28T09:24:33.6389178Z tests/integration/endpoints/test_project_flow.py:212: AssertionError
2026-01-28T09:24:33.6389333Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6389647Z 2026-01-28 09:24:33,193 INFO HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6389795Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6390117Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6390322Z ____ TestProjectEndpoint.test_project_real_world_sequences[real_insulin_b] _____
2026-01-28T09:24:33.6390411Z 
2026-01-28T09:24:33.6390618Z self = <endpoints.test_project_flow.TestProjectEndpoint object at 0x7f7cb59f5cd0>
2026-01-28T09:24:33.6390720Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6390884Z embedder_name = 'facebook/esm2_t6_8M_UR50D', seq_id = 'real_insulin_b'
2026-01-28T09:24:33.6390889Z 
2026-01-28T09:24:33.6391039Z     @pytest.mark.integration
2026-01-28T09:24:33.6391231Z     @pytest.mark.parametrize("seq_id", CANONICAL_REAL_WORLD_IDS, ids=lambda x: x)
2026-01-28T09:24:33.6391324Z     def test_project_real_world_sequences(
2026-01-28T09:24:33.6391385Z         self,
2026-01-28T09:24:33.6391445Z         client,
2026-01-28T09:24:33.6391512Z         embedder_name,
2026-01-28T09:24:33.6391578Z         seq_id,
2026-01-28T09:24:33.6391636Z     ):
2026-01-28T09:24:33.6391839Z         """Test projection with real-world protein sequences from canonical dataset."""
2026-01-28T09:24:33.6391933Z         sequence = get_sequence_by_id(seq_id)
2026-01-28T09:24:33.6392202Z         sequence_2 = get_sequence_by_id("real_insulin_b" if seq_id != "real_insulin_b" else "real_ubiquitin")
2026-01-28T09:24:33.6392261Z     
2026-01-28T09:24:33.6392335Z         request_data = {
2026-01-28T09:24:33.6392506Z             "method": "pca",
2026-01-28T09:24:33.6392646Z             "sequence_data": {seq_id: sequence, "other": sequence_2},
2026-01-28T09:24:33.6392735Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6392822Z             "config": {"n_components": 2},
2026-01-28T09:24:33.6392880Z         }
2026-01-28T09:24:33.6392937Z     
2026-01-28T09:24:33.6393122Z         response = client.post("/projection_service/project", json=request_data)
2026-01-28T09:24:33.6393181Z     
2026-01-28T09:24:33.6393272Z >       assert response.status_code == 200
2026-01-28T09:24:33.6393340Z E       assert 404 == 200
2026-01-28T09:24:33.6393460Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6393465Z 
2026-01-28T09:24:33.6393637Z tests/integration/endpoints/test_project_flow.py:236: AssertionError
2026-01-28T09:24:33.6393786Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6394099Z 2026-01-28 09:24:33,201 INFO HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6394246Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6394572Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6394779Z ____ TestProjectEndpoint.test_project_real_world_sequences[real_ubiquitin] _____
2026-01-28T09:24:33.6394784Z 
2026-01-28T09:24:33.6394984Z self = <endpoints.test_project_flow.TestProjectEndpoint object at 0x7f7cb59f5eb0>
2026-01-28T09:24:33.6395083Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6395246Z embedder_name = 'facebook/esm2_t6_8M_UR50D', seq_id = 'real_ubiquitin'
2026-01-28T09:24:33.6395255Z 
2026-01-28T09:24:33.6395332Z     @pytest.mark.integration
2026-01-28T09:24:33.6395523Z     @pytest.mark.parametrize("seq_id", CANONICAL_REAL_WORLD_IDS, ids=lambda x: x)
2026-01-28T09:24:33.6395614Z     def test_project_real_world_sequences(
2026-01-28T09:24:33.6395677Z         self,
2026-01-28T09:24:33.6395737Z         client,
2026-01-28T09:24:33.6395808Z         embedder_name,
2026-01-28T09:24:33.6395879Z         seq_id,
2026-01-28T09:24:33.6395937Z     ):
2026-01-28T09:24:33.6396137Z         """Test projection with real-world protein sequences from canonical dataset."""
2026-01-28T09:24:33.6396232Z         sequence = get_sequence_by_id(seq_id)
2026-01-28T09:24:33.6396493Z         sequence_2 = get_sequence_by_id("real_insulin_b" if seq_id != "real_insulin_b" else "real_ubiquitin")
2026-01-28T09:24:33.6396555Z     
2026-01-28T09:24:33.6396628Z         request_data = {
2026-01-28T09:24:33.6396699Z             "method": "pca",
2026-01-28T09:24:33.6396830Z             "sequence_data": {seq_id: sequence, "other": sequence_2},
2026-01-28T09:24:33.6397041Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6397125Z             "config": {"n_components": 2},
2026-01-28T09:24:33.6397183Z         }
2026-01-28T09:24:33.6397240Z     
2026-01-28T09:24:33.6397422Z         response = client.post("/projection_service/project", json=request_data)
2026-01-28T09:24:33.6397621Z     
2026-01-28T09:24:33.6397708Z >       assert response.status_code == 200
2026-01-28T09:24:33.6397775Z E       assert 404 == 200
2026-01-28T09:24:33.6397893Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6397899Z 
2026-01-28T09:24:33.6398063Z tests/integration/endpoints/test_project_flow.py:236: AssertionError
2026-01-28T09:24:33.6398214Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6398525Z 2026-01-28 09:24:33,208 INFO HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6398681Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6399001Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6399206Z _____ TestProjectEndpoint.test_project_real_world_sequences[real_gfp_core] _____
2026-01-28T09:24:33.6399211Z 
2026-01-28T09:24:33.6399419Z self = <endpoints.test_project_flow.TestProjectEndpoint object at 0x7f7cb59f6090>
2026-01-28T09:24:33.6399519Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6399674Z embedder_name = 'facebook/esm2_t6_8M_UR50D', seq_id = 'real_gfp_core'
2026-01-28T09:24:33.6399679Z 
2026-01-28T09:24:33.6399760Z     @pytest.mark.integration
2026-01-28T09:24:33.6400127Z     @pytest.mark.parametrize("seq_id", CANONICAL_REAL_WORLD_IDS, ids=lambda x: x)
2026-01-28T09:24:33.6400254Z     def test_project_real_world_sequences(
2026-01-28T09:24:33.6400316Z         self,
2026-01-28T09:24:33.6400383Z         client,
2026-01-28T09:24:33.6400456Z         embedder_name,
2026-01-28T09:24:33.6400517Z         seq_id,
2026-01-28T09:24:33.6400574Z     ):
2026-01-28T09:24:33.6400786Z         """Test projection with real-world protein sequences from canonical dataset."""
2026-01-28T09:24:33.6400875Z         sequence = get_sequence_by_id(seq_id)
2026-01-28T09:24:33.6401139Z         sequence_2 = get_sequence_by_id("real_insulin_b" if seq_id != "real_insulin_b" else "real_ubiquitin")
2026-01-28T09:24:33.6401207Z     
2026-01-28T09:24:33.6401276Z         request_data = {
2026-01-28T09:24:33.6401348Z             "method": "pca",
2026-01-28T09:24:33.6401479Z             "sequence_data": {seq_id: sequence, "other": sequence_2},
2026-01-28T09:24:33.6401569Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6401651Z             "config": {"n_components": 2},
2026-01-28T09:24:33.6401712Z         }
2026-01-28T09:24:33.6401773Z     
2026-01-28T09:24:33.6401954Z         response = client.post("/projection_service/project", json=request_data)
2026-01-28T09:24:33.6402015Z     
2026-01-28T09:24:33.6402101Z >       assert response.status_code == 200
2026-01-28T09:24:33.6402174Z E       assert 404 == 200
2026-01-28T09:24:33.6402290Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6402296Z 
2026-01-28T09:24:33.6402566Z tests/integration/endpoints/test_project_flow.py:236: AssertionError
2026-01-28T09:24:33.6402729Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6403047Z 2026-01-28 09:24:33,216 INFO HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6403197Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6403533Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6403720Z ______________ TestProjectEndpoint.test_project_diverse_sequences ______________
2026-01-28T09:24:33.6403855Z 
2026-01-28T09:24:33.6404074Z self = <endpoints.test_project_flow.TestProjectEndpoint object at 0x7f7cb59f65d0>
2026-01-28T09:24:33.6404183Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6404272Z embedder_name = 'facebook/esm2_t6_8M_UR50D'
2026-01-28T09:24:33.6405173Z diverse_test_sequences = {'all_standard_aa': 'ACDEFGHIKLMNPQRSTVWY', 'alpha_helix': 'AEEAAKAAEEAAKAAEEAAKAAEEAAK', 'gfp_core': 'SKGEELFTGVVPILVELDGDVNGHKFSVSGEGEGDATYGKLTLKFICTTGKLPVPWPTLVTTFSYGVQCFSRYPDHMK', 'insulin_b': 'FVNQHLCGSHLVEALYLVCGERGFFYTPKT', ...}
2026-01-28T09:24:33.6405285Z 
2026-01-28T09:24:33.6405371Z     @pytest.mark.integration
2026-01-28T09:24:33.6405461Z     def test_project_diverse_sequences(
2026-01-28T09:24:33.6405522Z         self,
2026-01-28T09:24:33.6405586Z         client,
2026-01-28T09:24:33.6405654Z         embedder_name,
2026-01-28T09:24:33.6405731Z         diverse_test_sequences,
2026-01-28T09:24:33.6405789Z     ):
2026-01-28T09:24:33.6406000Z         """Test projection with diverse sequence collection from canonical dataset."""
2026-01-28T09:24:33.6406072Z         request_data = {
2026-01-28T09:24:33.6406143Z             "method": "pca",
2026-01-28T09:24:33.6406249Z             "sequence_data": diverse_test_sequences,
2026-01-28T09:24:33.6406331Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6406412Z             "config": {"n_components": 3},
2026-01-28T09:24:33.6406476Z         }
2026-01-28T09:24:33.6406552Z     
2026-01-28T09:24:33.6406732Z         response = client.post("/projection_service/project", json=request_data)
2026-01-28T09:24:33.6406793Z     
2026-01-28T09:24:33.6406882Z >       assert response.status_code == 200
2026-01-28T09:24:33.6406950Z E       assert 404 == 200
2026-01-28T09:24:33.6407067Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6407072Z 
2026-01-28T09:24:33.6407246Z tests/integration/endpoints/test_project_flow.py:256: AssertionError
2026-01-28T09:24:33.6407402Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6407714Z 2026-01-28 09:24:33,223 INFO HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6407869Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6408191Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6408385Z ___________ TestProjectEndpoint.test_project_invalid_method_rejected ___________
2026-01-28T09:24:33.6408390Z 
2026-01-28T09:24:33.6408598Z self = <endpoints.test_project_flow.TestProjectEndpoint object at 0x7f7cb59f6990>
2026-01-28T09:24:33.6408701Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6408788Z embedder_name = 'facebook/esm2_t6_8M_UR50D'
2026-01-28T09:24:33.6409106Z short_test_sequences = {'short_1': 'MKTAYIAKQR', 'short_2': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLS'}
2026-01-28T09:24:33.6409122Z 
2026-01-28T09:24:33.6409202Z     @pytest.mark.integration
2026-01-28T09:24:33.6409301Z     def test_project_invalid_method_rejected(
2026-01-28T09:24:33.6409364Z         self,
2026-01-28T09:24:33.6409430Z         client,
2026-01-28T09:24:33.6409499Z         embedder_name,
2026-01-28T09:24:33.6409574Z         short_test_sequences,
2026-01-28T09:24:33.6409641Z     ):
2026-01-28T09:24:33.6409817Z         """Test that invalid projection method is rejected with proper error."""
2026-01-28T09:24:33.6409886Z         request_data = {
2026-01-28T09:24:33.6409968Z             "method": "invalid_method_xyz",
2026-01-28T09:24:33.6410068Z             "sequence_data": short_test_sequences,
2026-01-28T09:24:33.6410149Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6410217Z             "config": {},
2026-01-28T09:24:33.6410282Z         }
2026-01-28T09:24:33.6410340Z     
2026-01-28T09:24:33.6410519Z         response = client.post("/projection_service/project", json=request_data)
2026-01-28T09:24:33.6410663Z     
2026-01-28T09:24:33.6410755Z >       assert response.status_code == 400
2026-01-28T09:24:33.6410823Z E       assert 404 == 400
2026-01-28T09:24:33.6410938Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6410944Z 
2026-01-28T09:24:33.6411118Z tests/integration/endpoints/test_project_flow.py:276: AssertionError
2026-01-28T09:24:33.6411344Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6411657Z 2026-01-28 09:24:33,230 INFO HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6411812Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6412140Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6412334Z __________ TestProjectEndpoint.test_project_empty_sequences_rejected ___________
2026-01-28T09:24:33.6412344Z 
2026-01-28T09:24:33.6412653Z self = <endpoints.test_project_flow.TestProjectEndpoint object at 0x7f7cb59f6c90>
2026-01-28T09:24:33.6412755Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6412844Z embedder_name = 'facebook/esm2_t6_8M_UR50D'
2026-01-28T09:24:33.6412849Z 
2026-01-28T09:24:33.6412932Z     @pytest.mark.integration
2026-01-28T09:24:33.6413036Z     def test_project_empty_sequences_rejected(
2026-01-28T09:24:33.6413096Z         self,
2026-01-28T09:24:33.6413161Z         client,
2026-01-28T09:24:33.6413229Z         embedder_name,
2026-01-28T09:24:33.6413287Z     ):
2026-01-28T09:24:33.6413445Z         """Test that empty sequence data is rejected with proper error."""
2026-01-28T09:24:33.6413525Z         request_data = {
2026-01-28T09:24:33.6413595Z             "method": "pca",
2026-01-28T09:24:33.6413670Z             "sequence_data": {},
2026-01-28T09:24:33.6413757Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6413831Z             "config": {},
2026-01-28T09:24:33.6413889Z         }
2026-01-28T09:24:33.6413947Z     
2026-01-28T09:24:33.6414130Z         response = client.post("/projection_service/project", json=request_data)
2026-01-28T09:24:33.6414188Z     
2026-01-28T09:24:33.6414263Z         # Should fail validation
2026-01-28T09:24:33.6414365Z >       assert response.status_code in (400, 422)
2026-01-28T09:24:33.6414440Z E       assert 404 in (400, 422)
2026-01-28T09:24:33.6414554Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6414559Z 
2026-01-28T09:24:33.6414734Z tests/integration/endpoints/test_project_flow.py:295: AssertionError
2026-01-28T09:24:33.6414887Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6415192Z 2026-01-28 09:24:33,238 INFO HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6415340Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6415669Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6415873Z ________ TestProjectionTaskLifecycle.test_projection_task_id_uniqueness ________
2026-01-28T09:24:33.6415878Z 
2026-01-28T09:24:33.6416118Z self = <endpoints.test_project_flow.TestProjectionTaskLifecycle object at 0x7f7cb59f70b0>
2026-01-28T09:24:33.6416228Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6416316Z embedder_name = 'facebook/esm2_t6_8M_UR50D'
2026-01-28T09:24:33.6417265Z test_sequences = {'protein_1': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLSGAEKAVQVKVKALPDAQFEVVHSLAKWKRQ', 'protein_2': 'MKKLVLS...KISDNLKAKIYAMHYVDVFYNKS', 'protein_3': 'MVHLTPEEKSAVTALWGKVNVDEVGGEALGRLLVVYPWTQRFFESFGDLSTPDAVMGNPKVKAHGKKVLGAFSDGLA'}
2026-01-28T09:24:33.6417276Z 
2026-01-28T09:24:33.6417354Z     @pytest.mark.integration
2026-01-28T09:24:33.6417441Z     def test_projection_task_id_uniqueness(
2026-01-28T09:24:33.6417617Z         self,
2026-01-28T09:24:33.6417684Z         client,
2026-01-28T09:24:33.6417752Z         embedder_name,
2026-01-28T09:24:33.6417819Z         test_sequences,
2026-01-28T09:24:33.6417884Z     ):
2026-01-28T09:24:33.6418049Z         """Test that multiple projection submissions get unique task IDs."""
2026-01-28T09:24:33.6418116Z         task_ids = set()
2026-01-28T09:24:33.6418275Z     
2026-01-28T09:24:33.6418352Z         for i in range(3):
2026-01-28T09:24:33.6418421Z             request_data = {
2026-01-28T09:24:33.6418492Z                 "method": "pca",
2026-01-28T09:24:33.6418584Z                 "sequence_data": test_sequences,
2026-01-28T09:24:33.6418671Z                 "embedder_name": embedder_name,
2026-01-28T09:24:33.6418757Z                 "config": {"n_components": 2},
2026-01-28T09:24:33.6418818Z             }
2026-01-28T09:24:33.6418880Z     
2026-01-28T09:24:33.6419071Z             response = client.post("/projection_service/project", json=request_data)
2026-01-28T09:24:33.6419165Z >           assert response.status_code == 200
2026-01-28T09:24:33.6419242Z E           assert 404 == 200
2026-01-28T09:24:33.6419363Z E            +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6419368Z 
2026-01-28T09:24:33.6419537Z tests/integration/endpoints/test_project_flow.py:322: AssertionError
2026-01-28T09:24:33.6419696Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6420008Z 2026-01-28 09:24:33,245 INFO HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6420156Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6420481Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6420679Z ____________ TestProjectionTaskLifecycle.test_task_status_endpoint _____________
2026-01-28T09:24:33.6420688Z 
2026-01-28T09:24:33.6420927Z self = <endpoints.test_project_flow.TestProjectionTaskLifecycle object at 0x7f7cb59ce270>
2026-01-28T09:24:33.6421033Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6421123Z embedder_name = 'facebook/esm2_t6_8M_UR50D'
2026-01-28T09:24:33.6421438Z short_test_sequences = {'short_1': 'MKTAYIAKQR', 'short_2': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLS'}
2026-01-28T09:24:33.6421447Z 
2026-01-28T09:24:33.6421531Z     @pytest.mark.integration
2026-01-28T09:24:33.6421613Z     def test_task_status_endpoint(
2026-01-28T09:24:33.6421672Z         self,
2026-01-28T09:24:33.6421732Z         client,
2026-01-28T09:24:33.6421808Z         embedder_name,
2026-01-28T09:24:33.6421880Z         short_test_sequences,
2026-01-28T09:24:33.6421938Z     ):
2026-01-28T09:24:33.6422046Z         """Test that task status can be retrieved."""
2026-01-28T09:24:33.6422115Z         request_data = {
2026-01-28T09:24:33.6422185Z             "method": "pca",
2026-01-28T09:24:33.6422282Z             "sequence_data": short_test_sequences,
2026-01-28T09:24:33.6422493Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6422577Z             "config": {"n_components": 2},
2026-01-28T09:24:33.6422639Z         }
2026-01-28T09:24:33.6422702Z     
2026-01-28T09:24:33.6422766Z         # Create task
2026-01-28T09:24:33.6422950Z         response = client.post("/projection_service/project", json=request_data)
2026-01-28T09:24:33.6423042Z >       assert response.status_code == 200
2026-01-28T09:24:33.6423116Z E       assert 404 == 200
2026-01-28T09:24:33.6423232Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6423238Z 
2026-01-28T09:24:33.6423407Z tests/integration/endpoints/test_project_flow.py:347: AssertionError
2026-01-28T09:24:33.6423562Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6423868Z 2026-01-28 09:24:33,252 INFO HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6424142Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6424471Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6424667Z ___________ TestEndToEndProjectionFlow.test_complete_projection_flow ___________
2026-01-28T09:24:33.6424771Z 
2026-01-28T09:24:33.6425007Z self = <endpoints.test_project_flow.TestEndToEndProjectionFlow object at 0x7f7cb59ce420>
2026-01-28T09:24:33.6425113Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6425260Z poll_task = <function poll_task.<locals>._poll at 0x7f7b0b5d8d60>
2026-01-28T09:24:33.6425348Z embedder_name = 'facebook/esm2_t6_8M_UR50D'
2026-01-28T09:24:33.6426254Z diverse_test_sequences = {'all_standard_aa': 'ACDEFGHIKLMNPQRSTVWY', 'alpha_helix': 'AEEAAKAAEEAAKAAEEAAKAAEEAAK', 'gfp_core': 'SKGEELFTGVVPILVELDGDVNGHKFSVSGEGEGDATYGKLTLKFICTTGKLPVPWPTLVTTFSYGVQCFSRYPDHMK', 'insulin_b': 'FVNQHLCGSHLVEALYLVCGERGFFYTPKT', ...}
2026-01-28T09:24:33.6426265Z 
2026-01-28T09:24:33.6426342Z     @pytest.mark.integration
2026-01-28T09:24:33.6426429Z     def test_complete_projection_flow(
2026-01-28T09:24:33.6426494Z         self,
2026-01-28T09:24:33.6426554Z         client,
2026-01-28T09:24:33.6426620Z         poll_task,
2026-01-28T09:24:33.6426686Z         embedder_name,
2026-01-28T09:24:33.6426772Z         diverse_test_sequences,
2026-01-28T09:24:33.6426831Z     ):
2026-01-28T09:24:33.6426986Z         """Test complete projection flow from request to completion."""
2026-01-28T09:24:33.6427062Z         request_data = {
2026-01-28T09:24:33.6427132Z             "method": "pca",
2026-01-28T09:24:33.6427231Z             "sequence_data": diverse_test_sequences,
2026-01-28T09:24:33.6427318Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6427399Z             "config": {"n_components": 2},
2026-01-28T09:24:33.6427457Z         }
2026-01-28T09:24:33.6427514Z     
2026-01-28T09:24:33.6427600Z         # Submit projection task
2026-01-28T09:24:33.6427780Z         response = client.post("/projection_service/project", json=request_data)
2026-01-28T09:24:33.6427865Z >       assert response.status_code == 200
2026-01-28T09:24:33.6427939Z E       assert 404 == 200
2026-01-28T09:24:33.6428053Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6428058Z 
2026-01-28T09:24:33.6428228Z tests/integration/endpoints/test_project_flow.py:381: AssertionError
2026-01-28T09:24:33.6428383Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6428695Z 2026-01-28 09:24:33,260 INFO HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6428849Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6429184Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6429384Z _____________ TestEndToEndProjectionFlow.test_umap_projection_flow _____________
2026-01-28T09:24:33.6429389Z 
2026-01-28T09:24:33.6429628Z self = <endpoints.test_project_flow.TestEndToEndProjectionFlow object at 0x7f7cb59f6b40>
2026-01-28T09:24:33.6429738Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6429887Z poll_task = <function poll_task.<locals>._poll at 0x7f7b0b5d8d60>
2026-01-28T09:24:33.6429987Z embedder_name = 'facebook/esm2_t6_8M_UR50D'
2026-01-28T09:24:33.6430885Z diverse_test_sequences = {'all_standard_aa': 'ACDEFGHIKLMNPQRSTVWY', 'alpha_helix': 'AEEAAKAAEEAAKAAEEAAKAAEEAAK', 'gfp_core': 'SKGEELFTGVVPILVELDGDVNGHKFSVSGEGEGDATYGKLTLKFICTTGKLPVPWPTLVTTFSYGVQCFSRYPDHMK', 'insulin_b': 'FVNQHLCGSHLVEALYLVCGERGFFYTPKT', ...}
2026-01-28T09:24:33.6430902Z 
2026-01-28T09:24:33.6430983Z     @pytest.mark.integration
2026-01-28T09:24:33.6431054Z     @pytest.mark.slow
2026-01-28T09:24:33.6431137Z     def test_umap_projection_flow(
2026-01-28T09:24:33.6431288Z         self,
2026-01-28T09:24:33.6431350Z         client,
2026-01-28T09:24:33.6431413Z         poll_task,
2026-01-28T09:24:33.6431487Z         embedder_name,
2026-01-28T09:24:33.6431562Z         diverse_test_sequences,
2026-01-28T09:24:33.6431623Z     ):
2026-01-28T09:24:33.6431767Z         """Test UMAP projection flow from request to completion."""
2026-01-28T09:24:33.6431844Z         request_data = {
2026-01-28T09:24:33.6431990Z             "method": "umap",
2026-01-28T09:24:33.6432091Z             "sequence_data": diverse_test_sequences,
2026-01-28T09:24:33.6432179Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6432245Z             "config": {
2026-01-28T09:24:33.6432486Z                 "n_neighbors": min(5, len(diverse_test_sequences) - 1),
2026-01-28T09:24:33.6432567Z                 "min_dist": 0.1,
2026-01-28T09:24:33.6432641Z                 "n_components": 2,
2026-01-28T09:24:33.6432701Z             },
2026-01-28T09:24:33.6432760Z         }
2026-01-28T09:24:33.6432823Z     
2026-01-28T09:24:33.6433012Z         response = client.post("/projection_service/project", json=request_data)
2026-01-28T09:24:33.6433099Z >       assert response.status_code == 200
2026-01-28T09:24:33.6433172Z E       assert 404 == 200
2026-01-28T09:24:33.6433291Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6433296Z 
2026-01-28T09:24:33.6433467Z tests/integration/endpoints/test_project_flow.py:413: AssertionError
2026-01-28T09:24:33.6433633Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6433952Z 2026-01-28 09:24:33,267 INFO HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6434101Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6434428Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6434643Z _____ TestEndToEndProjectionFlow.test_projection_with_different_embedders ______
2026-01-28T09:24:33.6434652Z 
2026-01-28T09:24:33.6434884Z self = <endpoints.test_project_flow.TestEndToEndProjectionFlow object at 0x7f7cb59f73e0>
2026-01-28T09:24:33.6434988Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6435941Z test_sequences = {'protein_1': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLSGAEKAVQVKVKALPDAQFEVVHSLAKWKRQ', 'protein_2': 'MKKLVLS...KISDNLKAKIYAMHYVDVFYNKS', 'protein_3': 'MVHLTPEEKSAVTALWGKVNVDEVGGEALGRLLVVYPWTQRFFESFGDLSTPDAVMGNPKVKAHGKKVLGAFSDGLA'}
2026-01-28T09:24:33.6435951Z 
2026-01-28T09:24:33.6436031Z     @pytest.mark.integration
2026-01-28T09:24:33.6436207Z     def test_projection_with_different_embedders(
2026-01-28T09:24:33.6436319Z         self,
2026-01-28T09:24:33.6436431Z         client,
2026-01-28T09:24:33.6436525Z         test_sequences,
2026-01-28T09:24:33.6436591Z     ):
2026-01-28T09:24:33.6436743Z         """Test that different embedders can be used for projection."""
2026-01-28T09:24:33.6436854Z         embedders = ["one_hot_encoding", "blosum62"]
2026-01-28T09:24:33.6436917Z     
2026-01-28T09:24:33.6436995Z         for embedder in embedders:
2026-01-28T09:24:33.6437066Z             request_data = {
2026-01-28T09:24:33.6437138Z                 "method": "pca",
2026-01-28T09:24:33.6437235Z                 "sequence_data": test_sequences,
2026-01-28T09:24:33.6437316Z                 "embedder_name": embedder,
2026-01-28T09:24:33.6437406Z                 "config": {"n_components": 2},
2026-01-28T09:24:33.6437471Z             }
2026-01-28T09:24:33.6437529Z     
2026-01-28T09:24:33.6437725Z             response = client.post("/projection_service/project", json=request_data)
2026-01-28T09:24:33.6437905Z >           assert response.status_code == 200, f"Failed for embedder: {embedder}"
2026-01-28T09:24:33.6438046Z E           AssertionError: Failed for embedder: one_hot_encoding
2026-01-28T09:24:33.6438118Z E           assert 404 == 200
2026-01-28T09:24:33.6438239Z E            +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6438368Z 
2026-01-28T09:24:33.6438550Z tests/integration/endpoints/test_project_flow.py:438: AssertionError
2026-01-28T09:24:33.6438704Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6439017Z 2026-01-28 09:24:33,275 INFO HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6439282Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6439608Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6439822Z ____ TestEndToEndProjectionFlow.test_projection_with_real_world_collection _____
2026-01-28T09:24:33.6439828Z 
2026-01-28T09:24:33.6440068Z self = <endpoints.test_project_flow.TestEndToEndProjectionFlow object at 0x7f7cb59f77d0>
2026-01-28T09:24:33.6440169Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6440319Z poll_task = <function poll_task.<locals>._poll at 0x7f7b0b5d8d60>
2026-01-28T09:24:33.6440414Z embedder_name = 'facebook/esm2_t6_8M_UR50D'
2026-01-28T09:24:33.6441368Z real_world_sequences = {'gfp_core': 'SKGEELFTGVVPILVELDGDVNGHKFSVSGEGEGDATYGKLTLKFICTTGKLPVPWPTLVTTFSYGVQCFSRYPDHMK', 'insulin_b': 'FVNQHLCGSHLVEALYLVCGERGFFYTPKT', 'ubiquitin': 'MQIFVKTLTGKTITLEVEPSDTIENVKAKIQDKEGIPPDQQRLIFAGKQLEDGRTLSDYNIQKESTLHLVLRLRGG'}
2026-01-28T09:24:33.6441379Z 
2026-01-28T09:24:33.6441459Z     @pytest.mark.integration
2026-01-28T09:24:33.6441573Z     def test_projection_with_real_world_collection(
2026-01-28T09:24:33.6441633Z         self,
2026-01-28T09:24:33.6441694Z         client,
2026-01-28T09:24:33.6441763Z         poll_task,
2026-01-28T09:24:33.6441830Z         embedder_name,
2026-01-28T09:24:33.6441903Z         real_world_sequences,
2026-01-28T09:24:33.6441965Z     ):
2026-01-28T09:24:33.6442122Z         """Test projection with collection of real-world sequences."""
2026-01-28T09:24:33.6442197Z         request_data = {
2026-01-28T09:24:33.6442269Z             "method": "pca",
2026-01-28T09:24:33.6442474Z             "sequence_data": real_world_sequences,
2026-01-28T09:24:33.6442561Z             "embedder_name": embedder_name,
2026-01-28T09:24:33.6442643Z             "config": {"n_components": 2},
2026-01-28T09:24:33.6442703Z         }
2026-01-28T09:24:33.6442767Z     
2026-01-28T09:24:33.6442954Z         response = client.post("/projection_service/project", json=request_data)
2026-01-28T09:24:33.6443040Z >       assert response.status_code == 200
2026-01-28T09:24:33.6443115Z E       assert 404 == 200
2026-01-28T09:24:33.6443231Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6443236Z 
2026-01-28T09:24:33.6443406Z tests/integration/endpoints/test_project_flow.py:458: AssertionError
2026-01-28T09:24:33.6443564Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6443875Z 2026-01-28 09:24:33,283 INFO HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6444028Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6444354Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/projection_service/project "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6444563Z _____ TestConfigOptionsEndpoint.test_get_config_options_for_classification _____
2026-01-28T09:24:33.6444572Z 
2026-01-28T09:24:33.6444840Z self = <endpoints.test_train_inference_flow.TestConfigOptionsEndpoint object at 0x7f7cb5bdd610>
2026-01-28T09:24:33.6444951Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6444956Z 
2026-01-28T09:24:33.6445034Z     @pytest.mark.integration
2026-01-28T09:24:33.6445180Z     def test_get_config_options_for_classification(self, client):
2026-01-28T09:24:33.6445343Z         """Test getting config options for sequence_to_class protocol."""
2026-01-28T09:24:33.6445670Z         response = client.get("/custom_models_service/config_options/sequence_to_class")
2026-01-28T09:24:33.6445731Z     
2026-01-28T09:24:33.6445816Z >       assert response.status_code == 200
2026-01-28T09:24:33.6445889Z E       assert 404 == 200
2026-01-28T09:24:33.6446006Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6446012Z 
2026-01-28T09:24:33.6446211Z tests/integration/endpoints/test_train_inference_flow.py:149: AssertionError
2026-01-28T09:24:33.6446477Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6446891Z 2026-01-28 09:24:33,290 INFO HTTP Request: GET http://localhost:9540/custom_models_service/config_options/sequence_to_class "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6447042Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6447466Z INFO     httpx:_client.py:1025 HTTP Request: GET http://localhost:9540/custom_models_service/config_options/sequence_to_class "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6447679Z _______ TestConfigOptionsEndpoint.test_get_config_options_for_regression _______
2026-01-28T09:24:33.6447684Z 
2026-01-28T09:24:33.6447940Z self = <endpoints.test_train_inference_flow.TestConfigOptionsEndpoint object at 0x7f7cb5bf3e90>
2026-01-28T09:24:33.6448046Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6448051Z 
2026-01-28T09:24:33.6448132Z     @pytest.mark.integration
2026-01-28T09:24:33.6448265Z     def test_get_config_options_for_regression(self, client):
2026-01-28T09:24:33.6448427Z         """Test getting config options for sequence_to_value protocol."""
2026-01-28T09:24:33.6448629Z         response = client.get("/custom_models_service/config_options/sequence_to_value")
2026-01-28T09:24:33.6448688Z     
2026-01-28T09:24:33.6448778Z >       assert response.status_code == 200
2026-01-28T09:24:33.6448847Z E       assert 404 == 200
2026-01-28T09:24:33.6448958Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6448965Z 
2026-01-28T09:24:33.6449158Z tests/integration/endpoints/test_train_inference_flow.py:159: AssertionError
2026-01-28T09:24:33.6449313Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6449711Z 2026-01-28 09:24:33,299 INFO HTTP Request: GET http://localhost:9540/custom_models_service/config_options/sequence_to_value "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6449868Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6450285Z INFO     httpx:_client.py:1025 HTTP Request: GET http://localhost:9540/custom_models_service/config_options/sequence_to_value "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6450489Z ______ TestConfigOptionsEndpoint.test_get_config_options_invalid_protocol ______
2026-01-28T09:24:33.6450495Z 
2026-01-28T09:24:33.6450750Z self = <endpoints.test_train_inference_flow.TestConfigOptionsEndpoint object at 0x7f7cb59cddf0>
2026-01-28T09:24:33.6450857Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6450867Z 
2026-01-28T09:24:33.6450945Z     @pytest.mark.integration
2026-01-28T09:24:33.6451082Z     def test_get_config_options_invalid_protocol(self, client):
2026-01-28T09:24:33.6451260Z         """Test getting config options for an invalid protocol returns error."""
2026-01-28T09:24:33.6451475Z         response = client.get("/custom_models_service/config_options/invalid_protocol_xyz")
2026-01-28T09:24:33.6451538Z     
2026-01-28T09:24:33.6451636Z         # Should return 400 for invalid protocol
2026-01-28T09:24:33.6451721Z >       assert response.status_code == 400
2026-01-28T09:24:33.6451789Z E       assert 404 == 400
2026-01-28T09:24:33.6451908Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6451914Z 
2026-01-28T09:24:33.6452106Z tests/integration/endpoints/test_train_inference_flow.py:169: AssertionError
2026-01-28T09:24:33.6452254Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6452858Z 2026-01-28 09:24:33,308 INFO HTTP Request: GET http://localhost:9540/custom_models_service/config_options/invalid_protocol_xyz "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6453013Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6453440Z INFO     httpx:_client.py:1025 HTTP Request: GET http://localhost:9540/custom_models_service/config_options/invalid_protocol_xyz "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6453802Z _______ TestVerifyConfigEndpoint.test_verify_valid_classification_config _______
2026-01-28T09:24:33.6453808Z 
2026-01-28T09:24:33.6454058Z self = <endpoints.test_train_inference_flow.TestVerifyConfigEndpoint object at 0x7f7cb59f7fb0>
2026-01-28T09:24:33.6454158Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6454510Z classification_config = {'batch_size': 2, 'embedder_name': 'facebook/esm2_t6_8M_UR50D', 'learning_rate': 0.001, 'num_epochs': 1, ...}
2026-01-28T09:24:33.6454522Z 
2026-01-28T09:24:33.6454607Z     @pytest.mark.integration
2026-01-28T09:24:33.6454818Z     def test_verify_valid_classification_config(self, client, classification_config):
2026-01-28T09:24:33.6454959Z         """Test verifying a valid classification configuration."""
2026-01-28T09:24:33.6455043Z         response = client.post(
2026-01-28T09:24:33.6455143Z             "/custom_models_service/verify_config/",
2026-01-28T09:24:33.6455261Z             json={"config_dict": classification_config}
2026-01-28T09:24:33.6455327Z         )
2026-01-28T09:24:33.6455385Z     
2026-01-28T09:24:33.6455472Z >       assert response.status_code == 200
2026-01-28T09:24:33.6455546Z E       assert 404 == 200
2026-01-28T09:24:33.6455661Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6455666Z 
2026-01-28T09:24:33.6455861Z tests/integration/endpoints/test_train_inference_flow.py:190: AssertionError
2026-01-28T09:24:33.6456015Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6456377Z 2026-01-28 09:24:33,317 INFO HTTP Request: POST http://localhost:9540/custom_models_service/verify_config/ "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6456528Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6456892Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/custom_models_service/verify_config/ "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6457103Z _________ TestVerifyConfigEndpoint.test_verify_valid_regression_config _________
2026-01-28T09:24:33.6457108Z 
2026-01-28T09:24:33.6457364Z self = <endpoints.test_train_inference_flow.TestVerifyConfigEndpoint object at 0x7f7cb59f7ad0>
2026-01-28T09:24:33.6457468Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6457806Z regression_config = {'batch_size': 2, 'embedder_name': 'facebook/esm2_t6_8M_UR50D', 'learning_rate': 0.001, 'num_epochs': 1, ...}
2026-01-28T09:24:33.6457812Z 
2026-01-28T09:24:33.6457894Z     @pytest.mark.integration
2026-01-28T09:24:33.6458077Z     def test_verify_valid_regression_config(self, client, regression_config):
2026-01-28T09:24:33.6458208Z         """Test verifying a valid regression configuration."""
2026-01-28T09:24:33.6458288Z         response = client.post(
2026-01-28T09:24:33.6458386Z             "/custom_models_service/verify_config/",
2026-01-28T09:24:33.6458481Z             json={"config_dict": regression_config}
2026-01-28T09:24:33.6458550Z         )
2026-01-28T09:24:33.6458609Z     
2026-01-28T09:24:33.6458696Z >       assert response.status_code == 200
2026-01-28T09:24:33.6458772Z E       assert 404 == 200
2026-01-28T09:24:33.6458885Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6458890Z 
2026-01-28T09:24:33.6459086Z tests/integration/endpoints/test_train_inference_flow.py:202: AssertionError
2026-01-28T09:24:33.6459241Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6459584Z 2026-01-28 09:24:33,326 INFO HTTP Request: POST http://localhost:9540/custom_models_service/verify_config/ "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6459846Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6460212Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/custom_models_service/verify_config/ "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6460411Z _________ TestVerifyConfigEndpoint.test_verify_invalid_protocol_config _________
2026-01-28T09:24:33.6460501Z 
2026-01-28T09:24:33.6460755Z self = <endpoints.test_train_inference_flow.TestVerifyConfigEndpoint object at 0x7f7cb59f79e0>
2026-01-28T09:24:33.6460863Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6460869Z 
2026-01-28T09:24:33.6460946Z     @pytest.mark.integration
2026-01-28T09:24:33.6461072Z     def test_verify_invalid_protocol_config(self, client):
2026-01-28T09:24:33.6461191Z         """Test verifying config with invalid protocol."""
2026-01-28T09:24:33.6461263Z         invalid_config = {
2026-01-28T09:24:33.6461361Z             "protocol": "invalid_protocol_xyz",
2026-01-28T09:24:33.6461450Z             "embedder_name": "invalid_embedder",
2026-01-28T09:24:33.6461514Z         }
2026-01-28T09:24:33.6461572Z     
2026-01-28T09:24:33.6461649Z         response = client.post(
2026-01-28T09:24:33.6461749Z             "/custom_models_service/verify_config/",
2026-01-28T09:24:33.6461835Z             json={"config_dict": invalid_config}
2026-01-28T09:24:33.6461899Z         )
2026-01-28T09:24:33.6461957Z     
2026-01-28T09:24:33.6462050Z >       assert response.status_code == 200
2026-01-28T09:24:33.6462120Z E       assert 404 == 200
2026-01-28T09:24:33.6462232Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6462237Z 
2026-01-28T09:24:33.6462566Z tests/integration/endpoints/test_train_inference_flow.py:219: AssertionError
2026-01-28T09:24:33.6462723Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6463070Z 2026-01-28 09:24:33,335 INFO HTTP Request: POST http://localhost:9540/custom_models_service/verify_config/ "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6463226Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6463579Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/custom_models_service/verify_config/ "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6463779Z __________ TestStartTrainingEndpoint.test_start_training_creates_task __________
2026-01-28T09:24:33.6463784Z 
2026-01-28T09:24:33.6464045Z self = <endpoints.test_train_inference_flow.TestStartTrainingEndpoint object at 0x7f7cb59fea50>
2026-01-28T09:24:33.6464144Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6464484Z classification_config = {'batch_size': 2, 'embedder_name': 'facebook/esm2_t6_8M_UR50D', 'learning_rate': 0.001, 'num_epochs': 1, ...}
2026-01-28T09:24:33.6465428Z classification_training_data = [{'label': 'membrane', 'seq_id': 'standard_001', 'sequence': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLSGAEKAVQ...ndard_003', 'sequence': 'MVHLTPEEKSAVTALWGKVNVDEVGGEALGRLLVVYPWTQRFFESFGDLSTPDAVMGNPKVKAHGKKVLGAFSDGLA', 'set': 'val'}]
2026-01-28T09:24:33.6465440Z 
2026-01-28T09:24:33.6465519Z     @pytest.mark.integration
2026-01-28T09:24:33.6465606Z     def test_start_training_creates_task(
2026-01-28T09:24:33.6465674Z         self,
2026-01-28T09:24:33.6465739Z         client,
2026-01-28T09:24:33.6465815Z         classification_config,
2026-01-28T09:24:33.6465901Z         classification_training_data,
2026-01-28T09:24:33.6465966Z     ):
2026-01-28T09:24:33.6466078Z         """Test that training request creates a task."""
2026-01-28T09:24:33.6466156Z         response = client.post(
2026-01-28T09:24:33.6466257Z             "/custom_models_service/start_training",
2026-01-28T09:24:33.6466319Z             json={
2026-01-28T09:24:33.6466417Z                 "config_dict": classification_config,
2026-01-28T09:24:33.6466537Z                 "training_data": classification_training_data,
2026-01-28T09:24:33.6466715Z             }
2026-01-28T09:24:33.6466773Z         )
2026-01-28T09:24:33.6466831Z     
2026-01-28T09:24:33.6466925Z >       assert response.status_code == 200
2026-01-28T09:24:33.6466994Z E       assert 404 == 200
2026-01-28T09:24:33.6467105Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6467110Z 
2026-01-28T09:24:33.6467416Z tests/integration/endpoints/test_train_inference_flow.py:251: AssertionError
2026-01-28T09:24:33.6467571Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6467910Z 2026-01-28 09:24:33,344 INFO HTTP Request: POST http://localhost:9540/custom_models_service/start_training "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6468063Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6468416Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/custom_models_service/start_training "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6468625Z _______ TestStartTrainingEndpoint.test_start_training_with_real_proteins _______
2026-01-28T09:24:33.6468629Z 
2026-01-28T09:24:33.6468891Z self = <endpoints.test_train_inference_flow.TestStartTrainingEndpoint object at 0x7f7cb59fd010>
2026-01-28T09:24:33.6468991Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6469331Z classification_config = {'batch_size': 2, 'embedder_name': 'facebook/esm2_t6_8M_UR50D', 'learning_rate': 0.001, 'num_epochs': 1, ...}
2026-01-28T09:24:33.6470194Z real_world_training_data = [{'label': 'hormone', 'seq_id': 'insulin_b', 'sequence': 'FVNQHLCGSHLVEALYLVCGERGFFYTPKT', 'set': 'train'}, {'label': ...gfp_core', 'sequence': 'SKGEELFTGVVPILVELDGDVNGHKFSVSGEGEGDATYGKLTLKFICTTGKLPVPWPTLVTTFSYGVQCFSRYPDHMK', 'set': 'val'}]
2026-01-28T09:24:33.6470201Z 
2026-01-28T09:24:33.6470279Z     @pytest.mark.integration
2026-01-28T09:24:33.6470379Z     def test_start_training_with_real_proteins(
2026-01-28T09:24:33.6470444Z         self,
2026-01-28T09:24:33.6470507Z         client,
2026-01-28T09:24:33.6470584Z         classification_config,
2026-01-28T09:24:33.6470662Z         real_world_training_data,
2026-01-28T09:24:33.6470728Z     ):
2026-01-28T09:24:33.6470838Z         """Test training with real protein sequences."""
2026-01-28T09:24:33.6470913Z         response = client.post(
2026-01-28T09:24:33.6471014Z             "/custom_models_service/start_training",
2026-01-28T09:24:33.6471080Z             json={
2026-01-28T09:24:33.6471176Z                 "config_dict": classification_config,
2026-01-28T09:24:33.6471284Z                 "training_data": real_world_training_data,
2026-01-28T09:24:33.6471343Z             }
2026-01-28T09:24:33.6471403Z         )
2026-01-28T09:24:33.6471461Z     
2026-01-28T09:24:33.6471553Z >       assert response.status_code == 200
2026-01-28T09:24:33.6471627Z E       assert 404 == 200
2026-01-28T09:24:33.6471739Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6471749Z 
2026-01-28T09:24:33.6471948Z tests/integration/endpoints/test_train_inference_flow.py:272: AssertionError
2026-01-28T09:24:33.6472101Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6472543Z 2026-01-28 09:24:33,353 INFO HTTP Request: POST http://localhost:9540/custom_models_service/start_training "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6472702Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6473059Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/custom_models_service/start_training "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6473258Z ___________ TestStartTrainingEndpoint.test_start_regression_training ___________
2026-01-28T09:24:33.6473264Z 
2026-01-28T09:24:33.6473523Z self = <endpoints.test_train_inference_flow.TestStartTrainingEndpoint object at 0x7f7cb59fce60>
2026-01-28T09:24:33.6473625Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6473954Z regression_config = {'batch_size': 2, 'embedder_name': 'facebook/esm2_t6_8M_UR50D', 'learning_rate': 0.001, 'num_epochs': 1, ...}
2026-01-28T09:24:33.6475001Z regression_training_data = [{'label': '0.75', 'seq_id': 'standard_001', 'sequence': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLSGAEKAVQVKVK...ndard_003', 'sequence': 'MVHLTPEEKSAVTALWGKVNVDEVGGEALGRLLVVYPWTQRFFESFGDLSTPDAVMGNPKVKAHGKKVLGAFSDGLA', 'set': 'val'}]
2026-01-28T09:24:33.6475104Z 
2026-01-28T09:24:33.6475185Z     @pytest.mark.integration
2026-01-28T09:24:33.6475274Z     def test_start_regression_training(
2026-01-28T09:24:33.6475340Z         self,
2026-01-28T09:24:33.6475400Z         client,
2026-01-28T09:24:33.6475473Z         regression_config,
2026-01-28T09:24:33.6475553Z         regression_training_data,
2026-01-28T09:24:33.6475617Z     ):
2026-01-28T09:24:33.6475713Z         """Test training with regression task."""
2026-01-28T09:24:33.6475790Z         response = client.post(
2026-01-28T09:24:33.6475891Z             "/custom_models_service/start_training",
2026-01-28T09:24:33.6475958Z             json={
2026-01-28T09:24:33.6476046Z                 "config_dict": regression_config,
2026-01-28T09:24:33.6476151Z                 "training_data": regression_training_data,
2026-01-28T09:24:33.6476221Z             }
2026-01-28T09:24:33.6476280Z         )
2026-01-28T09:24:33.6476337Z     
2026-01-28T09:24:33.6476425Z >       assert response.status_code == 200
2026-01-28T09:24:33.6476505Z E       assert 404 == 200
2026-01-28T09:24:33.6476619Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6476624Z 
2026-01-28T09:24:33.6476821Z tests/integration/endpoints/test_train_inference_flow.py:292: AssertionError
2026-01-28T09:24:33.6476979Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6477322Z 2026-01-28 09:24:33,361 INFO HTTP Request: POST http://localhost:9540/custom_models_service/start_training "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6477471Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6477834Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/custom_models_service/start_training "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6478042Z ______ TestStartTrainingEndpoint.test_start_training_empty_data_rejected _______
2026-01-28T09:24:33.6478048Z 
2026-01-28T09:24:33.6478301Z self = <endpoints.test_train_inference_flow.TestStartTrainingEndpoint object at 0x7f7cb59fc4d0>
2026-01-28T09:24:33.6478413Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6478754Z classification_config = {'batch_size': 2, 'embedder_name': 'facebook/esm2_t6_8M_UR50D', 'learning_rate': 0.001, 'num_epochs': 1, ...}
2026-01-28T09:24:33.6478760Z 
2026-01-28T09:24:33.6478837Z     @pytest.mark.integration
2026-01-28T09:24:33.6478942Z     def test_start_training_empty_data_rejected(
2026-01-28T09:24:33.6479001Z         self,
2026-01-28T09:24:33.6479062Z         client,
2026-01-28T09:24:33.6479142Z         classification_config,
2026-01-28T09:24:33.6479206Z     ):
2026-01-28T09:24:33.6479315Z         """Test that empty training data is rejected."""
2026-01-28T09:24:33.6479393Z         response = client.post(
2026-01-28T09:24:33.6479495Z             "/custom_models_service/start_training",
2026-01-28T09:24:33.6479556Z             json={
2026-01-28T09:24:33.6479651Z                 "config_dict": classification_config,
2026-01-28T09:24:33.6479737Z                 "training_data": [],
2026-01-28T09:24:33.6479797Z             }
2026-01-28T09:24:33.6479856Z         )
2026-01-28T09:24:33.6479914Z     
2026-01-28T09:24:33.6480015Z         # Should be rejected with validation error
2026-01-28T09:24:33.6480102Z >       assert response.status_code == 422
2026-01-28T09:24:33.6480171Z E       assert 404 == 422
2026-01-28T09:24:33.6480292Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6480297Z 
2026-01-28T09:24:33.6480524Z tests/integration/endpoints/test_train_inference_flow.py:312: AssertionError
2026-01-28T09:24:33.6480762Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6481107Z 2026-01-28 09:24:33,370 INFO HTTP Request: POST http://localhost:9540/custom_models_service/start_training "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6481256Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6481682Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/custom_models_service/start_training "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6481888Z _________ TestStartTrainingEndpoint.test_start_training_invalid_config _________
2026-01-28T09:24:33.6481894Z 
2026-01-28T09:24:33.6482148Z self = <endpoints.test_train_inference_flow.TestStartTrainingEndpoint object at 0x7f7cb59fc9b0>
2026-01-28T09:24:33.6482249Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6483290Z classification_training_data = [{'label': 'membrane', 'seq_id': 'standard_001', 'sequence': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLSGAEKAVQ...ndard_003', 'sequence': 'MVHLTPEEKSAVTALWGKVNVDEVGGEALGRLLVVYPWTQRFFESFGDLSTPDAVMGNPKVKAHGKKVLGAFSDGLA', 'set': 'val'}]
2026-01-28T09:24:33.6483303Z 
2026-01-28T09:24:33.6483381Z     @pytest.mark.integration
2026-01-28T09:24:33.6483473Z     def test_start_training_invalid_config(
2026-01-28T09:24:33.6483540Z         self,
2026-01-28T09:24:33.6483601Z         client,
2026-01-28T09:24:33.6483692Z         classification_training_data,
2026-01-28T09:24:33.6483750Z     ):
2026-01-28T09:24:33.6483869Z         """Test that invalid configuration is rejected."""
2026-01-28T09:24:33.6483945Z         response = client.post(
2026-01-28T09:24:33.6484040Z             "/custom_models_service/start_training",
2026-01-28T09:24:33.6484106Z             json={
2026-01-28T09:24:33.6484180Z                 "config_dict": {
2026-01-28T09:24:33.6484273Z                     "protocol": "invalid_protocol",
2026-01-28T09:24:33.6484358Z                     "embedder_name": "invalid",
2026-01-28T09:24:33.6484427Z                 },
2026-01-28T09:24:33.6484542Z                 "training_data": classification_training_data,
2026-01-28T09:24:33.6484603Z             }
2026-01-28T09:24:33.6484670Z         )
2026-01-28T09:24:33.6484728Z     
2026-01-28T09:24:33.6484802Z         # Should be rejected
2026-01-28T09:24:33.6484902Z >       assert response.status_code in [400, 422]
2026-01-28T09:24:33.6484978Z E       assert 404 in [400, 422]
2026-01-28T09:24:33.6485089Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6485094Z 
2026-01-28T09:24:33.6485289Z tests/integration/endpoints/test_train_inference_flow.py:333: AssertionError
2026-01-28T09:24:33.6485445Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6485789Z 2026-01-28 09:24:33,380 INFO HTTP Request: POST http://localhost:9540/custom_models_service/start_training "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6485936Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6486297Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/custom_models_service/start_training "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6486508Z ___ TestStartInferenceEndpoint.test_start_inference_empty_sequences_rejected ___
2026-01-28T09:24:33.6486513Z 
2026-01-28T09:24:33.6486775Z self = <endpoints.test_train_inference_flow.TestStartInferenceEndpoint object at 0x7f7cb59ffa40>
2026-01-28T09:24:33.6486886Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6486891Z 
2026-01-28T09:24:33.6486969Z     @pytest.mark.integration
2026-01-28T09:24:33.6487127Z     def test_start_inference_empty_sequences_rejected(self, client):
2026-01-28T09:24:33.6487240Z         """Test that empty sequence data is rejected."""
2026-01-28T09:24:33.6487316Z         response = client.post(
2026-01-28T09:24:33.6487415Z             "/custom_models_service/start_inference",
2026-01-28T09:24:33.6487481Z             json={
2026-01-28T09:24:33.6487683Z                 "model_hash": "some-model",
2026-01-28T09:24:33.6487759Z                 "sequence_data": {},
2026-01-28T09:24:33.6487821Z             }
2026-01-28T09:24:33.6487886Z         )
2026-01-28T09:24:33.6487943Z     
2026-01-28T09:24:33.6488041Z         # Should be rejected with validation error
2026-01-28T09:24:33.6488133Z >       assert response.status_code == 422
2026-01-28T09:24:33.6488302Z E       assert 404 == 422
2026-01-28T09:24:33.6488414Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6488419Z 
2026-01-28T09:24:33.6488617Z tests/integration/endpoints/test_train_inference_flow.py:378: AssertionError
2026-01-28T09:24:33.6488769Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6489115Z 2026-01-28 09:24:33,392 INFO HTTP Request: POST http://localhost:9540/custom_models_service/start_inference "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6489270Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6489632Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/custom_models_service/start_inference "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6489843Z ___ TestStartInferenceEndpoint.test_start_inference_with_standard_sequences ____
2026-01-28T09:24:33.6489847Z 
2026-01-28T09:24:33.6490112Z self = <endpoints.test_train_inference_flow.TestStartInferenceEndpoint object at 0x7f7cb5bf3ef0>
2026-01-28T09:24:33.6490219Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6490224Z 
2026-01-28T09:24:33.6490302Z     @pytest.mark.integration
2026-01-28T09:24:33.6490413Z     def test_start_inference_with_standard_sequences(
2026-01-28T09:24:33.6490481Z         self,
2026-01-28T09:24:33.6490541Z         client,
2026-01-28T09:24:33.6490599Z     ):
2026-01-28T09:24:33.6490706Z         """Test inference with standard sequences."""
2026-01-28T09:24:33.6490783Z         response = client.post(
2026-01-28T09:24:33.6490877Z             "/custom_models_service/start_inference",
2026-01-28T09:24:33.6490947Z             json={
2026-01-28T09:24:33.6491040Z                 "model_hash": "trained-model-123",
2026-01-28T09:24:33.6491132Z >               "sequence_data": STANDARD_SEQUENCES,
2026-01-28T09:24:33.6491192Z             }
2026-01-28T09:24:33.6491256Z         )
2026-01-28T09:24:33.6491380Z E       NameError: name 'STANDARD_SEQUENCES' is not defined
2026-01-28T09:24:33.6491391Z 
2026-01-28T09:24:33.6491572Z tests/integration/endpoints/test_train_inference_flow.py:390: NameError
2026-01-28T09:24:33.6491773Z ____________ TestTrainingTaskLifecycle.test_training_task_completes ____________
2026-01-28T09:24:33.6491778Z 
2026-01-28T09:24:33.6492033Z self = <endpoints.test_train_inference_flow.TestTrainingTaskLifecycle object at 0x7f7cb59fcdd0>
2026-01-28T09:24:33.6492133Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6492288Z poll_task = <function poll_task.<locals>._poll at 0x7f7b0b5d8d60>
2026-01-28T09:24:33.6492741Z classification_config = {'batch_size': 2, 'embedder_name': 'facebook/esm2_t6_8M_UR50D', 'learning_rate': 0.001, 'num_epochs': 1, ...}
2026-01-28T09:24:33.6493679Z classification_training_data = [{'label': 'membrane', 'seq_id': 'standard_001', 'sequence': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLSGAEKAVQ...ndard_003', 'sequence': 'MVHLTPEEKSAVTALWGKVNVDEVGGEALGRLLVVYPWTQRFFESFGDLSTPDAVMGNPKVKAHGKKVLGAFSDGLA', 'set': 'val'}]
2026-01-28T09:24:33.6493689Z 
2026-01-28T09:24:33.6493772Z     @pytest.mark.integration
2026-01-28T09:24:33.6493844Z     @pytest.mark.slow
2026-01-28T09:24:33.6493931Z     def test_training_task_completes(
2026-01-28T09:24:33.6493996Z         self,
2026-01-28T09:24:33.6494057Z         client,
2026-01-28T09:24:33.6494120Z         poll_task,
2026-01-28T09:24:33.6494195Z         classification_config,
2026-01-28T09:24:33.6494284Z         classification_training_data,
2026-01-28T09:24:33.6494342Z     ):
2026-01-28T09:24:33.6494460Z         """Test that training task eventually completes."""
2026-01-28T09:24:33.6494655Z         # Start training
2026-01-28T09:24:33.6494731Z         response = client.post(
2026-01-28T09:24:33.6494827Z             "/custom_models_service/start_training",
2026-01-28T09:24:33.6494888Z             json={
2026-01-28T09:24:33.6494986Z                 "config_dict": classification_config,
2026-01-28T09:24:33.6495101Z                 "training_data": classification_training_data,
2026-01-28T09:24:33.6495264Z             }
2026-01-28T09:24:33.6495328Z         )
2026-01-28T09:24:33.6495386Z     
2026-01-28T09:24:33.6495475Z >       assert response.status_code == 200
2026-01-28T09:24:33.6495549Z E       assert 404 == 200
2026-01-28T09:24:33.6495662Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6495668Z 
2026-01-28T09:24:33.6495862Z tests/integration/endpoints/test_train_inference_flow.py:477: AssertionError
2026-01-28T09:24:33.6496012Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6496368Z 2026-01-28 09:24:33,416 INFO HTTP Request: POST http://localhost:9540/custom_models_service/start_training "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6496517Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6496872Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/custom_models_service/start_training "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6497087Z ________ TestEndToEndTrainInferenceFlow.test_train_then_inference_flow _________
2026-01-28T09:24:33.6497092Z 
2026-01-28T09:24:33.6497376Z self = <endpoints.test_train_inference_flow.TestEndToEndTrainInferenceFlow object at 0x7f7cb5812b10>
2026-01-28T09:24:33.6497478Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6497628Z poll_task = <function poll_task.<locals>._poll at 0x7f7b0b5d8d60>
2026-01-28T09:24:33.6497972Z classification_config = {'batch_size': 2, 'embedder_name': 'facebook/esm2_t6_8M_UR50D', 'learning_rate': 0.001, 'num_epochs': 1, ...}
2026-01-28T09:24:33.6498912Z classification_training_data = [{'label': 'membrane', 'seq_id': 'standard_001', 'sequence': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLSGAEKAVQ...ndard_003', 'sequence': 'MVHLTPEEKSAVTALWGKVNVDEVGGEALGRLLVVYPWTQRFFESFGDLSTPDAVMGNPKVKAHGKKVLGAFSDGLA', 'set': 'val'}]
2026-01-28T09:24:33.6499846Z inference_sequences = {'infer_1': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLSGAEKAVQVKVKALPDAQFEVVHSLAKWKRQ', 'infer_2': 'FVNQHLCGSHLVEALYLVCGERGFFYTPKT', 'infer_3': 'MQIFVKTLTGKTITLEVEPSDTIENVKAKIQDKEGIPPDQQRLIFAGKQLEDGRTLSDYNIQKESTLHLVLRLRGG'}
2026-01-28T09:24:33.6499856Z 
2026-01-28T09:24:33.6499936Z     @pytest.mark.integration
2026-01-28T09:24:33.6500012Z     @pytest.mark.slow
2026-01-28T09:24:33.6500098Z     def test_train_then_inference_flow(
2026-01-28T09:24:33.6500159Z         self,
2026-01-28T09:24:33.6500219Z         client,
2026-01-28T09:24:33.6500290Z         poll_task,
2026-01-28T09:24:33.6500365Z         classification_config,
2026-01-28T09:24:33.6500449Z         classification_training_data,
2026-01-28T09:24:33.6500533Z         inference_sequences,
2026-01-28T09:24:33.6500591Z     ):
2026-01-28T09:24:33.6500697Z         """Test complete train then inference flow."""
2026-01-28T09:24:33.6500774Z         # Step 1: Start training
2026-01-28T09:24:33.6500866Z         train_response = client.post(
2026-01-28T09:24:33.6500964Z             "/custom_models_service/start_training",
2026-01-28T09:24:33.6501029Z             json={
2026-01-28T09:24:33.6501130Z                 "config_dict": classification_config,
2026-01-28T09:24:33.6501243Z                 "training_data": classification_training_data,
2026-01-28T09:24:33.6501303Z             }
2026-01-28T09:24:33.6501371Z         )
2026-01-28T09:24:33.6501429Z     
2026-01-28T09:24:33.6501526Z >       assert train_response.status_code == 200
2026-01-28T09:24:33.6501595Z E       assert 404 == 200
2026-01-28T09:24:33.6501714Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6501719Z 
2026-01-28T09:24:33.6502003Z tests/integration/endpoints/test_train_inference_flow.py:517: AssertionError
2026-01-28T09:24:33.6502157Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6502712Z 2026-01-28 09:24:33,425 INFO HTTP Request: POST http://localhost:9540/custom_models_service/start_training "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6502865Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6503336Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/custom_models_service/start_training "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6503556Z _____ TestEndToEndTrainInferenceFlow.test_regression_train_inference_flow ______
2026-01-28T09:24:33.6503561Z 
2026-01-28T09:24:33.6503842Z self = <endpoints.test_train_inference_flow.TestEndToEndTrainInferenceFlow object at 0x7f7cb5812f90>
2026-01-28T09:24:33.6503944Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6504094Z poll_task = <function poll_task.<locals>._poll at 0x7f7b0b5d8d60>
2026-01-28T09:24:33.6504427Z regression_config = {'batch_size': 2, 'embedder_name': 'facebook/esm2_t6_8M_UR50D', 'learning_rate': 0.001, 'num_epochs': 1, ...}
2026-01-28T09:24:33.6505349Z regression_training_data = [{'label': '0.75', 'seq_id': 'standard_001', 'sequence': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLSGAEKAVQVKVK...ndard_003', 'sequence': 'MVHLTPEEKSAVTALWGKVNVDEVGGEALGRLLVVYPWTQRFFESFGDLSTPDAVMGNPKVKAHGKKVLGAFSDGLA', 'set': 'val'}]
2026-01-28T09:24:33.6506288Z inference_sequences = {'infer_1': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLSGAEKAVQVKVKALPDAQFEVVHSLAKWKRQ', 'infer_2': 'FVNQHLCGSHLVEALYLVCGERGFFYTPKT', 'infer_3': 'MQIFVKTLTGKTITLEVEPSDTIENVKAKIQDKEGIPPDQQRLIFAGKQLEDGRTLSDYNIQKESTLHLVLRLRGG'}
2026-01-28T09:24:33.6506294Z 
2026-01-28T09:24:33.6506373Z     @pytest.mark.integration
2026-01-28T09:24:33.6506444Z     @pytest.mark.slow
2026-01-28T09:24:33.6506547Z     def test_regression_train_inference_flow(
2026-01-28T09:24:33.6506612Z         self,
2026-01-28T09:24:33.6506672Z         client,
2026-01-28T09:24:33.6506741Z         poll_task,
2026-01-28T09:24:33.6506814Z         regression_config,
2026-01-28T09:24:33.6506892Z         regression_training_data,
2026-01-28T09:24:33.6506964Z         inference_sequences,
2026-01-28T09:24:33.6507027Z     ):
2026-01-28T09:24:33.6507142Z         """Test regression training and inference flow."""
2026-01-28T09:24:33.6507224Z         # Start regression training
2026-01-28T09:24:33.6507315Z         train_response = client.post(
2026-01-28T09:24:33.6507412Z             "/custom_models_service/start_training",
2026-01-28T09:24:33.6507474Z             json={
2026-01-28T09:24:33.6507564Z                 "config_dict": regression_config,
2026-01-28T09:24:33.6507676Z                 "training_data": regression_training_data,
2026-01-28T09:24:33.6507736Z             }
2026-01-28T09:24:33.6507796Z         )
2026-01-28T09:24:33.6507863Z     
2026-01-28T09:24:33.6507959Z >       assert train_response.status_code == 200
2026-01-28T09:24:33.6508032Z E       assert 404 == 200
2026-01-28T09:24:33.6508147Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6508156Z 
2026-01-28T09:24:33.6508351Z tests/integration/endpoints/test_train_inference_flow.py:564: AssertionError
2026-01-28T09:24:33.6508503Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6508850Z 2026-01-28 09:24:33,434 INFO HTTP Request: POST http://localhost:9540/custom_models_service/start_training "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6509005Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6509361Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/custom_models_service/start_training "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6509570Z ______ TestEndToEndTrainInferenceFlow.test_get_model_files_after_training ______
2026-01-28T09:24:33.6509581Z 
2026-01-28T09:24:33.6509858Z self = <endpoints.test_train_inference_flow.TestEndToEndTrainInferenceFlow object at 0x7f7cb5813380>
2026-01-28T09:24:33.6510109Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6510254Z poll_task = <function poll_task.<locals>._poll at 0x7f7b0b5d8d60>
2026-01-28T09:24:33.6510602Z classification_config = {'batch_size': 2, 'embedder_name': 'facebook/esm2_t6_8M_UR50D', 'learning_rate': 0.001, 'num_epochs': 1, ...}
2026-01-28T09:24:33.6511614Z classification_training_data = [{'label': 'membrane', 'seq_id': 'standard_001', 'sequence': 'MKTAYIAKQRQISFVKSHFSRQLEERLGLIEVQAPILSRVGDGTQDNLSGAEKAVQ...ndard_003', 'sequence': 'MVHLTPEEKSAVTALWGKVNVDEVGGEALGRLLVVYPWTQRFFESFGDLSTPDAVMGNPKVKAHGKKVLGAFSDGLA', 'set': 'val'}]
2026-01-28T09:24:33.6511620Z 
2026-01-28T09:24:33.6511704Z     @pytest.mark.integration
2026-01-28T09:24:33.6511775Z     @pytest.mark.slow
2026-01-28T09:24:33.6511870Z     def test_get_model_files_after_training(
2026-01-28T09:24:33.6511930Z         self,
2026-01-28T09:24:33.6511995Z         client,
2026-01-28T09:24:33.6512063Z         poll_task,
2026-01-28T09:24:33.6512138Z         classification_config,
2026-01-28T09:24:33.6512224Z         classification_training_data,
2026-01-28T09:24:33.6512286Z     ):
2026-01-28T09:24:33.6512532Z         """Test retrieving model files after training completes."""
2026-01-28T09:24:33.6512602Z         # Train a model
2026-01-28T09:24:33.6512688Z         train_response = client.post(
2026-01-28T09:24:33.6512792Z             "/custom_models_service/start_training",
2026-01-28T09:24:33.6512853Z             json={
2026-01-28T09:24:33.6512955Z                 "config_dict": classification_config,
2026-01-28T09:24:33.6513071Z                 "training_data": classification_training_data,
2026-01-28T09:24:33.6513131Z             }
2026-01-28T09:24:33.6513195Z         )
2026-01-28T09:24:33.6513252Z     
2026-01-28T09:24:33.6513348Z >       assert train_response.status_code == 200
2026-01-28T09:24:33.6513417Z E       assert 404 == 200
2026-01-28T09:24:33.6513533Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6513544Z 
2026-01-28T09:24:33.6513739Z tests/integration/endpoints/test_train_inference_flow.py:607: AssertionError
2026-01-28T09:24:33.6513891Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6514238Z 2026-01-28 09:24:33,443 INFO HTTP Request: POST http://localhost:9540/custom_models_service/start_training "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6514393Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6514748Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/custom_models_service/start_training "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6514954Z ________ TestTrainingDataValidation.test_training_with_train_val_split _________
2026-01-28T09:24:33.6514960Z 
2026-01-28T09:24:33.6515226Z self = <endpoints.test_train_inference_flow.TestTrainingDataValidation object at 0x7f7cb58136e0>
2026-01-28T09:24:33.6515332Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6515680Z classification_config = {'batch_size': 2, 'embedder_name': 'facebook/esm2_t6_8M_UR50D', 'learning_rate': 0.001, 'num_epochs': 1, ...}
2026-01-28T09:24:33.6515685Z 
2026-01-28T09:24:33.6515762Z     @pytest.mark.integration
2026-01-28T09:24:33.6515854Z     def test_training_with_train_val_split(
2026-01-28T09:24:33.6515919Z         self,
2026-01-28T09:24:33.6515983Z         client,
2026-01-28T09:24:33.6516058Z         classification_config,
2026-01-28T09:24:33.6516117Z     ):
2026-01-28T09:24:33.6516234Z         """Test training with proper train/val split."""
2026-01-28T09:24:33.6516378Z         # Data with explicit train/val split using canonical dataset
2026-01-28T09:24:33.6516449Z         training_data = [
2026-01-28T09:24:33.6516783Z             {"seq_id": "train_1", "sequence": CANONICAL_TEST_DATASET.get_by_id("standard_001").sequence, "label": "A", "set": "train"},
2026-01-28T09:24:33.6517101Z             {"seq_id": "train_2", "sequence": CANONICAL_TEST_DATASET.get_by_id("standard_002").sequence, "label": "B", "set": "train"},
2026-01-28T09:24:33.6517539Z             {"seq_id": "train_3", "sequence": CANONICAL_TEST_DATASET.get_by_id("standard_003").sequence, "label": "A", "set": "train"},
2026-01-28T09:24:33.6517858Z             {"seq_id": "val_1", "sequence": CANONICAL_TEST_DATASET.get_by_id("real_insulin_b").sequence, "label": "B", "set": "val"},
2026-01-28T09:24:33.6518021Z         ]
2026-01-28T09:24:33.6518081Z     
2026-01-28T09:24:33.6518166Z         response = client.post(
2026-01-28T09:24:33.6518266Z             "/custom_models_service/start_training",
2026-01-28T09:24:33.6518329Z             json={
2026-01-28T09:24:33.6518425Z                 "config_dict": classification_config,
2026-01-28T09:24:33.6518522Z                 "training_data": training_data,
2026-01-28T09:24:33.6518582Z             }
2026-01-28T09:24:33.6518640Z         )
2026-01-28T09:24:33.6518702Z     
2026-01-28T09:24:33.6518790Z >       assert response.status_code == 200
2026-01-28T09:24:33.6518865Z E       assert 404 == 200
2026-01-28T09:24:33.6518979Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6518993Z 
2026-01-28T09:24:33.6519188Z tests/integration/endpoints/test_train_inference_flow.py:662: AssertionError
2026-01-28T09:24:33.6519338Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6519689Z 2026-01-28 09:24:33,452 INFO HTTP Request: POST http://localhost:9540/custom_models_service/start_training "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6519842Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6520198Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/custom_models_service/start_training "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6520400Z ________ TestTrainingDataValidation.test_training_with_multiple_classes ________
2026-01-28T09:24:33.6520411Z 
2026-01-28T09:24:33.6520676Z self = <endpoints.test_train_inference_flow.TestTrainingDataValidation object at 0x7f7cb5813ad0>
2026-01-28T09:24:33.6520779Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6521122Z classification_config = {'batch_size': 2, 'embedder_name': 'facebook/esm2_t6_8M_UR50D', 'learning_rate': 0.001, 'num_epochs': 1, ...}
2026-01-28T09:24:33.6521134Z 
2026-01-28T09:24:33.6521212Z     @pytest.mark.integration
2026-01-28T09:24:33.6521313Z     def test_training_with_multiple_classes(
2026-01-28T09:24:33.6521374Z         self,
2026-01-28T09:24:33.6521439Z         client,
2026-01-28T09:24:33.6521514Z         classification_config,
2026-01-28T09:24:33.6521572Z     ):
2026-01-28T09:24:33.6521677Z         """Test training with multiple classes."""
2026-01-28T09:24:33.6521749Z         training_data = [
2026-01-28T09:24:33.6522080Z             {"seq_id": "s1", "sequence": CANONICAL_TEST_DATASET.get_by_id("standard_001").sequence, "label": "class_A", "set": "train"},
2026-01-28T09:24:33.6522496Z             {"seq_id": "s2", "sequence": CANONICAL_TEST_DATASET.get_by_id("standard_002").sequence, "label": "class_B", "set": "train"},
2026-01-28T09:24:33.6522820Z             {"seq_id": "s3", "sequence": CANONICAL_TEST_DATASET.get_by_id("standard_003").sequence, "label": "class_C", "set": "train"},
2026-01-28T09:24:33.6523137Z             {"seq_id": "s4", "sequence": CANONICAL_TEST_DATASET.get_by_id("real_insulin_b").sequence, "label": "class_A", "set": "val"},
2026-01-28T09:24:33.6523201Z         ]
2026-01-28T09:24:33.6523264Z     
2026-01-28T09:24:33.6523341Z         response = client.post(
2026-01-28T09:24:33.6523438Z             "/custom_models_service/start_training",
2026-01-28T09:24:33.6523508Z             json={
2026-01-28T09:24:33.6523605Z                 "config_dict": classification_config,
2026-01-28T09:24:33.6523692Z                 "training_data": training_data,
2026-01-28T09:24:33.6523752Z             }
2026-01-28T09:24:33.6523815Z         )
2026-01-28T09:24:33.6523872Z     
2026-01-28T09:24:33.6524108Z >       assert response.status_code == 200
2026-01-28T09:24:33.6524182Z E       assert 404 == 200
2026-01-28T09:24:33.6524297Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6524302Z 
2026-01-28T09:24:33.6524496Z tests/integration/endpoints/test_train_inference_flow.py:686: AssertionError
2026-01-28T09:24:33.6524652Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6525101Z 2026-01-28 09:24:33,461 INFO HTTP Request: POST http://localhost:9540/custom_models_service/start_training "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6525254Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6525620Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/custom_models_service/start_training "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6525819Z _________ TestTrainingDataValidation.test_training_with_long_sequences _________
2026-01-28T09:24:33.6525824Z 
2026-01-28T09:24:33.6526090Z self = <endpoints.test_train_inference_flow.TestTrainingDataValidation object at 0x7f7cb5813ec0>
2026-01-28T09:24:33.6526197Z client = <httpx.Client object at 0x7f7b0ccd2060>
2026-01-28T09:24:33.6526540Z classification_config = {'batch_size': 2, 'embedder_name': 'facebook/esm2_t6_8M_UR50D', 'learning_rate': 0.001, 'num_epochs': 1, ...}
2026-01-28T09:24:33.6526546Z 
2026-01-28T09:24:33.6526624Z     @pytest.mark.integration
2026-01-28T09:24:33.6526722Z     def test_training_with_long_sequences(
2026-01-28T09:24:33.6526782Z         self,
2026-01-28T09:24:33.6526843Z         client,
2026-01-28T09:24:33.6526917Z         classification_config,
2026-01-28T09:24:33.6526980Z     ):
2026-01-28T09:24:33.6527077Z         """Test training with longer sequences."""
2026-01-28T09:24:33.6527174Z         # Use long sequences from canonical dataset
2026-01-28T09:24:33.6527353Z         long_seq = CANONICAL_TEST_DATASET.get_by_id("length_long_200").sequence
2026-01-28T09:24:33.6527554Z         very_long_seq = CANONICAL_TEST_DATASET.get_by_id("length_very_long_400").sequence
2026-01-28T09:24:33.6527617Z     
2026-01-28T09:24:33.6527688Z         training_data = [
2026-01-28T09:24:33.6527851Z             {"seq_id": "long_1", "sequence": long_seq, "label": "A", "set": "train"},
2026-01-28T09:24:33.6528024Z             {"seq_id": "long_2", "sequence": very_long_seq, "label": "B", "set": "train"},
2026-01-28T09:24:33.6528185Z             {"seq_id": "long_3", "sequence": long_seq[:100], "label": "A", "set": "val"},
2026-01-28T09:24:33.6528256Z         ]
2026-01-28T09:24:33.6528313Z     
2026-01-28T09:24:33.6528392Z         response = client.post(
2026-01-28T09:24:33.6528495Z             "/custom_models_service/start_training",
2026-01-28T09:24:33.6528557Z             json={
2026-01-28T09:24:33.6528653Z                 "config_dict": classification_config,
2026-01-28T09:24:33.6528739Z                 "training_data": training_data,
2026-01-28T09:24:33.6528803Z             }
2026-01-28T09:24:33.6528862Z         )
2026-01-28T09:24:33.6528926Z     
2026-01-28T09:24:33.6529017Z >       assert response.status_code == 200
2026-01-28T09:24:33.6529086Z E       assert 404 == 200
2026-01-28T09:24:33.6529200Z E        +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6529205Z 
2026-01-28T09:24:33.6529407Z tests/integration/endpoints/test_train_inference_flow.py:713: AssertionError
2026-01-28T09:24:33.6529560Z ----------------------------- Captured stdout call -----------------------------
2026-01-28T09:24:33.6529906Z 2026-01-28 09:24:33,470 INFO HTTP Request: POST http://localhost:9540/custom_models_service/start_training "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6530061Z ------------------------------ Captured log call -------------------------------
2026-01-28T09:24:33.6530417Z INFO     httpx:_client.py:1025 HTTP Request: POST http://localhost:9540/custom_models_service/start_training "HTTP/1.1 404 Not Found"
2026-01-28T09:24:33.6530531Z =============================== warnings summary ===============================
2026-01-28T09:24:33.6530765Z .venv/lib/python3.12/site-packages/torch/jit/_script.py:1480
2026-01-28T09:24:33.6530917Z .venv/lib/python3.12/site-packages/torch/jit/_script.py:1480
2026-01-28T09:24:33.6531674Z   /home/runner/work/biocentral_server/biocentral_server/.venv/lib/python3.12/site-packages/torch/jit/_script.py:1480: DeprecationWarning: `torch.jit.script` is deprecated. Please switch to `torch.compile` or `torch.export`.
2026-01-28T09:24:33.6531822Z     warnings.warn(
2026-01-28T09:24:33.6531832Z 
2026-01-28T09:24:33.6531920Z <frozen importlib._bootstrap>:488
2026-01-28T09:24:33.6532232Z   <frozen importlib._bootstrap>:488: DeprecationWarning: builtin type SwigPyPacked has no __module__ attribute
2026-01-28T09:24:33.6532238Z 
2026-01-28T09:24:33.6532320Z <frozen importlib._bootstrap>:488
2026-01-28T09:24:33.6532719Z   <frozen importlib._bootstrap>:488: DeprecationWarning: builtin type SwigPyObject has no __module__ attribute
2026-01-28T09:24:33.6532725Z 
2026-01-28T09:24:33.6532913Z .venv/lib/python3.12/site-packages/matplotlib/_fontconfig_pattern.py:64
2026-01-28T09:24:33.6533520Z   /home/runner/work/biocentral_server/biocentral_server/.venv/lib/python3.12/site-packages/matplotlib/_fontconfig_pattern.py:64: PyparsingDeprecationWarning: 'oneOf' deprecated - use 'one_of'
2026-01-28T09:24:33.6533721Z     prop = Group((name + Suppress("=") + comma_separated(value)) | oneOf(_CONSTANTS))
2026-01-28T09:24:33.6533733Z 
2026-01-28T09:24:33.6533910Z .venv/lib/python3.12/site-packages/matplotlib/_fontconfig_pattern.py:85
2026-01-28T09:24:33.6534086Z .venv/lib/python3.12/site-packages/matplotlib/_fontconfig_pattern.py:85
2026-01-28T09:24:33.6534253Z .venv/lib/python3.12/site-packages/matplotlib/_fontconfig_pattern.py:85
2026-01-28T09:24:33.6534419Z .venv/lib/python3.12/site-packages/matplotlib/_fontconfig_pattern.py:85
2026-01-28T09:24:33.6534586Z .venv/lib/python3.12/site-packages/matplotlib/_fontconfig_pattern.py:85
2026-01-28T09:24:33.6534757Z .venv/lib/python3.12/site-packages/matplotlib/_fontconfig_pattern.py:85
2026-01-28T09:24:33.6535403Z   /home/runner/work/biocentral_server/biocentral_server/.venv/lib/python3.12/site-packages/matplotlib/_fontconfig_pattern.py:85: PyparsingDeprecationWarning: 'parseString' deprecated - use 'parse_string'
2026-01-28T09:24:33.6535499Z     parse = parser.parseString(pattern)
2026-01-28T09:24:33.6535505Z 
2026-01-28T09:24:33.6535677Z .venv/lib/python3.12/site-packages/matplotlib/_fontconfig_pattern.py:89
2026-01-28T09:24:33.6535846Z .venv/lib/python3.12/site-packages/matplotlib/_fontconfig_pattern.py:89
2026-01-28T09:24:33.6536013Z .venv/lib/python3.12/site-packages/matplotlib/_fontconfig_pattern.py:89
2026-01-28T09:24:33.6536184Z .venv/lib/python3.12/site-packages/matplotlib/_fontconfig_pattern.py:89
2026-01-28T09:24:33.6536349Z .venv/lib/python3.12/site-packages/matplotlib/_fontconfig_pattern.py:89
2026-01-28T09:24:33.6536514Z .venv/lib/python3.12/site-packages/matplotlib/_fontconfig_pattern.py:89
2026-01-28T09:24:33.6537145Z   /home/runner/work/biocentral_server/biocentral_server/.venv/lib/python3.12/site-packages/matplotlib/_fontconfig_pattern.py:89: PyparsingDeprecationWarning: 'resetCache' deprecated - use 'reset_cache'
2026-01-28T09:24:33.6537228Z     parser.resetCache()
2026-01-28T09:24:33.6537233Z 
2026-01-28T09:24:33.6537378Z .venv/lib/python3.12/site-packages/matplotlib/_mathtext.py:45
2026-01-28T09:24:33.6537998Z   /home/runner/work/biocentral_server/biocentral_server/.venv/lib/python3.12/site-packages/matplotlib/_mathtext.py:45: PyparsingDeprecationWarning: 'enablePackrat' deprecated - use 'enable_packrat'
2026-01-28T09:24:33.6538092Z     ParserElement.enablePackrat()
2026-01-28T09:24:33.6538098Z 
2026-01-28T09:24:33.6538272Z -- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
2026-01-28T09:24:33.6538406Z =========================== short test summary info ============================
2026-01-28T09:24:33.6538850Z FAILED tests/integration/endpoints/test_embed_flow.py::TestCommonEmbeddersEndpoint::test_common_embedders_returns_list - assert 404 == 200
2026-01-28T09:24:33.6539088Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6539565Z FAILED tests/integration/endpoints/test_embed_flow.py::TestCommonEmbeddersEndpoint::test_common_embedders_includes_baseline_models - assert 404 == 200
2026-01-28T09:24:33.6539676Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6540125Z FAILED tests/integration/endpoints/test_embed_flow.py::TestCommonEmbeddersEndpoint::test_common_embedders_response_is_consistent - assert 404 == 200
2026-01-28T09:24:33.6540333Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6540692Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_request_creates_task - assert 404 == 200
2026-01-28T09:24:33.6540793Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6541180Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_task_completes_successfully - assert 404 == 200
2026-01-28T09:24:33.6541284Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6541645Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_request_with_reduction - assert 404 == 200
2026-01-28T09:24:33.6541748Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6542099Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_multiple_sequences - assert 404 == 200
2026-01-28T09:24:33.6542207Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6542715Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_real_world_sequences[real_insulin_b] - assert 404 == 200
2026-01-28T09:24:33.6542823Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6543234Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_real_world_sequences[real_ubiquitin] - assert 404 == 200
2026-01-28T09:24:33.6543335Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6543749Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_real_world_sequences[real_gfp_core] - assert 404 == 200
2026-01-28T09:24:33.6543851Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6544272Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_length_edge_case_sequences[length_min_1] - assert 404 == 200
2026-01-28T09:24:33.6544383Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6544801Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_length_edge_case_sequences[length_min_2] - assert 404 == 200
2026-01-28T09:24:33.6544901Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6545331Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_length_edge_case_sequences[length_short_5] - assert 404 == 200
2026-01-28T09:24:33.6545429Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6545861Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_length_edge_case_sequences[length_short_10] - assert 404 == 200
2026-01-28T09:24:33.6545965Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6546393Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_length_edge_case_sequences[length_medium_50] - assert 404 == 200
2026-01-28T09:24:33.6546496Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6546927Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_length_edge_case_sequences[length_long_200] - assert 404 == 200
2026-01-28T09:24:33.6547026Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6547461Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_sequences_with_unknown_tokens[unknown_single] - assert 404 == 200
2026-01-28T09:24:33.6547683Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6548131Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_sequences_with_unknown_tokens[unknown_multiple] - assert 404 == 200
2026-01-28T09:24:33.6548233Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6548669Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_sequences_with_unknown_tokens[unknown_start] - assert 404 == 200
2026-01-28T09:24:33.6548867Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6549295Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_sequences_with_unknown_tokens[unknown_end] - assert 404 == 200
2026-01-28T09:24:33.6549400Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6549833Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_sequences_with_unknown_tokens[unknown_middle] - assert 404 == 200
2026-01-28T09:24:33.6549941Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6550395Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_sequences_with_unknown_tokens[unknown_scattered] - assert 404 == 200
2026-01-28T09:24:33.6550494Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6550945Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_sequences_with_unknown_tokens[unknown_high_ratio] - assert 404 == 200
2026-01-28T09:24:33.6551057Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6551486Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_sequences_with_ambiguous_codes[ambiguous_B] - assert 404 == 200
2026-01-28T09:24:33.6551584Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6552015Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_sequences_with_ambiguous_codes[ambiguous_Z] - assert 404 == 200
2026-01-28T09:24:33.6552118Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6552643Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_sequences_with_ambiguous_codes[ambiguous_J] - assert 404 == 200
2026-01-28T09:24:33.6552748Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6553199Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_sequences_with_ambiguous_codes[selenocysteine] - assert 404 == 200
2026-01-28T09:24:33.6553298Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6553733Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_sequences_with_ambiguous_codes[pyrrolysine] - assert 404 == 200
2026-01-28T09:24:33.6553832Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6554200Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_empty_sequences_rejected - assert 404 == 422
2026-01-28T09:24:33.6554301Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6554697Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEmbedEndpoint::test_embed_missing_embedder_name_rejected - assert 404 == 422
2026-01-28T09:24:33.6554795Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6555250Z FAILED tests/integration/endpoints/test_embed_flow.py::TestGetMissingEmbeddingsEndpoint::test_get_missing_embeddings_new_sequences - assert 404 == 200
2026-01-28T09:24:33.6555353Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6555711Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEmbedTaskLifecycle::test_task_id_is_valid_uuid - assert 404 == 200
2026-01-28T09:24:33.6555809Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6556202Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEmbedTaskLifecycle::test_multiple_tasks_get_unique_ids - assert 404 == 200
2026-01-28T09:24:33.6556419Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6556778Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEmbedTaskLifecycle::test_task_status_endpoint - assert 404 == 200
2026-01-28T09:24:33.6556885Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6557261Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEndToEndEmbedFlow::test_embed_and_wait_for_completion - assert 404 == 200
2026-01-28T09:24:33.6557462Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6557827Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEndToEndEmbedFlow::test_embed_diverse_sequences - assert 404 == 200
2026-01-28T09:24:33.6557925Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6558440Z FAILED tests/integration/endpoints/test_embed_flow.py::TestEndToEndEmbedFlow::test_embed_with_different_embedders - AssertionError: Failed for embedder: one_hot_encoding
2026-01-28T09:24:33.6558522Z assert 404 == 200
2026-01-28T09:24:33.6558620Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6558991Z FAILED tests/integration/endpoints/test_predict_flow.py::TestModelMetadataEndpoint::test_get_model_metadata - assert 404 == 200
2026-01-28T09:24:33.6559095Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6559506Z FAILED tests/integration/endpoints/test_predict_flow.py::TestModelMetadataEndpoint::test_model_metadata_structure - KeyError: 'metadata'
2026-01-28T09:24:33.6559897Z FAILED tests/integration/endpoints/test_predict_flow.py::TestModelMetadataEndpoint::test_model_metadata_consistent - assert 404 == 200
2026-01-28T09:24:33.6560005Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6560365Z FAILED tests/integration/endpoints/test_predict_flow.py::TestPredictEndpoint::test_predict_creates_task - KeyError: 'metadata'
2026-01-28T09:24:33.6560735Z FAILED tests/integration/endpoints/test_predict_flow.py::TestPredictEndpoint::test_predict_task_completes - KeyError: 'metadata'
2026-01-28T09:24:33.6561116Z FAILED tests/integration/endpoints/test_predict_flow.py::TestPredictEndpoint::test_predict_multiple_models - KeyError: 'metadata'
2026-01-28T09:24:33.6561556Z FAILED tests/integration/endpoints/test_predict_flow.py::TestPredictEndpoint::test_predict_real_world_sequences[real_insulin_b] - KeyError: 'metadata'
2026-01-28T09:24:33.6562001Z FAILED tests/integration/endpoints/test_predict_flow.py::TestPredictEndpoint::test_predict_real_world_sequences[real_ubiquitin] - KeyError: 'metadata'
2026-01-28T09:24:33.6562540Z FAILED tests/integration/endpoints/test_predict_flow.py::TestPredictEndpoint::test_predict_real_world_sequences[real_gfp_core] - KeyError: 'metadata'
2026-01-28T09:24:33.6562973Z FAILED tests/integration/endpoints/test_predict_flow.py::TestPredictEndpoint::test_predict_standard_sequences[standard_001] - KeyError: 'metadata'
2026-01-28T09:24:33.6563401Z FAILED tests/integration/endpoints/test_predict_flow.py::TestPredictEndpoint::test_predict_standard_sequences[standard_002] - KeyError: 'metadata'
2026-01-28T09:24:33.6563837Z FAILED tests/integration/endpoints/test_predict_flow.py::TestPredictEndpoint::test_predict_standard_sequences[standard_003] - KeyError: 'metadata'
2026-01-28T09:24:33.6564218Z FAILED tests/integration/endpoints/test_predict_flow.py::TestPredictEndpoint::test_predict_invalid_model_rejected - assert 404 == 200
2026-01-28T09:24:33.6564323Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6564719Z FAILED tests/integration/endpoints/test_predict_flow.py::TestPredictEndpoint::test_predict_empty_sequences_rejected - assert 404 == 422
2026-01-28T09:24:33.6564819Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6565203Z FAILED tests/integration/endpoints/test_predict_flow.py::TestPredictEndpoint::test_predict_short_sequence_rejected - assert 404 == 422
2026-01-28T09:24:33.6565306Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6565820Z FAILED tests/integration/endpoints/test_predict_flow.py::TestPredictEndpoint::test_predict_empty_model_names_rejected - assert 404 == 422
2026-01-28T09:24:33.6565919Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6566353Z FAILED tests/integration/endpoints/test_predict_flow.py::TestPredictionTaskLifecycle::test_prediction_task_id_uniqueness - KeyError: 'metadata'
2026-01-28T09:24:33.6566853Z FAILED tests/integration/endpoints/test_predict_flow.py::TestPredictionTaskLifecycle::test_task_status_endpoint - KeyError: 'metadata'
2026-01-28T09:24:33.6567261Z FAILED tests/integration/endpoints/test_predict_flow.py::TestEndToEndPredictionFlow::test_complete_prediction_flow - KeyError: 'metadata'
2026-01-28T09:24:33.6567675Z FAILED tests/integration/endpoints/test_predict_flow.py::TestEndToEndPredictionFlow::test_predict_diverse_sequences - KeyError: 'metadata'
2026-01-28T09:24:33.6568126Z FAILED tests/integration/endpoints/test_predict_flow.py::TestEndToEndPredictionFlow::test_prediction_with_valid_boundary_length - KeyError: 'metadata'
2026-01-28T09:24:33.6568524Z FAILED tests/integration/endpoints/test_project_flow.py::TestProjectionConfigEndpoint::test_get_projection_config - assert 404 == 200
2026-01-28T09:24:33.6568633Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6569100Z FAILED tests/integration/endpoints/test_project_flow.py::TestProjectionConfigEndpoint::test_projection_config_contains_common_methods - assert 404 == 200
2026-01-28T09:24:33.6569206Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6569629Z FAILED tests/integration/endpoints/test_project_flow.py::TestProjectionConfigEndpoint::test_projection_config_consistent - assert 404 == 200
2026-01-28T09:24:33.6569729Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6570085Z FAILED tests/integration/endpoints/test_project_flow.py::TestProjectEndpoint::test_project_creates_task - assert 404 == 200
2026-01-28T09:24:33.6570193Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6570551Z FAILED tests/integration/endpoints/test_project_flow.py::TestProjectEndpoint::test_project_task_completes - assert 404 == 200
2026-01-28T09:24:33.6570650Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6570985Z FAILED tests/integration/endpoints/test_project_flow.py::TestProjectEndpoint::test_project_with_pca - assert 404 == 200
2026-01-28T09:24:33.6571094Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6571435Z FAILED tests/integration/endpoints/test_project_flow.py::TestProjectEndpoint::test_project_with_umap - assert 404 == 200
2026-01-28T09:24:33.6571533Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6571873Z FAILED tests/integration/endpoints/test_project_flow.py::TestProjectEndpoint::test_project_with_tsne - assert 404 == 200
2026-01-28T09:24:33.6571971Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6572488Z FAILED tests/integration/endpoints/test_project_flow.py::TestProjectEndpoint::test_project_standard_sequences[standard_001] - assert 404 == 200
2026-01-28T09:24:33.6572596Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6573012Z FAILED tests/integration/endpoints/test_project_flow.py::TestProjectEndpoint::test_project_standard_sequences[standard_002] - assert 404 == 200
2026-01-28T09:24:33.6573115Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6573532Z FAILED tests/integration/endpoints/test_project_flow.py::TestProjectEndpoint::test_project_standard_sequences[standard_003] - assert 404 == 200
2026-01-28T09:24:33.6573632Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6574061Z FAILED tests/integration/endpoints/test_project_flow.py::TestProjectEndpoint::test_project_real_world_sequences[real_insulin_b] - assert 404 == 200
2026-01-28T09:24:33.6574164Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6574745Z FAILED tests/integration/endpoints/test_project_flow.py::TestProjectEndpoint::test_project_real_world_sequences[real_ubiquitin] - assert 404 == 200
2026-01-28T09:24:33.6574845Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6575274Z FAILED tests/integration/endpoints/test_project_flow.py::TestProjectEndpoint::test_project_real_world_sequences[real_gfp_core] - assert 404 == 200
2026-01-28T09:24:33.6575475Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6575845Z FAILED tests/integration/endpoints/test_project_flow.py::TestProjectEndpoint::test_project_diverse_sequences - assert 404 == 200
2026-01-28T09:24:33.6575950Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6576333Z FAILED tests/integration/endpoints/test_project_flow.py::TestProjectEndpoint::test_project_invalid_method_rejected - assert 404 == 400
2026-01-28T09:24:33.6576432Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6576852Z FAILED tests/integration/endpoints/test_project_flow.py::TestProjectEndpoint::test_project_empty_sequences_rejected - assert 404 in (400, 422)
2026-01-28T09:24:33.6576951Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6577369Z FAILED tests/integration/endpoints/test_project_flow.py::TestProjectionTaskLifecycle::test_projection_task_id_uniqueness - assert 404 == 200
2026-01-28T09:24:33.6577476Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6577864Z FAILED tests/integration/endpoints/test_project_flow.py::TestProjectionTaskLifecycle::test_task_status_endpoint - assert 404 == 200
2026-01-28T09:24:33.6577963Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6578362Z FAILED tests/integration/endpoints/test_project_flow.py::TestEndToEndProjectionFlow::test_complete_projection_flow - assert 404 == 200
2026-01-28T09:24:33.6578461Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6578845Z FAILED tests/integration/endpoints/test_project_flow.py::TestEndToEndProjectionFlow::test_umap_projection_flow - assert 404 == 200
2026-01-28T09:24:33.6578944Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6579511Z FAILED tests/integration/endpoints/test_project_flow.py::TestEndToEndProjectionFlow::test_projection_with_different_embedders - AssertionError: Failed for embedder: one_hot_encoding
2026-01-28T09:24:33.6579582Z assert 404 == 200
2026-01-28T09:24:33.6579681Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6580125Z FAILED tests/integration/endpoints/test_project_flow.py::TestEndToEndProjectionFlow::test_projection_with_real_world_collection - assert 404 == 200
2026-01-28T09:24:33.6580222Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6580723Z FAILED tests/integration/endpoints/test_train_inference_flow.py::TestConfigOptionsEndpoint::test_get_config_options_for_classification - assert 404 == 200
2026-01-28T09:24:33.6580831Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6581278Z FAILED tests/integration/endpoints/test_train_inference_flow.py::TestConfigOptionsEndpoint::test_get_config_options_for_regression - assert 404 == 200
2026-01-28T09:24:33.6581379Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6581840Z FAILED tests/integration/endpoints/test_train_inference_flow.py::TestConfigOptionsEndpoint::test_get_config_options_invalid_protocol - assert 404 == 400
2026-01-28T09:24:33.6581943Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6582505Z FAILED tests/integration/endpoints/test_train_inference_flow.py::TestVerifyConfigEndpoint::test_verify_valid_classification_config - assert 404 == 200
2026-01-28T09:24:33.6582615Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6583052Z FAILED tests/integration/endpoints/test_train_inference_flow.py::TestVerifyConfigEndpoint::test_verify_valid_regression_config - assert 404 == 200
2026-01-28T09:24:33.6583271Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6583709Z FAILED tests/integration/endpoints/test_train_inference_flow.py::TestVerifyConfigEndpoint::test_verify_invalid_protocol_config - assert 404 == 200
2026-01-28T09:24:33.6583808Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6584233Z FAILED tests/integration/endpoints/test_train_inference_flow.py::TestStartTrainingEndpoint::test_start_training_creates_task - assert 404 == 200
2026-01-28T09:24:33.6584452Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6584898Z FAILED tests/integration/endpoints/test_train_inference_flow.py::TestStartTrainingEndpoint::test_start_training_with_real_proteins - assert 404 == 200
2026-01-28T09:24:33.6584998Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6585420Z FAILED tests/integration/endpoints/test_train_inference_flow.py::TestStartTrainingEndpoint::test_start_regression_training - assert 404 == 200
2026-01-28T09:24:33.6585524Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6585973Z FAILED tests/integration/endpoints/test_train_inference_flow.py::TestStartTrainingEndpoint::test_start_training_empty_data_rejected - assert 404 == 422
2026-01-28T09:24:33.6586077Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6586535Z FAILED tests/integration/endpoints/test_train_inference_flow.py::TestStartTrainingEndpoint::test_start_training_invalid_config - assert 404 in [400, 422]
2026-01-28T09:24:33.6586640Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6587125Z FAILED tests/integration/endpoints/test_train_inference_flow.py::TestStartInferenceEndpoint::test_start_inference_empty_sequences_rejected - assert 404 == 422
2026-01-28T09:24:33.6587226Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6587821Z FAILED tests/integration/endpoints/test_train_inference_flow.py::TestStartInferenceEndpoint::test_start_inference_with_standard_sequences - NameError: name 'STANDARD_SEQUENCES' is not defined
2026-01-28T09:24:33.6588245Z FAILED tests/integration/endpoints/test_train_inference_flow.py::TestTrainingTaskLifecycle::test_training_task_completes - assert 404 == 200
2026-01-28T09:24:33.6588344Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6588786Z FAILED tests/integration/endpoints/test_train_inference_flow.py::TestEndToEndTrainInferenceFlow::test_train_then_inference_flow - assert 404 == 200
2026-01-28T09:24:33.6588895Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6589360Z FAILED tests/integration/endpoints/test_train_inference_flow.py::TestEndToEndTrainInferenceFlow::test_regression_train_inference_flow - assert 404 == 200
2026-01-28T09:24:33.6589459Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6589920Z FAILED tests/integration/endpoints/test_train_inference_flow.py::TestEndToEndTrainInferenceFlow::test_get_model_files_after_training - assert 404 == 200
2026-01-28T09:24:33.6590022Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6590456Z FAILED tests/integration/endpoints/test_train_inference_flow.py::TestTrainingDataValidation::test_training_with_train_val_split - assert 404 == 200
2026-01-28T09:24:33.6590560Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6590999Z FAILED tests/integration/endpoints/test_train_inference_flow.py::TestTrainingDataValidation::test_training_with_multiple_classes - assert 404 == 200
2026-01-28T09:24:33.6591098Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6591529Z FAILED tests/integration/endpoints/test_train_inference_flow.py::TestTrainingDataValidation::test_training_with_long_sequences - assert 404 == 200
2026-01-28T09:24:33.6591635Z  +  where 404 = <Response [404 Not Found]>.status_code
2026-01-28T09:24:33.6591798Z =========== 101 failed, 6 passed, 30 skipped, 18 warnings in 58.60s ============
2026-01-28T09:24:33.9723992Z sys:1: DeprecationWarning: builtin type swigvarlink has no __module__ attribute
2026-01-28T09:24:35.9246130Z [command]/usr/bin/bash /home/runner/work/_actions/coactions/setup-xvfb/v1/dist/cleanup.sh
2026-01-28T09:24:35.9268605Z /usr/bin/bash: /home/runner/work/_actions/coactions/setup-xvfb/v1/dist/cleanup.sh: No such file or directory
2026-01-28T09:24:35.9298412Z ##[error]The process '/usr/bin/xvfb-run' failed with exit code 1
